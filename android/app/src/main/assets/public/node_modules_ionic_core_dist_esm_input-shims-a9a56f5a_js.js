"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_input-shims-a9a56f5a_js"],{

/***/ 6061:
/*!*******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/input-shims-a9a56f5a.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "startInputShims": () => (/* binding */ startInputShims)
/* harmony export */ });
/* harmony import */ var C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 1670);
/* harmony import */ var _index_3413f7be_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-3413f7be.js */ 7288);
/* harmony import */ var _helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-4d272360.js */ 9158);
/* harmony import */ var _index_c4b11676_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-c4b11676.js */ 9273);


/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */



const cloneMap = new WeakMap();

const relocateInput = (componentEl, inputEl, shouldRelocate, inputRelativeY = 0) => {
  if (cloneMap.has(componentEl) === shouldRelocate) {
    return;
  }

  if (shouldRelocate) {
    addClone(componentEl, inputEl, inputRelativeY);
  } else {
    removeClone(componentEl, inputEl);
  }
};

const isFocused = input => {
  return input === input.getRootNode().activeElement;
};

const addClone = (componentEl, inputEl, inputRelativeY) => {
  // this allows for the actual input to receive the focus from
  // the user's touch event, but before it receives focus, it
  // moves the actual input to a location that will not screw
  // up the app's layout, and does not allow the native browser
  // to attempt to scroll the input into place (messing up headers/footers)
  // the cloned input fills the area of where native input should be
  // while the native input fakes out the browser by relocating itself
  // before it receives the actual focus event
  // We hide the focused input (with the visible caret) invisible by making it scale(0),
  const parentEl = inputEl.parentNode; // DOM WRITES

  const clonedEl = inputEl.cloneNode(false);
  clonedEl.classList.add('cloned-input');
  clonedEl.tabIndex = -1;
  parentEl.appendChild(clonedEl);
  cloneMap.set(componentEl, clonedEl);
  const doc = componentEl.ownerDocument;
  const tx = doc.dir === 'rtl' ? 9999 : -9999;
  componentEl.style.pointerEvents = 'none';
  inputEl.style.transform = `translate3d(${tx}px,${inputRelativeY}px,0) scale(0)`;
};

const removeClone = (componentEl, inputEl) => {
  const clone = cloneMap.get(componentEl);

  if (clone) {
    cloneMap.delete(componentEl);
    clone.remove();
  }

  componentEl.style.pointerEvents = '';
  inputEl.style.transform = '';
};

const enableHideCaretOnScroll = (componentEl, inputEl, scrollEl) => {
  if (!scrollEl || !inputEl) {
    return () => {
      return;
    };
  }

  const scrollHideCaret = shouldHideCaret => {
    if (isFocused(inputEl)) {
      relocateInput(componentEl, inputEl, shouldHideCaret);
    }
  };

  const onBlur = () => relocateInput(componentEl, inputEl, false);

  const hideCaret = () => scrollHideCaret(true);

  const showCaret = () => scrollHideCaret(false);

  (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollStart', hideCaret);
  (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollEnd', showCaret);
  inputEl.addEventListener('blur', onBlur);
  return () => {
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollStart', hideCaret);
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollEnd', showCaret);
    inputEl.addEventListener('ionBlur', onBlur);
  };
};

const SKIP_SELECTOR = 'input, textarea, [no-blur], [contenteditable]';

const enableInputBlurring = () => {
  let focused = true;
  let didScroll = false;
  const doc = document;

  const onScroll = () => {
    didScroll = true;
  };

  const onFocusin = () => {
    focused = true;
  };

  const onTouchend = ev => {
    // if app did scroll return early
    if (didScroll) {
      didScroll = false;
      return;
    }

    const active = doc.activeElement;

    if (!active) {
      return;
    } // only blur if the active element is a text-input or a textarea


    if (active.matches(SKIP_SELECTOR)) {
      return;
    } // if the selected target is the active element, do not blur


    const tapped = ev.target;

    if (tapped === active) {
      return;
    }

    if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {
      return;
    }

    focused = false; // TODO: find a better way, why 50ms?

    setTimeout(() => {
      if (!focused) {
        active.blur();
      }
    }, 50);
  };

  (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.a)(doc, 'ionScrollStart', onScroll);
  doc.addEventListener('focusin', onFocusin, true);
  doc.addEventListener('touchend', onTouchend, false);
  return () => {
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.b)(doc, 'ionScrollStart', onScroll, true);
    doc.removeEventListener('focusin', onFocusin, true);
    doc.removeEventListener('touchend', onTouchend, false);
  };
};

const SCROLL_ASSIST_SPEED = 0.3;

const getScrollData = (componentEl, contentEl, keyboardHeight) => {
  const itemEl = componentEl.closest('ion-item,[ion-item]') || componentEl;
  return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight);
};

const calcScrollData = (inputRect, contentRect, keyboardHeight, platformHeight) => {
  // compute input's Y values relative to the body
  const inputTop = inputRect.top;
  const inputBottom = inputRect.bottom; // compute visible area

  const visibleAreaTop = contentRect.top;
  const visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight); // compute safe area

  const safeAreaTop = visibleAreaTop + 15;
  const safeAreaBottom = visibleAreaBottom * 0.75; // figure out if each edge of the input is within the safe area

  const distanceToBottom = safeAreaBottom - inputBottom;
  const distanceToTop = safeAreaTop - inputTop; // desiredScrollAmount is the negated distance to the safe area according to our calculations.

  const desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0); // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input
  // gets focus, so make sure we don't scroll the input above the visible area

  const scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);
  const distance = Math.abs(scrollAmount);
  const duration = distance / SCROLL_ASSIST_SPEED;
  const scrollDuration = Math.min(400, Math.max(150, duration));
  return {
    scrollAmount,
    scrollDuration,
    scrollPadding: keyboardHeight,
    inputSafeY: -(inputTop - safeAreaTop) + 4
  };
};

const enableScrollAssist = (componentEl, inputEl, contentEl, footerEl, keyboardHeight) => {
  let coord;

  const touchStart = ev => {
    coord = (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.p)(ev);
  };

  const touchEnd = ev => {
    // input cover touchend/mouseup
    if (!coord) {
      return;
    } // get where the touchend/mouseup ended


    const endCoord = (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.p)(ev); // focus this input if the pointer hasn't moved XX pixels
    // and the input doesn't already have focus

    if (!hasPointerMoved(6, coord, endCoord) && !isFocused(inputEl)) {
      // begin the input focus process
      jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight);
    }
  };

  componentEl.addEventListener('touchstart', touchStart, {
    capture: true,
    passive: true
  });
  componentEl.addEventListener('touchend', touchEnd, true);
  return () => {
    componentEl.removeEventListener('touchstart', touchStart, true);
    componentEl.removeEventListener('touchend', touchEnd, true);
  };
};

const jsSetFocus = /*#__PURE__*/function () {
  var _ref = (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl, inputEl, contentEl, footerEl, keyboardHeight) {
    if (!contentEl && !footerEl) {
      return;
    }

    const scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight);

    if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {
      // the text input is in a safe position that doesn't
      // require it to be scrolled into view, just set focus now
      inputEl.focus();
      return;
    } // temporarily move the focus to the focus holder so the browser
    // doesn't freak out while it's trying to get the input in place
    // at this point the native text input still does not have focus


    relocateInput(componentEl, inputEl, true, scrollData.inputSafeY);
    inputEl.focus();
    /**
     * Relocating/Focusing input causes the
     * click event to be cancelled, so
     * manually fire one here.
     */

    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.r)(() => componentEl.click());

    if (typeof window !== 'undefined') {
      let scrollContentTimeout;

      const scrollContent = /*#__PURE__*/function () {
        var _ref2 = (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
          // clean up listeners and timeouts
          if (scrollContentTimeout !== undefined) {
            clearTimeout(scrollContentTimeout);
          }

          window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          window.removeEventListener('ionKeyboardDidShow', scrollContent); // scroll the input into place

          if (contentEl) {
            yield (0,_index_3413f7be_js__WEBPACK_IMPORTED_MODULE_1__.c)(contentEl, 0, scrollData.scrollAmount, scrollData.scrollDuration);
          } // the scroll view is in the correct position now
          // give the native text input focus


          relocateInput(componentEl, inputEl, false, scrollData.inputSafeY); // ensure this is the focused input

          inputEl.focus();
        });

        return function scrollContent() {
          return _ref2.apply(this, arguments);
        };
      }();

      const doubleKeyboardEventListener = () => {
        window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
        window.addEventListener('ionKeyboardDidShow', scrollContent);
      };

      if (contentEl) {
        const scrollEl = yield (0,_index_3413f7be_js__WEBPACK_IMPORTED_MODULE_1__.g)(contentEl);
        /**
         * scrollData will only consider the amount we need
         * to scroll in order to properly bring the input
         * into view. It will not consider the amount
         * we can scroll in the content element.
         * As a result, scrollData may request a greater
         * scroll position than is currently available
         * in the DOM. If this is the case, we need to
         * wait for the webview to resize/the keyboard
         * to show in order for additional scroll
         * bandwidth to become available.
         */

        const totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;

        if (scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop) {
          /**
           * On iOS devices, the system will show a "Passwords" bar above the keyboard
           * after the initial keyboard is shown. This prevents the webview from resizing
           * until the "Passwords" bar is shown, so we need to wait for that to happen first.
           */
          if (inputEl.type === 'password') {
            // Add 50px to account for the "Passwords" bar
            scrollData.scrollAmount += 50;
            window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          } else {
            window.addEventListener('ionKeyboardDidShow', scrollContent);
          }
          /**
           * This should only fire in 2 instances:
           * 1. The app is very slow.
           * 2. The app is running in a browser on an old OS
           * that does not support Ionic Keyboard Events
           */


          scrollContentTimeout = setTimeout(scrollContent, 1000);
          return;
        }
      }

      scrollContent();
    }
  });

  return function jsSetFocus(_x, _x2, _x3, _x4, _x5) {
    return _ref.apply(this, arguments);
  };
}();

const hasPointerMoved = (threshold, startCoord, endCoord) => {
  if (startCoord && endCoord) {
    const deltaX = startCoord.x - endCoord.x;
    const deltaY = startCoord.y - endCoord.y;
    const distance = deltaX * deltaX + deltaY * deltaY;
    return distance > threshold * threshold;
  }

  return false;
};

const PADDING_TIMER_KEY = '$ionPaddingTimer';

const enableScrollPadding = keyboardHeight => {
  const doc = document;

  const onFocusin = ev => {
    setScrollPadding(ev.target, keyboardHeight);
  };

  const onFocusout = ev => {
    setScrollPadding(ev.target, 0);
  };

  doc.addEventListener('focusin', onFocusin);
  doc.addEventListener('focusout', onFocusout);
  return () => {
    doc.removeEventListener('focusin', onFocusin);
    doc.removeEventListener('focusout', onFocusout);
  };
};

const setScrollPadding = (input, keyboardHeight) => {
  var _a, _b;

  if (input.tagName !== 'INPUT') {
    return;
  }

  if (input.parentElement && input.parentElement.tagName === 'ION-INPUT') {
    return;
  }

  if (((_b = (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.tagName) === 'ION-SEARCHBAR') {
    return;
  }

  const el = (0,_index_3413f7be_js__WEBPACK_IMPORTED_MODULE_1__.f)(input);

  if (el === null) {
    return;
  }

  const timer = el[PADDING_TIMER_KEY];

  if (timer) {
    clearTimeout(timer);
  }

  if (keyboardHeight > 0) {
    el.style.setProperty('--keyboard-offset', `${keyboardHeight}px`);
  } else {
    el[PADDING_TIMER_KEY] = setTimeout(() => {
      el.style.setProperty('--keyboard-offset', '0px');
    }, 120);
  }
};

const INPUT_BLURRING = true;
const SCROLL_PADDING = true;

const startInputShims = config => {
  const doc = document;
  const keyboardHeight = config.getNumber('keyboardHeight', 290);
  const scrollAssist = config.getBoolean('scrollAssist', true);
  const hideCaret = config.getBoolean('hideCaretOnScroll', true);
  const inputBlurring = config.getBoolean('inputBlurring', true);
  const scrollPadding = config.getBoolean('scrollPadding', true);
  const inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));
  const hideCaretMap = new WeakMap();
  const scrollAssistMap = new WeakMap();

  const registerInput = /*#__PURE__*/function () {
    var _ref3 = (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl) {
      yield new Promise(resolve => (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_2__.c)(componentEl, resolve));
      const inputRoot = componentEl.shadowRoot || componentEl;
      const inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');
      const scrollEl = (0,_index_3413f7be_js__WEBPACK_IMPORTED_MODULE_1__.f)(componentEl);
      const footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;

      if (!inputEl) {
        return;
      }

      if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {
        const rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);
        hideCaretMap.set(componentEl, rmFn);
      }
      /**
       * date/datetime-locale inputs on mobile devices show date picker
       * overlays instead of keyboards. As a result, scroll assist is
       * not needed. This also works around a bug in iOS <16 where
       * scroll assist causes the browser to lock up. See FW-1997.
       */


      const isDateInput = inputEl.type === 'date' || inputEl.type === 'datetime-local';

      if (!isDateInput && (!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {
        const rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight);
        scrollAssistMap.set(componentEl, rmFn);
      }
    });

    return function registerInput(_x6) {
      return _ref3.apply(this, arguments);
    };
  }();

  const unregisterInput = componentEl => {
    if (hideCaret) {
      const fn = hideCaretMap.get(componentEl);

      if (fn) {
        fn();
      }

      hideCaretMap.delete(componentEl);
    }

    if (scrollAssist) {
      const fn = scrollAssistMap.get(componentEl);

      if (fn) {
        fn();
      }

      scrollAssistMap.delete(componentEl);
    }
  };

  if (inputBlurring && INPUT_BLURRING) {
    enableInputBlurring();
  }

  if (scrollPadding && SCROLL_PADDING) {
    enableScrollPadding(keyboardHeight);
  } // Input might be already loaded in the DOM before ion-device-hacks did.
  // At this point we need to look for all of the inputs not registered yet
  // and register them.


  for (const input of inputs) {
    registerInput(input);
  }

  doc.addEventListener('ionInputDidLoad', ev => {
    registerInput(ev.detail);
  });
  doc.addEventListener('ionInputDidUnload', ev => {
    unregisterInput(ev.detail);
  });
};



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW5wdXQtc2hpbXMtYTlhNTZmNWFfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLE1BQU1lLFFBQVEsR0FBRyxJQUFJQyxPQUFKLEVBQWpCOztBQUNBLE1BQU1DLGFBQWEsR0FBRyxDQUFDQyxXQUFELEVBQWNDLE9BQWQsRUFBdUJDLGNBQXZCLEVBQXVDQyxjQUFjLEdBQUcsQ0FBeEQsS0FBOEQ7RUFDbEYsSUFBSU4sUUFBUSxDQUFDTyxHQUFULENBQWFKLFdBQWIsTUFBOEJFLGNBQWxDLEVBQWtEO0lBQ2hEO0VBQ0Q7O0VBQ0QsSUFBSUEsY0FBSixFQUFvQjtJQUNsQkcsUUFBUSxDQUFDTCxXQUFELEVBQWNDLE9BQWQsRUFBdUJFLGNBQXZCLENBQVI7RUFDRCxDQUZELE1BR0s7SUFDSEcsV0FBVyxDQUFDTixXQUFELEVBQWNDLE9BQWQsQ0FBWDtFQUNEO0FBQ0YsQ0FWRDs7QUFXQSxNQUFNTSxTQUFTLEdBQUlDLEtBQUQsSUFBVztFQUMzQixPQUFPQSxLQUFLLEtBQUtBLEtBQUssQ0FBQ0MsV0FBTixHQUFvQkMsYUFBckM7QUFDRCxDQUZEOztBQUdBLE1BQU1MLFFBQVEsR0FBRyxDQUFDTCxXQUFELEVBQWNDLE9BQWQsRUFBdUJFLGNBQXZCLEtBQTBDO0VBQ3pEO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLE1BQU1RLFFBQVEsR0FBR1YsT0FBTyxDQUFDVyxVQUF6QixDQVZ5RCxDQVd6RDs7RUFDQSxNQUFNQyxRQUFRLEdBQUdaLE9BQU8sQ0FBQ2EsU0FBUixDQUFrQixLQUFsQixDQUFqQjtFQUNBRCxRQUFRLENBQUNFLFNBQVQsQ0FBbUJDLEdBQW5CLENBQXVCLGNBQXZCO0VBQ0FILFFBQVEsQ0FBQ0ksUUFBVCxHQUFvQixDQUFDLENBQXJCO0VBQ0FOLFFBQVEsQ0FBQ08sV0FBVCxD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QUFvQjdCLFdBQXBCO0lBQ0Q7O0lBQ0QsSUFBSXNJLFlBQUosRUFBa0I7TUFDaEIsTUFBTWtCLEVBQUUsR0FBR1YsZUFBZSxDQUFDbEgsR0FBaEIsQ0FBb0I1QixXQUFwQixDQUFYOztNQUNBLElBQUl3SixFQUFKLEVBQVE7UUFDTkEsRUFBRTtNQUNIOztNQUNEVixlQUFlLENBQUNqSCxNQUFoQixDQUF1QjdCLFdBQXZCO0lBQ0Q7RUFDRixDQWZEOztFQWdCQSxJQUFJd0ksYUFBYSxJQUFJUCxjQUFyQixFQUFxQztJQUNuQzFGLG1CQUFtQjtFQUNwQjs7RUFDRCxJQUFJK0MsYUFBYSxJQUFJNEMsY0FBckIsRUFBcUM7SUFDbkNYLG1CQUFtQixDQUFDOUQsY0FBRCxDQUFuQjtFQUNELENBM0RpQyxDQTREbEM7RUFDQTtFQUNBOzs7RUFDQSxLQUFLLE1BQU1qRCxLQUFYLElBQW9CaUksTUFBcEIsRUFBNEI7SUFDMUJNLGFBQWEsQ0FBQ3ZJLEtBQUQsQ0FBYjtFQUNEOztFQUNEWSxHQUFHLENBQUMvQixnQkFBSixDQUFxQixpQkFBckIsRUFBMEN5RCxFQUFELElBQVE7SUFDL0NpRyxhQUFhLENBQUNqRyxFQUFFLENBQUMyRyxNQUFKLENBQWI7RUFDRCxDQUZEO0VBR0FySSxHQUFHLENBQUMvQixnQkFBSixDQUFxQixtQkFBckIsRUFBNEN5RCxFQUFELElBQVE7SUFDakR5RyxlQUFlLENBQUN6RyxFQUFFLENBQUMyRyxNQUFKLENBQWY7RUFDRCxDQUZEO0FBR0QsQ0F4RUQiLCJzb3VyY2VzIjpbIi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lucHV0LXNoaW1zLWE5YTU2ZjVhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG5pbXBvcnQgeyBnIGFzIGdldFNjcm9sbEVsZW1lbnQsIGMgYXMgc2Nyb2xsQnlQb2ludCwgZiBhcyBmaW5kQ2xvc2VzdElvbkNvbnRlbnQgfSBmcm9tICcuL2luZGV4LTM0MTNmN2JlLmpzJztcbmltcG9ydCB7IGEgYXMgYWRkRXZlbnRMaXN0ZW5lciwgYiBhcyByZW1vdmVFdmVudExpc3RlbmVyLCByIGFzIHJhZiwgcCBhcyBwb2ludGVyQ29vcmQsIGMgYXMgY29tcG9uZW50T25SZWFkeSB9IGZyb20gJy4vaGVscGVycy00ZDI3MjM2MC5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtYzRiMTE2NzYuanMnO1xuXG5jb25zdCBjbG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZWxvY2F0ZUlucHV0ID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzaG91bGRSZWxvY2F0ZSwgaW5wdXRSZWxhdGl2ZVkgPSAwKSA9PiB7XG4gIGlmIChjbG9uZU1hcC5oYXMoY29tcG9uZW50RWwpID09PSBzaG91bGRSZWxvY2F0ZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2hvdWxkUmVsb2NhdGUpIHtcbiAgICBhZGRDbG9uZShjb21wb25lbnRFbCwgaW5wdXRFbCwgaW5wdXRSZWxhdGl2ZVkpO1xuICB9XG4gIGVsc2Uge1xuICAgIHJlbW92ZUNsb25lKGNvbXBvbmVudEVsLCBpbnB1dEVsKTtcbiAgfVxufTtcbmNvbnN0IGlzRm9jdXNlZCA9IChpbnB1dCkgPT4ge1xuICByZXR1cm4gaW5wdXQgPT09IGlucHV0LmdldFJvb3ROb2RlKCkuYWN0aXZlRWxlbWVudDtcbn07XG5jb25zdCBhZGRDbG9uZSA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgaW5wdXRSZWxhdGl2ZVkpID0+IHtcbiAgLy8gdGhpcyBhbGxvd3MgZm9yIHRoZSBhY3R1YWwgaW5wdXQgdG8gcmVjZWl2ZSB0aGUgZm9jdXMgZnJvbVxuICAvLyB0aGUgdXNlcidzIHRvdWNoIGV2ZW50LCBidXQgYmVmb3JlIGl0IHJlY2VpdmVzIGZvY3VzLCBpdFxuICAvLyBtb3ZlcyB0aGUgYWN0dWFsIGlucHV0IHRvIGEgbG9jYXRpb24gdGhhdCB3aWxsIG5vdCBzY3Jld1xuICAvLyB1cCB0aGUgYXBwJ3MgbGF5b3V0LCBhbmQgZG9lcyBub3QgYWxsb3cgdGhlIG5hdGl2ZSBicm93c2VyXG4gIC8vIHRvIGF0dGVtcHQgdG8gc2Nyb2xsIHRoZSBpbnB1dCBpbnRvIHBsYWNlIChtZXNzaW5nIHVwIGhlYWRlcnMvZm9vdGVycylcbiAgLy8gdGhlIGNsb25lZCBpbnB1dCBmaWxscyB0aGUgYXJlYSBvZiB3aGVyZSBuYXRpdmUgaW5wdXQgc2hvdWxkIGJlXG4gIC8vIHdoaWxlIHRoZSBuYXRpdmUgaW5wdXQgZmFrZXMgb3V0IHRoZSBicm93c2VyIGJ5IHJlbG9jYXRpbmcgaXRzZWxmXG4gIC8vIGJlZm9yZSBpdCByZWNlaXZlcyB0aGUgYWN0dWFsIGZvY3VzIGV2ZW50XG4gIC8vIFdlIGhpZGUgdGhlIGZvY3VzZWQgaW5wdXQgKHdpdGggdGhlIHZpc2libGUgY2FyZXQpIGludmlzaWJsZSBieSBtYWtpbmcgaXQgc2NhbGUoMCksXG4gIGNvbnN0IHBhcmVudEVsID0gaW5wdXRFbC5wYXJlbnROb2RlO1xuICAvLyBET00gV1JJVEVTXG4gIGNvbnN0IGNsb25lZEVsID0gaW5wdXRFbC5jbG9uZU5vZGUoZmFsc2UpO1xuICBjbG9uZWRFbC5jbGFzc0xpc3QuYWRkKCdjbG9uZWQtaW5wdXQnKTtcbiAgY2xvbmVkRWwudGFiSW5kZXggPSAtMTtcbiAgcGFyZW50RWwuYXBwZW5kQ2hpbGQoY2xvbmVkRWwpO1xuICBjbG9uZU1hcC5zZXQoY29tcG9uZW50RWwsIGNsb25lZEVsKTtcbiAgY29uc3QgZG9jID0gY29tcG9uZW50RWwub3duZXJEb2N1bWVudDtcbiAgY29uc3QgdHggPSBkb2MuZGlyID09PSAncnRsJyA/IDk5OTkgOiAtOTk5OTtcbiAgY29tcG9uZW50RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgaW5wdXRFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0eH1weCwke2lucHV0UmVsYXRpdmVZfXB4LDApIHNjYWxlKDApYDtcbn07XG5jb25zdCByZW1vdmVDbG9uZSA9IChjb21wb25lbnRFbCwgaW5wdXRFbCkgPT4ge1xuICBjb25zdCBjbG9uZSA9IGNsb25lTWFwLmdldChjb21wb25lbnRFbCk7XG4gIGlmIChjbG9uZSkge1xuICAgIGNsb25lTWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgY2xvbmUucmVtb3ZlKCk7XG4gIH1cbiAgY29tcG9uZW50RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICcnO1xuICBpbnB1dEVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xufTtcblxuY29uc3QgZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsKSA9PiB7XG4gIGlmICghc2Nyb2xsRWwgfHwgIWlucHV0RWwpIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmV0dXJuO1xuICAgIH07XG4gIH1cbiAgY29uc3Qgc2Nyb2xsSGlkZUNhcmV0ID0gKHNob3VsZEhpZGVDYXJldCkgPT4ge1xuICAgIGlmIChpc0ZvY3VzZWQoaW5wdXRFbCkpIHtcbiAgICAgIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZEhpZGVDYXJldCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBvbkJsdXIgPSAoKSA9PiByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBmYWxzZSk7XG4gIGNvbnN0IGhpZGVDYXJldCA9ICgpID0+IHNjcm9sbEhpZGVDYXJldCh0cnVlKTtcbiAgY29uc3Qgc2hvd0NhcmV0ID0gKCkgPT4gc2Nyb2xsSGlkZUNhcmV0KGZhbHNlKTtcbiAgYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbFN0YXJ0JywgaGlkZUNhcmV0KTtcbiAgYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbEVuZCcsIHNob3dDYXJldCk7XG4gIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQmx1cik7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbFN0YXJ0JywgaGlkZUNhcmV0KTtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsRW5kJywgc2hvd0NhcmV0KTtcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbkJsdXInLCBvbkJsdXIpO1xuICB9O1xufTtcblxuY29uc3QgU0tJUF9TRUxFQ1RPUiA9ICdpbnB1dCwgdGV4dGFyZWEsIFtuby1ibHVyXSwgW2NvbnRlbnRlZGl0YWJsZV0nO1xuY29uc3QgZW5hYmxlSW5wdXRCbHVycmluZyA9ICgpID0+IHtcbiAgbGV0IGZvY3VzZWQgPSB0cnVlO1xuICBsZXQgZGlkU2Nyb2xsID0gZmFsc2U7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBvblNjcm9sbCA9ICgpID0+IHtcbiAgICBkaWRTY3JvbGwgPSB0cnVlO1xuICB9O1xuICBjb25zdCBvbkZvY3VzaW4gPSAoKSA9PiB7XG4gICAgZm9jdXNlZCA9IHRydWU7XG4gIH07XG4gIGNvbnN0IG9uVG91Y2hlbmQgPSAoZXYpID0+IHtcbiAgICAvLyBpZiBhcHAgZGlkIHNjcm9sbCByZXR1cm4gZWFybHlcbiAgICBpZiAoZGlkU2Nyb2xsKSB7XG4gICAgICBkaWRTY3JvbGwgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlID0gZG9jLmFjdGl2ZUVsZW1lbnQ7XG4gICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gb25seSBibHVyIGlmIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBhIHRleHQtaW5wdXQgb3IgYSB0ZXh0YXJlYVxuICAgIGlmIChhY3RpdmUubWF0Y2hlcyhTS0lQX1NFTEVDVE9SKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgc2VsZWN0ZWQgdGFyZ2V0IGlzIHRoZSBhY3RpdmUgZWxlbWVudCwgZG8gbm90IGJsdXJcbiAgICBjb25zdCB0YXBwZWQgPSBldi50YXJnZXQ7XG4gICAgaWYgKHRhcHBlZCA9PT0gYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0YXBwZWQubWF0Y2hlcyhTS0lQX1NFTEVDVE9SKSB8fCB0YXBwZWQuY2xvc2VzdChTS0lQX1NFTEVDVE9SKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb2N1c2VkID0gZmFsc2U7XG4gICAgLy8gVE9ETzogZmluZCBhIGJldHRlciB3YXksIHdoeSA1MG1zP1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCFmb2N1c2VkKSB7XG4gICAgICAgIGFjdGl2ZS5ibHVyKCk7XG4gICAgICB9XG4gICAgfSwgNTApO1xuICB9O1xuICBhZGRFdmVudExpc3RlbmVyKGRvYywgJ2lvblNjcm9sbFN0YXJ0Jywgb25TY3JvbGwpO1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbiwgdHJ1ZSk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hlbmQsIGZhbHNlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKGRvYywgJ2lvblNjcm9sbFN0YXJ0Jywgb25TY3JvbGwsIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoZW5kLCBmYWxzZSk7XG4gIH07XG59O1xuXG5jb25zdCBTQ1JPTExfQVNTSVNUX1NQRUVEID0gMC4zO1xuY29uc3QgZ2V0U2Nyb2xsRGF0YSA9IChjb21wb25lbnRFbCwgY29udGVudEVsLCBrZXlib2FyZEhlaWdodCkgPT4ge1xuICBjb25zdCBpdGVtRWwgPSBjb21wb25lbnRFbC5jbG9zZXN0KCdpb24taXRlbSxbaW9uLWl0ZW1dJykgfHwgY29tcG9uZW50RWw7XG4gIHJldHVybiBjYWxjU2Nyb2xsRGF0YShpdGVtRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGNvbnRlbnRFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwga2V5Ym9hcmRIZWlnaHQsIGNvbXBvbmVudEVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuaW5uZXJIZWlnaHQpO1xufTtcbmNvbnN0IGNhbGNTY3JvbGxEYXRhID0gKGlucHV0UmVjdCwgY29udGVudFJlY3QsIGtleWJvYXJkSGVpZ2h0LCBwbGF0Zm9ybUhlaWdodCkgPT4ge1xuICAvLyBjb21wdXRlIGlucHV0J3MgWSB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIGJvZHlcbiAgY29uc3QgaW5wdXRUb3AgPSBpbnB1dFJlY3QudG9wO1xuICBjb25zdCBpbnB1dEJvdHRvbSA9IGlucHV0UmVjdC5ib3R0b207XG4gIC8vIGNvbXB1dGUgdmlzaWJsZSBhcmVhXG4gIGNvbnN0IHZpc2libGVBcmVhVG9wID0gY29udGVudFJlY3QudG9wO1xuICBjb25zdCB2aXNpYmxlQXJlYUJvdHRvbSA9IE1hdGgubWluKGNvbnRlbnRSZWN0LmJvdHRvbSwgcGxhdGZvcm1IZWlnaHQgLSBrZXlib2FyZEhlaWdodCk7XG4gIC8vIGNvbXB1dGUgc2FmZSBhcmVhXG4gIGNvbnN0IHNhZmVBcmVhVG9wID0gdmlzaWJsZUFyZWFUb3AgKyAxNTtcbiAgY29uc3Qgc2FmZUFyZWFCb3R0b20gPSB2aXNpYmxlQXJlYUJvdHRvbSAqIDAuNzU7XG4gIC8vIGZpZ3VyZSBvdXQgaWYgZWFjaCBlZGdlIG9mIHRoZSBpbnB1dCBpcyB3aXRoaW4gdGhlIHNhZmUgYXJlYVxuICBjb25zdCBkaXN0YW5jZVRvQm90dG9tID0gc2FmZUFyZWFCb3R0b20gLSBpbnB1dEJvdHRvbTtcbiAgY29uc3QgZGlzdGFuY2VUb1RvcCA9IHNhZmVBcmVhVG9wIC0gaW5wdXRUb3A7XG4gIC8vIGRlc2lyZWRTY3JvbGxBbW91bnQgaXMgdGhlIG5lZ2F0ZWQgZGlzdGFuY2UgdG8gdGhlIHNhZmUgYXJlYSBhY2NvcmRpbmcgdG8gb3VyIGNhbGN1bGF0aW9ucy5cbiAgY29uc3QgZGVzaXJlZFNjcm9sbEFtb3VudCA9IE1hdGgucm91bmQoZGlzdGFuY2VUb0JvdHRvbSA8IDAgPyAtZGlzdGFuY2VUb0JvdHRvbSA6IGRpc3RhbmNlVG9Ub3AgPiAwID8gLWRpc3RhbmNlVG9Ub3AgOiAwKTtcbiAgLy8gb3VyIGNhbGN1bGF0aW9ucyBtYWtlIHNvbWUgYXNzdW1wdGlvbnMgdGhhdCBhcmVuJ3QgYWx3YXlzIHRydWUsIGxpa2UgdGhlIGtleWJvYXJkIGJlaW5nIGNsb3NlZCB3aGVuIGFuIGlucHV0XG4gIC8vIGdldHMgZm9jdXMsIHNvIG1ha2Ugc3VyZSB3ZSBkb24ndCBzY3JvbGwgdGhlIGlucHV0IGFib3ZlIHRoZSB2aXNpYmxlIGFyZWFcbiAgY29uc3Qgc2Nyb2xsQW1vdW50ID0gTWF0aC5taW4oZGVzaXJlZFNjcm9sbEFtb3VudCwgaW5wdXRUb3AgLSB2aXNpYmxlQXJlYVRvcCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMoc2Nyb2xsQW1vdW50KTtcbiAgY29uc3QgZHVyYXRpb24gPSBkaXN0YW5jZSAvIFNDUk9MTF9BU1NJU1RfU1BFRUQ7XG4gIGNvbnN0IHNjcm9sbER1cmF0aW9uID0gTWF0aC5taW4oNDAwLCBNYXRoLm1heCgxNTAsIGR1cmF0aW9uKSk7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsQW1vdW50LFxuICAgIHNjcm9sbER1cmF0aW9uLFxuICAgIHNjcm9sbFBhZGRpbmc6IGtleWJvYXJkSGVpZ2h0LFxuICAgIGlucHV0U2FmZVk6IC0oaW5wdXRUb3AgLSBzYWZlQXJlYVRvcCkgKyA0LFxuICB9O1xufTtcblxuY29uc3QgZW5hYmxlU2Nyb2xsQXNzaXN0ID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCkgPT4ge1xuICBsZXQgY29vcmQ7XG4gIGNvbnN0IHRvdWNoU3RhcnQgPSAoZXYpID0+IHtcbiAgICBjb29yZCA9IHBvaW50ZXJDb29yZChldik7XG4gIH07XG4gIGNvbnN0IHRvdWNoRW5kID0gKGV2KSA9PiB7XG4gICAgLy8gaW5wdXQgY292ZXIgdG91Y2hlbmQvbW91c2V1cFxuICAgIGlmICghY29vcmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gZ2V0IHdoZXJlIHRoZSB0b3VjaGVuZC9tb3VzZXVwIGVuZGVkXG4gICAgY29uc3QgZW5kQ29vcmQgPSBwb2ludGVyQ29vcmQoZXYpO1xuICAgIC8vIGZvY3VzIHRoaXMgaW5wdXQgaWYgdGhlIHBvaW50ZXIgaGFzbid0IG1vdmVkIFhYIHBpeGVsc1xuICAgIC8vIGFuZCB0aGUgaW5wdXQgZG9lc24ndCBhbHJlYWR5IGhhdmUgZm9jdXNcbiAgICBpZiAoIWhhc1BvaW50ZXJNb3ZlZCg2LCBjb29yZCwgZW5kQ29vcmQpICYmICFpc0ZvY3VzZWQoaW5wdXRFbCkpIHtcbiAgICAgIC8vIGJlZ2luIHRoZSBpbnB1dCBmb2N1cyBwcm9jZXNzXG4gICAgICBqc1NldEZvY3VzKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCk7XG4gICAgfVxuICB9O1xuICBjb21wb25lbnRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydCwgeyBjYXB0dXJlOiB0cnVlLCBwYXNzaXZlOiB0cnVlIH0pO1xuICBjb21wb25lbnRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRvdWNoRW5kLCB0cnVlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb21wb25lbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydCwgdHJ1ZSk7XG4gICAgY29tcG9uZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0b3VjaEVuZCwgdHJ1ZSk7XG4gIH07XG59O1xuY29uc3QganNTZXRGb2N1cyA9IGFzeW5jIChjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgaWYgKCFjb250ZW50RWwgJiYgIWZvb3RlckVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNjcm9sbERhdGEgPSBnZXRTY3JvbGxEYXRhKGNvbXBvbmVudEVsLCAoY29udGVudEVsIHx8IGZvb3RlckVsKSwga2V5Ym9hcmRIZWlnaHQpO1xuICBpZiAoY29udGVudEVsICYmIE1hdGguYWJzKHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50KSA8IDQpIHtcbiAgICAvLyB0aGUgdGV4dCBpbnB1dCBpcyBpbiBhIHNhZmUgcG9zaXRpb24gdGhhdCBkb2Vzbid0XG4gICAgLy8gcmVxdWlyZSBpdCB0byBiZSBzY3JvbGxlZCBpbnRvIHZpZXcsIGp1c3Qgc2V0IGZvY3VzIG5vd1xuICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gdGVtcG9yYXJpbHkgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZvY3VzIGhvbGRlciBzbyB0aGUgYnJvd3NlclxuICAvLyBkb2Vzbid0IGZyZWFrIG91dCB3aGlsZSBpdCdzIHRyeWluZyB0byBnZXQgdGhlIGlucHV0IGluIHBsYWNlXG4gIC8vIGF0IHRoaXMgcG9pbnQgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IHN0aWxsIGRvZXMgbm90IGhhdmUgZm9jdXNcbiAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgdHJ1ZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZKTtcbiAgaW5wdXRFbC5mb2N1cygpO1xuICAvKipcbiAgICogUmVsb2NhdGluZy9Gb2N1c2luZyBpbnB1dCBjYXVzZXMgdGhlXG4gICAqIGNsaWNrIGV2ZW50IHRvIGJlIGNhbmNlbGxlZCwgc29cbiAgICogbWFudWFsbHkgZmlyZSBvbmUgaGVyZS5cbiAgICovXG4gIHJhZigoKSA9PiBjb21wb25lbnRFbC5jbGljaygpKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbGV0IHNjcm9sbENvbnRlbnRUaW1lb3V0O1xuICAgIGNvbnN0IHNjcm9sbENvbnRlbnQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBjbGVhbiB1cCBsaXN0ZW5lcnMgYW5kIHRpbWVvdXRzXG4gICAgICBpZiAoc2Nyb2xsQ29udGVudFRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsQ29udGVudFRpbWVvdXQpO1xuICAgICAgfVxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lcik7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgICAvLyBzY3JvbGwgdGhlIGlucHV0IGludG8gcGxhY2VcbiAgICAgIGlmIChjb250ZW50RWwpIHtcbiAgICAgICAgYXdhaXQgc2Nyb2xsQnlQb2ludChjb250ZW50RWwsIDAsIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50LCBzY3JvbGxEYXRhLnNjcm9sbER1cmF0aW9uKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoZSBzY3JvbGwgdmlldyBpcyBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBub3dcbiAgICAgIC8vIGdpdmUgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IGZvY3VzXG4gICAgICByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBmYWxzZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZKTtcbiAgICAgIC8vIGVuc3VyZSB0aGlzIGlzIHRoZSBmb2N1c2VkIGlucHV0XG4gICAgICBpbnB1dEVsLmZvY3VzKCk7XG4gICAgfTtcbiAgICBjb25zdCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICB9O1xuICAgIGlmIChjb250ZW50RWwpIHtcbiAgICAgIGNvbnN0IHNjcm9sbEVsID0gYXdhaXQgZ2V0U2Nyb2xsRWxlbWVudChjb250ZW50RWwpO1xuICAgICAgLyoqXG4gICAgICAgKiBzY3JvbGxEYXRhIHdpbGwgb25seSBjb25zaWRlciB0aGUgYW1vdW50IHdlIG5lZWRcbiAgICAgICAqIHRvIHNjcm9sbCBpbiBvcmRlciB0byBwcm9wZXJseSBicmluZyB0aGUgaW5wdXRcbiAgICAgICAqIGludG8gdmlldy4gSXQgd2lsbCBub3QgY29uc2lkZXIgdGhlIGFtb3VudFxuICAgICAgICogd2UgY2FuIHNjcm9sbCBpbiB0aGUgY29udGVudCBlbGVtZW50LlxuICAgICAgICogQXMgYSByZXN1bHQsIHNjcm9sbERhdGEgbWF5IHJlcXVlc3QgYSBncmVhdGVyXG4gICAgICAgKiBzY3JvbGwgcG9zaXRpb24gdGhhbiBpcyBjdXJyZW50bHkgYXZhaWxhYmxlXG4gICAgICAgKiBpbiB0aGUgRE9NLiBJZiB0aGlzIGlzIHRoZSBjYXNlLCB3ZSBuZWVkIHRvXG4gICAgICAgKiB3YWl0IGZvciB0aGUgd2VidmlldyB0byByZXNpemUvdGhlIGtleWJvYXJkXG4gICAgICAgKiB0byBzaG93IGluIG9yZGVyIGZvciBhZGRpdGlvbmFsIHNjcm9sbFxuICAgICAgICogYmFuZHdpZHRoIHRvIGJlY29tZSBhdmFpbGFibGUuXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IHRvdGFsU2Nyb2xsQW1vdW50ID0gc2Nyb2xsRWwuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgaWYgKHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50ID4gdG90YWxTY3JvbGxBbW91bnQgLSBzY3JvbGxFbC5zY3JvbGxUb3ApIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9uIGlPUyBkZXZpY2VzLCB0aGUgc3lzdGVtIHdpbGwgc2hvdyBhIFwiUGFzc3dvcmRzXCIgYmFyIGFib3ZlIHRoZSBrZXlib2FyZFxuICAgICAgICAgKiBhZnRlciB0aGUgaW5pdGlhbCBrZXlib2FyZCBpcyBzaG93bi4gVGhpcyBwcmV2ZW50cyB0aGUgd2VidmlldyBmcm9tIHJlc2l6aW5nXG4gICAgICAgICAqIHVudGlsIHRoZSBcIlBhc3N3b3Jkc1wiIGJhciBpcyBzaG93biwgc28gd2UgbmVlZCB0byB3YWl0IGZvciB0aGF0IHRvIGhhcHBlbiBmaXJzdC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChpbnB1dEVsLnR5cGUgPT09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgICAvLyBBZGQgNTBweCB0byBhY2NvdW50IGZvciB0aGUgXCJQYXNzd29yZHNcIiBiYXJcbiAgICAgICAgICBzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCArPSA1MDtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgZmlyZSBpbiAyIGluc3RhbmNlczpcbiAgICAgICAgICogMS4gVGhlIGFwcCBpcyB2ZXJ5IHNsb3cuXG4gICAgICAgICAqIDIuIFRoZSBhcHAgaXMgcnVubmluZyBpbiBhIGJyb3dzZXIgb24gYW4gb2xkIE9TXG4gICAgICAgICAqIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBJb25pYyBLZXlib2FyZCBFdmVudHNcbiAgICAgICAgICovXG4gICAgICAgIHNjcm9sbENvbnRlbnRUaW1lb3V0ID0gc2V0VGltZW91dChzY3JvbGxDb250ZW50LCAxMDAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBzY3JvbGxDb250ZW50KCk7XG4gIH1cbn07XG5jb25zdCBoYXNQb2ludGVyTW92ZWQgPSAodGhyZXNob2xkLCBzdGFydENvb3JkLCBlbmRDb29yZCkgPT4ge1xuICBpZiAoc3RhcnRDb29yZCAmJiBlbmRDb29yZCkge1xuICAgIGNvbnN0IGRlbHRhWCA9IHN0YXJ0Q29vcmQueCAtIGVuZENvb3JkLng7XG4gICAgY29uc3QgZGVsdGFZID0gc3RhcnRDb29yZC55IC0gZW5kQ29vcmQueTtcbiAgICBjb25zdCBkaXN0YW5jZSA9IGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWTtcbiAgICByZXR1cm4gZGlzdGFuY2UgPiB0aHJlc2hvbGQgKiB0aHJlc2hvbGQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgUEFERElOR19USU1FUl9LRVkgPSAnJGlvblBhZGRpbmdUaW1lcic7XG5jb25zdCBlbmFibGVTY3JvbGxQYWRkaW5nID0gKGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBvbkZvY3VzaW4gPSAoZXYpID0+IHtcbiAgICBzZXRTY3JvbGxQYWRkaW5nKGV2LnRhcmdldCwga2V5Ym9hcmRIZWlnaHQpO1xuICB9O1xuICBjb25zdCBvbkZvY3Vzb3V0ID0gKGV2KSA9PiB7XG4gICAgc2V0U2Nyb2xsUGFkZGluZyhldi50YXJnZXQsIDApO1xuICB9O1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbik7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uRm9jdXNvdXQpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkZvY3Vzb3V0KTtcbiAgfTtcbn07XG5jb25zdCBzZXRTY3JvbGxQYWRkaW5nID0gKGlucHV0LCBrZXlib2FyZEhlaWdodCkgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBpZiAoaW5wdXQudGFnTmFtZSAhPT0gJ0lOUFVUJykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaW5wdXQucGFyZW50RWxlbWVudCAmJiBpbnB1dC5wYXJlbnRFbGVtZW50LnRhZ05hbWUgPT09ICdJT04tSU5QVVQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICgoKF9iID0gKF9hID0gaW5wdXQucGFyZW50RWxlbWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhcmVudEVsZW1lbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50YWdOYW1lKSA9PT0gJ0lPTi1TRUFSQ0hCQVInKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGVsID0gZmluZENsb3Nlc3RJb25Db250ZW50KGlucHV0KTtcbiAgaWYgKGVsID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHRpbWVyID0gZWxbUEFERElOR19USU1FUl9LRVldO1xuICBpZiAodGltZXIpIHtcbiAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICB9XG4gIGlmIChrZXlib2FyZEhlaWdodCA+IDApIHtcbiAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1rZXlib2FyZC1vZmZzZXQnLCBgJHtrZXlib2FyZEhlaWdodH1weGApO1xuICB9XG4gIGVsc2Uge1xuICAgIGVsW1BBRERJTkdfVElNRVJfS0VZXSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0ta2V5Ym9hcmQtb2Zmc2V0JywgJzBweCcpO1xuICAgIH0sIDEyMCk7XG4gIH1cbn07XG5cbmNvbnN0IElOUFVUX0JMVVJSSU5HID0gdHJ1ZTtcbmNvbnN0IFNDUk9MTF9QQURESU5HID0gdHJ1ZTtcbmNvbnN0IHN0YXJ0SW5wdXRTaGltcyA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIGNvbnN0IGtleWJvYXJkSGVpZ2h0ID0gY29uZmlnLmdldE51bWJlcigna2V5Ym9hcmRIZWlnaHQnLCAyOTApO1xuICBjb25zdCBzY3JvbGxBc3Npc3QgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsQXNzaXN0JywgdHJ1ZSk7XG4gIGNvbnN0IGhpZGVDYXJldCA9IGNvbmZpZy5nZXRCb29sZWFuKCdoaWRlQ2FyZXRPblNjcm9sbCcsIHRydWUpO1xuICBjb25zdCBpbnB1dEJsdXJyaW5nID0gY29uZmlnLmdldEJvb2xlYW4oJ2lucHV0Qmx1cnJpbmcnLCB0cnVlKTtcbiAgY29uc3Qgc2Nyb2xsUGFkZGluZyA9IGNvbmZpZy5nZXRCb29sZWFuKCdzY3JvbGxQYWRkaW5nJywgdHJ1ZSk7XG4gIGNvbnN0IGlucHV0cyA9IEFycmF5LmZyb20oZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lvbi1pbnB1dCwgaW9uLXRleHRhcmVhJykpO1xuICBjb25zdCBoaWRlQ2FyZXRNYXAgPSBuZXcgV2Vha01hcCgpO1xuICBjb25zdCBzY3JvbGxBc3Npc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuICBjb25zdCByZWdpc3RlcklucHV0ID0gYXN5bmMgKGNvbXBvbmVudEVsKSA9PiB7XG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IGNvbXBvbmVudE9uUmVhZHkoY29tcG9uZW50RWwsIHJlc29sdmUpKTtcbiAgICBjb25zdCBpbnB1dFJvb3QgPSBjb21wb25lbnRFbC5zaGFkb3dSb290IHx8IGNvbXBvbmVudEVsO1xuICAgIGNvbnN0IGlucHV0RWwgPSBpbnB1dFJvb3QucXVlcnlTZWxlY3RvcignaW5wdXQnKSB8fCBpbnB1dFJvb3QucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTtcbiAgICBjb25zdCBzY3JvbGxFbCA9IGZpbmRDbG9zZXN0SW9uQ29udGVudChjb21wb25lbnRFbCk7XG4gICAgY29uc3QgZm9vdGVyRWwgPSAhc2Nyb2xsRWwgPyBjb21wb25lbnRFbC5jbG9zZXN0KCdpb24tZm9vdGVyJykgOiBudWxsO1xuICAgIGlmICghaW5wdXRFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoISFzY3JvbGxFbCAmJiBoaWRlQ2FyZXQgJiYgIWhpZGVDYXJldE1hcC5oYXMoY29tcG9uZW50RWwpKSB7XG4gICAgICBjb25zdCBybUZuID0gZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsKTtcbiAgICAgIGhpZGVDYXJldE1hcC5zZXQoY29tcG9uZW50RWwsIHJtRm4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBkYXRlL2RhdGV0aW1lLWxvY2FsZSBpbnB1dHMgb24gbW9iaWxlIGRldmljZXMgc2hvdyBkYXRlIHBpY2tlclxuICAgICAqIG92ZXJsYXlzIGluc3RlYWQgb2Yga2V5Ym9hcmRzLiBBcyBhIHJlc3VsdCwgc2Nyb2xsIGFzc2lzdCBpc1xuICAgICAqIG5vdCBuZWVkZWQuIFRoaXMgYWxzbyB3b3JrcyBhcm91bmQgYSBidWcgaW4gaU9TIDwxNiB3aGVyZVxuICAgICAqIHNjcm9sbCBhc3Npc3QgY2F1c2VzIHRoZSBicm93c2VyIHRvIGxvY2sgdXAuIFNlZSBGVy0xOTk3LlxuICAgICAqL1xuICAgIGNvbnN0IGlzRGF0ZUlucHV0ID0gaW5wdXRFbC50eXBlID09PSAnZGF0ZScgfHwgaW5wdXRFbC50eXBlID09PSAnZGF0ZXRpbWUtbG9jYWwnO1xuICAgIGlmICghaXNEYXRlSW5wdXQgJiZcbiAgICAgICghIXNjcm9sbEVsIHx8ICEhZm9vdGVyRWwpICYmXG4gICAgICBzY3JvbGxBc3Npc3QgJiZcbiAgICAgICFzY3JvbGxBc3Npc3RNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZVNjcm9sbEFzc2lzdChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2Nyb2xsRWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCk7XG4gICAgICBzY3JvbGxBc3Npc3RNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHVucmVnaXN0ZXJJbnB1dCA9IChjb21wb25lbnRFbCkgPT4ge1xuICAgIGlmIChoaWRlQ2FyZXQpIHtcbiAgICAgIGNvbnN0IGZuID0gaGlkZUNhcmV0TWFwLmdldChjb21wb25lbnRFbCk7XG4gICAgICBpZiAoZm4pIHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH1cbiAgICAgIGhpZGVDYXJldE1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgIH1cbiAgICBpZiAoc2Nyb2xsQXNzaXN0KSB7XG4gICAgICBjb25zdCBmbiA9IHNjcm9sbEFzc2lzdE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9XG4gICAgICBzY3JvbGxBc3Npc3RNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICB9XG4gIH07XG4gIGlmIChpbnB1dEJsdXJyaW5nICYmIElOUFVUX0JMVVJSSU5HKSB7XG4gICAgZW5hYmxlSW5wdXRCbHVycmluZygpO1xuICB9XG4gIGlmIChzY3JvbGxQYWRkaW5nICYmIFNDUk9MTF9QQURESU5HKSB7XG4gICAgZW5hYmxlU2Nyb2xsUGFkZGluZyhrZXlib2FyZEhlaWdodCk7XG4gIH1cbiAgLy8gSW5wdXQgbWlnaHQgYmUgYWxyZWFkeSBsb2FkZWQgaW4gdGhlIERPTSBiZWZvcmUgaW9uLWRldmljZS1oYWNrcyBkaWQuXG4gIC8vIEF0IHRoaXMgcG9pbnQgd2UgbmVlZCB0byBsb29rIGZvciBhbGwgb2YgdGhlIGlucHV0cyBub3QgcmVnaXN0ZXJlZCB5ZXRcbiAgLy8gYW5kIHJlZ2lzdGVyIHRoZW0uXG4gIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRzKSB7XG4gICAgcmVnaXN0ZXJJbnB1dChpbnB1dCk7XG4gIH1cbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkTG9hZCcsICgoZXYpID0+IHtcbiAgICByZWdpc3RlcklucHV0KGV2LmRldGFpbCk7XG4gIH0pKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkVW5sb2FkJywgKChldikgPT4ge1xuICAgIHVucmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICB9KSk7XG59O1xuXG5leHBvcnQgeyBzdGFydElucHV0U2hpbXMgfTtcbiJdLCJuYW1lcyI6WyJnIiwiZ2V0U2Nyb2xsRWxlbWVudCIsImMiLCJzY3JvbGxCeVBvaW50IiwiZiIsImZpbmRDbG9zZXN0SW9uQ29udGVudCIsImEiLCJhZGRFdmVudExpc3RlbmVyIiwiYiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyIiwicmFmIiwicCIsInBvaW50ZXJDb29yZCIsImNvbXBvbmVudE9uUmVhZHkiLCJjbG9uZU1hcCIsIldlYWtNYXAiLCJyZWxvY2F0ZUlucHV0IiwiY29tcG9uZW50RWwiLCJpbnB1dEVsIiwic2hvdWxkUmVsb2NhdGUiLCJpbnB1dFJlbGF0aXZlWSIsImhhcyIsImFkZENsb25lIiwicmVtb3ZlQ2xvbmUiLCJpc0ZvY3VzZWQiLCJpbnB1dCIsImdldFJvb3ROb2RlIiwiYWN0aXZlRWxlbWVudCIsInBhcmVudEVsIiwicGFyZW50Tm9kZSIsImNsb25lZEVsIiwiY2xvbmVOb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGFiSW5kZXgiLCJhcHBlbmRDaGlsZCIsInNldCIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJ0eCIsImRpciIsInN0eWxlIiwicG9pbnRlckV2ZW50cyIsInRyYW5zZm9ybSIsImNsb25lIiwiZ2V0IiwiZGVsZXRlIiwicmVtb3ZlIiwiZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwiLCJzY3JvbGxFbCIsInNjcm9sbEhpZGVDYXJldCIsInNob3VsZEhpZGVDYXJldCIsIm9uQmx1ciIsImhpZGVDYXJldCIsInNob3dDYXJldCIsIlNLSVBfU0VMRUNUT1IiLCJlbmFibGVJbnB1dEJsdXJyaW5nIiwiZm9jdXNlZCIsImRpZFNjcm9sbCIsImRvY3VtZW50Iiwib25TY3JvbGwiLCJvbkZvY3VzaW4iLCJvblRvdWNoZW5kIiwiZXYiLCJhY3RpdmUiLCJtYXRjaGVzIiwidGFwcGVkIiwidGFyZ2V0IiwiY2xvc2VzdCIsInNldFRpbWVvdXQiLCJibHVyIiwiU0NST0xMX0FTU0lTVF9TUEVFRCIsImdldFNjcm9sbERhdGEiLCJjb250ZW50RWwiLCJrZXlib2FyZEhlaWdodCIsIml0ZW1FbCIsImNhbGNTY3JvbGxEYXRhIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZGVmYXVsdFZpZXciLCJpbm5lckhlaWdodCIsImlucHV0UmVjdCIsImNvbnRlbnRSZWN0IiwicGxhdGZvcm1IZWlnaHQiLCJpbnB1dFRvcCIsInRvcCIsImlucHV0Qm90dG9tIiwiYm90dG9tIiwidmlzaWJsZUFyZWFUb3AiLCJ2aXNpYmxlQXJlYUJvdHRvbSIsIk1hdGgiLCJtaW4iLCJzYWZlQXJlYVRvcCIsInNhZmVBcmVhQm90dG9tIiwiZGlzdGFuY2VUb0JvdHRvbSIsImRpc3RhbmNlVG9Ub3AiLCJkZXNpcmVkU2Nyb2xsQW1vdW50Iiwicm91bmQiLCJzY3JvbGxBbW91bnQiLCJkaXN0YW5jZSIsImFicyIsImR1cmF0aW9uIiwic2Nyb2xsRHVyYXRpb24iLCJtYXgiLCJzY3JvbGxQYWRkaW5nIiwiaW5wdXRTYWZlWSIsImVuYWJsZVNjcm9sbEFzc2lzdCIsImZvb3RlckVsIiwiY29vcmQiLCJ0b3VjaFN0YXJ0IiwidG91Y2hFbmQiLCJlbmRDb29yZCIsImhhc1BvaW50ZXJNb3ZlZCIsImpzU2V0Rm9jdXMiLCJjYXB0dXJlIiwicGFzc2l2ZSIsInNjcm9sbERhdGEiLCJmb2N1cyIsImNsaWNrIiwid2luZG93Iiwic2Nyb2xsQ29udGVudFRpbWVvdXQiLCJzY3JvbGxDb250ZW50IiwidW5kZWZpbmVkIiwiY2xlYXJUaW1lb3V0IiwiZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyIiwidG90YWxTY3JvbGxBbW91bnQiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJzY3JvbGxUb3AiLCJ0eXBlIiwidGhyZXNob2xkIiwic3RhcnRDb29yZCIsImRlbHRhWCIsIngiLCJkZWx0YVkiLCJ5IiwiUEFERElOR19USU1FUl9LRVkiLCJlbmFibGVTY3JvbGxQYWRkaW5nIiwic2V0U2Nyb2xsUGFkZGluZyIsIm9uRm9jdXNvdXQiLCJfYSIsIl9iIiwidGFnTmFtZSIsInBhcmVudEVsZW1lbnQiLCJlbCIsInRpbWVyIiwic2V0UHJvcGVydHkiLCJJTlBVVF9CTFVSUklORyIsIlNDUk9MTF9QQURESU5HIiwic3RhcnRJbnB1dFNoaW1zIiwiY29uZmlnIiwiZ2V0TnVtYmVyIiwic2Nyb2xsQXNzaXN0IiwiZ2V0Qm9vbGVhbiIsImlucHV0Qmx1cnJpbmciLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZUNhcmV0TWFwIiwic2Nyb2xsQXNzaXN0TWFwIiwicmVnaXN0ZXJJbnB1dCIsIlByb21pc2UiLCJyZXNvbHZlIiwiaW5wdXRSb290Iiwic2hhZG93Um9vdCIsInF1ZXJ5U2VsZWN0b3IiLCJybUZuIiwiaXNEYXRlSW5wdXQiLCJ1bnJlZ2lzdGVySW5wdXQiLCJmbiIsImRldGFpbCJdLCJzb3VyY2VSb290Ijoid2VicGFjazovLy8iLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19