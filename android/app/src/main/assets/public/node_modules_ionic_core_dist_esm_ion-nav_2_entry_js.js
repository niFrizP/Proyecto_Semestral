"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_ion-nav_2_entry_js"],{

/***/ 9632:
/*!**************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/ion-nav_2.entry.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_nav": () => (/* binding */ Nav),
/* harmony export */   "ion_nav_link": () => (/* binding */ NavLink)
/* harmony export */ });
/* harmony import */ var C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 1670);
/* harmony import */ var _index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-1a99aeb7.js */ 4895);
/* harmony import */ var _ionic_global_04e268e7_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ionic-global-04e268e7.js */ 2107);
/* harmony import */ var _cubic_bezier_c313947a_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cubic-bezier-c313947a.js */ 1077);
/* harmony import */ var _helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers-4d272360.js */ 9158);
/* harmony import */ var _index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-8191d09f.js */ 7060);
/* harmony import */ var _framework_delegate_ce4f806c_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./framework-delegate-ce4f806c.js */ 2668);


/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */






const VIEW_STATE_NEW = 1;
const VIEW_STATE_ATTACHED = 2;
const VIEW_STATE_DESTROYED = 3;

class ViewController {
  constructor(component, params) {
    this.component = component;
    this.params = params;
    this.state = VIEW_STATE_NEW;
  }

  init(container) {
    var _this = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.state = VIEW_STATE_ATTACHED;

      if (!_this.element) {
        const component = _this.component;
        _this.element = yield (0,_framework_delegate_ce4f806c_js__WEBPACK_IMPORTED_MODULE_6__.a)(_this.delegate, container, component, ['ion-page', 'ion-page-invisible'], _this.params);
      }
    })();
  }
  /**
   * DOM WRITE
   */


  _destroy() {
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(this.state !== VIEW_STATE_DESTROYED, 'view state must be ATTACHED');
    const element = this.element;

    if (element) {
      if (this.delegate) {
        this.delegate.removeViewFromDom(element.parentElement, element);
      } else {
        element.remove();
      }
    }

    this.nav = undefined;
    this.state = VIEW_STATE_DESTROYED;
  }

}

const matches = (view, id, params) => {
  if (!view) {
    return false;
  }

  if (view.component !== id) {
    return false;
  }

  return (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.s)(view.params, params);
};

const convertToView = (page, params) => {
  if (!page) {
    return null;
  }

  if (page instanceof ViewController) {
    return page;
  }

  return new ViewController(page, params);
};

const convertToViews = pages => {
  return pages.map(page => {
    if (page instanceof ViewController) {
      return page;
    }

    if ('component' in page) {
      /**
       * TODO Ionic 6:
       * Consider switching to just using `undefined` here
       * as well as on the public interfaces and on
       * `NavComponentWithProps`. Previously `pages` was
       * of type `any[]` so TypeScript did not catch this.
       */
      return convertToView(page.component, page.componentProps === null ? undefined : page.componentProps);
    }

    return convertToView(page, undefined);
  }).filter(v => v !== null);
};

const navCss = ":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}";
const Nav = class {
  constructor(hostRef) {
    (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.ionNavWillLoad = (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionNavWillLoad", 7);
    this.ionNavWillChange = (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionNavWillChange", 3);
    this.ionNavDidChange = (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionNavDidChange", 3);
    this.transInstr = [];
    this.animationEnabled = true;
    this.useRouter = false;
    this.isTransitioning = false;
    this.destroyed = false;
    this.views = [];
    /**
     * If `true`, the nav should animate the transition of components.
     */

    this.animated = true;
  }

  swipeGestureChanged() {
    if (this.gesture) {
      this.gesture.enable(this.swipeGesture === true);
    }
  }

  rootChanged() {
    if (this.root !== undefined) {
      if (!this.useRouter) {
        this.setRoot(this.root, this.rootParams);
      }
    }
  }

  componentWillLoad() {
    this.useRouter = document.querySelector('ion-router') !== null && this.el.closest('[no-router]') === null;

    if (this.swipeGesture === undefined) {
      const mode = (0,_ionic_global_04e268e7_js__WEBPACK_IMPORTED_MODULE_2__.b)(this);
      this.swipeGesture = _ionic_global_04e268e7_js__WEBPACK_IMPORTED_MODULE_2__.c.getBoolean('swipeBackEnabled', mode === 'ios');
    }

    this.ionNavWillLoad.emit();
  }

  componentDidLoad() {
    var _this2 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this2.rootChanged();

      _this2.gesture = (yield __webpack_require__.e(/*! import() */ "common").then(__webpack_require__.bind(__webpack_require__, /*! ./swipe-back-fa30a130.js */ 1812))).createSwipeBackGesture(_this2.el, _this2.canStart.bind(_this2), _this2.onStart.bind(_this2), _this2.onMove.bind(_this2), _this2.onEnd.bind(_this2));

      _this2.swipeGestureChanged();
    })();
  }

  connectedCallback() {
    this.destroyed = false;
  }

  disconnectedCallback() {
    for (const view of this.views) {
      (0,_index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.d);

      view._destroy();
    } // Release swipe back gesture and transition.


    if (this.gesture) {
      this.gesture.destroy();
      this.gesture = undefined;
    }

    this.transInstr.length = 0;
    this.views.length = 0;
    this.destroyed = true;
  }
  /**
   * Push a new component onto the current navigation stack. Pass any additional
   * information along as an object. This additional information is accessible
   * through NavParams.
   *
   * @param component The component to push onto the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  push(component, componentProps, opts, done) {
    return this.insert(-1, component, componentProps, opts, done);
  }
  /**
   * Inserts a component into the navigation stack at the specified index.
   * This is useful to add a component at any point in the navigation stack.
   *
   * @param insertIndex The index to insert the component at in the stack.
   * @param component The component to insert into the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  insert(insertIndex, component, componentProps, opts, done) {
    return this.insertPages(insertIndex, [{
      component,
      componentProps
    }], opts, done);
  }
  /**
   * Inserts an array of components into the navigation stack at the specified index.
   * The last component in the array will become instantiated as a view, and animate
   * in to become the active view.
   *
   * @param insertIndex The index to insert the components at in the stack.
   * @param insertComponents The components to insert into the navigation stack.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  insertPages(insertIndex, insertComponents, opts, done) {
    return this.queueTrns({
      insertStart: insertIndex,
      insertViews: insertComponents,
      opts
    }, done);
  }
  /**
   * Pop a component off of the navigation stack. Navigates back from the current
   * component.
   *
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  pop(opts, done) {
    return this.removeIndex(-1, 1, opts, done);
  }
  /**
   * Pop to a specific index in the navigation stack.
   *
   * @param indexOrViewCtrl The index or view controller to pop to.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  popTo(indexOrViewCtrl, opts, done) {
    const ti = {
      removeStart: -1,
      removeCount: -1,
      opts
    };

    if (typeof indexOrViewCtrl === 'object' && indexOrViewCtrl.component) {
      ti.removeView = indexOrViewCtrl;
      ti.removeStart = 1;
    } else if (typeof indexOrViewCtrl === 'number') {
      ti.removeStart = indexOrViewCtrl + 1;
    }

    return this.queueTrns(ti, done);
  }
  /**
   * Navigate back to the root of the stack, no matter how far back that is.
   *
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  popToRoot(opts, done) {
    return this.removeIndex(1, -1, opts, done);
  }
  /**
   * Removes a component from the navigation stack at the specified index.
   *
   * @param startIndex The number to begin removal at.
   * @param removeCount The number of components to remove.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  removeIndex(startIndex, removeCount = 1, opts, done) {
    return this.queueTrns({
      removeStart: startIndex,
      removeCount,
      opts
    }, done);
  }
  /**
   * Set the root for the current navigation stack to a component.
   *
   * @param component The component to set as the root of the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  setRoot(component, componentProps, opts, done) {
    return this.setPages([{
      component,
      componentProps
    }], opts, done);
  }
  /**
   * Set the views of the current navigation stack and navigate to the last view.
   * By default animations are disabled, but they can be enabled by passing options
   * to the navigation controller. Navigation parameters can also be passed to the
   * individual pages in the array.
   *
   * @param views The list of views to set as the navigation stack.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */


  setPages(views, opts, done) {
    opts !== null && opts !== void 0 ? opts : opts = {}; // if animation wasn't set to true then default it to NOT animate

    if (opts.animated !== true) {
      opts.animated = false;
    }

    return this.queueTrns({
      insertStart: 0,
      insertViews: views,
      removeStart: 0,
      removeCount: -1,
      opts
    }, done);
  }
  /**
   * Called by the router to update the view.
   *
   * @param id The component tag.
   * @param params The component params.
   * @param direction A direction hint.
   * @param animation an AnimationBuilder.
   *
   * @return the status.
   * @internal
   */


  setRouteId(id, params, direction, animation) {
    const active = this.getActiveSync();

    if (matches(active, id, params)) {
      return Promise.resolve({
        changed: false,
        element: active.element
      });
    }

    let resolve;
    const promise = new Promise(r => resolve = r);
    let finish;
    const commonOpts = {
      updateURL: false,
      viewIsReady: enteringEl => {
        let mark;
        const p = new Promise(r => mark = r);
        resolve({
          changed: true,
          element: enteringEl,
          markVisible: function () {
            var _ref = (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
              mark();
              yield finish;
            });

            return function markVisible() {
              return _ref.apply(this, arguments);
            };
          }()
        });
        return p;
      }
    };

    if (direction === 'root') {
      finish = this.setRoot(id, params, commonOpts);
    } else {
      // Look for a view matching the target in the view stack.
      const viewController = this.views.find(v => matches(v, id, params));

      if (viewController) {
        finish = this.popTo(viewController, Object.assign(Object.assign({}, commonOpts), {
          direction: 'back',
          animationBuilder: animation
        }));
      } else if (direction === 'forward') {
        finish = this.push(id, params, Object.assign(Object.assign({}, commonOpts), {
          animationBuilder: animation
        }));
      } else if (direction === 'back') {
        finish = this.setRoot(id, params, Object.assign(Object.assign({}, commonOpts), {
          direction: 'back',
          animated: true,
          animationBuilder: animation
        }));
      }
    }

    return promise;
  }
  /**
   * Called by <ion-router> to retrieve the current component.
   *
   * @internal
   */


  getRouteId() {
    var _this3 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const active = _this3.getActiveSync();

      if (active) {
        return {
          id: active.element.tagName,
          params: active.params,
          element: active.element
        };
      }

      return undefined;
    })();
  }
  /**
   * Get the active view.
   */


  getActive() {
    var _this4 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this4.getActiveSync();
    })();
  }
  /**
   * Get the view at the specified index.
   *
   * @param index The index of the view.
   */


  getByIndex(index) {
    var _this5 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this5.views[index];
    })();
  }
  /**
   * Returns `true` if the current view can go back.
   *
   * @param view The view to check.
   */


  canGoBack(view) {
    var _this6 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this6.canGoBackSync(view);
    })();
  }
  /**
   * Get the previous view.
   *
   * @param view The view to get.
   */


  getPrevious(view) {
    var _this7 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this7.getPreviousSync(view);
    })();
  }

  getLength() {
    return this.views.length;
  }

  getActiveSync() {
    return this.views[this.views.length - 1];
  }

  canGoBackSync(view = this.getActiveSync()) {
    return !!(view && this.getPreviousSync(view));
  }

  getPreviousSync(view = this.getActiveSync()) {
    if (!view) {
      return undefined;
    }

    const views = this.views;
    const index = views.indexOf(view);
    return index > 0 ? views[index - 1] : undefined;
  }
  /**
   * Adds a navigation stack change to the queue and schedules it to run.
   *
   * @returns Whether the transition succeeds.
   */


  queueTrns(ti, done) {
    var _this8 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      var _a, _b;

      if (_this8.isTransitioning && ((_a = ti.opts) === null || _a === void 0 ? void 0 : _a.skipIfBusy)) {
        return false;
      }

      const promise = new Promise((resolve, reject) => {
        ti.resolve = resolve;
        ti.reject = reject;
      });
      ti.done = done;
      /**
       * If using router, check to see if navigation hooks
       * will allow us to perform this transition. This
       * is required in order for hooks to work with
       * the ion-back-button or swipe to go back.
       */

      if (ti.opts && ti.opts.updateURL !== false && _this8.useRouter) {
        const router = document.querySelector('ion-router');

        if (router) {
          const canTransition = yield router.canTransition();

          if (canTransition === false) {
            return false;
          }

          if (typeof canTransition === 'string') {
            router.push(canTransition, ti.opts.direction || 'back');
            return false;
          }
        }
      } // Normalize empty


      if (((_b = ti.insertViews) === null || _b === void 0 ? void 0 : _b.length) === 0) {
        ti.insertViews = undefined;
      } // Enqueue transition instruction


      _this8.transInstr.push(ti); // if there isn't a transition already happening
      // then this will kick off this transition


      _this8.nextTrns();

      return promise;
    })();
  }

  success(result, ti) {
    if (this.destroyed) {
      this.fireError('nav controller was destroyed', ti);
      return;
    }

    if (ti.done) {
      ti.done(result.hasCompleted, result.requiresTransition, result.enteringView, result.leavingView, result.direction);
    }

    ti.resolve(result.hasCompleted);

    if (ti.opts.updateURL !== false && this.useRouter) {
      const router = document.querySelector('ion-router');

      if (router) {
        const direction = result.direction === 'back' ? 'back' : 'forward';
        router.navChanged(direction);
      }
    }
  }

  failed(rejectReason, ti) {
    if (this.destroyed) {
      this.fireError('nav controller was destroyed', ti);
      return;
    }

    this.transInstr.length = 0;
    this.fireError(rejectReason, ti);
  }

  fireError(rejectReason, ti) {
    if (ti.done) {
      ti.done(false, false, rejectReason);
    }

    if (ti.reject && !this.destroyed) {
      ti.reject(rejectReason);
    } else {
      ti.resolve(false);
    }
  }
  /**
   * Consumes the next transition in the queue.
   *
   * @returns whether the transition is executed.
   */


  nextTrns() {
    // this is the framework's bread 'n butta function
    // only one transition is allowed at any given time
    if (this.isTransitioning) {
      return false;
    } // there is no transition happening right now, executes the next instructions.


    const ti = this.transInstr.shift();

    if (!ti) {
      return false;
    }

    this.runTransition(ti);
    return true;
  }
  /** Executes all the transition instruction from the queue. */


  runTransition(ti) {
    var _this9 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      try {
        // set that this nav is actively transitioning
        _this9.ionNavWillChange.emit();

        _this9.isTransitioning = true;

        _this9.prepareTI(ti);

        const leavingView = _this9.getActiveSync();

        const enteringView = _this9.getEnteringView(ti, leavingView);

        if (!leavingView && !enteringView) {
          throw new Error('no views in the stack to be removed');
        }

        if (enteringView && enteringView.state === VIEW_STATE_NEW) {
          yield enteringView.init(_this9.el);
        }

        _this9.postViewInit(enteringView, leavingView, ti); // Needs transition?


        const requiresTransition = (ti.enteringRequiresTransition || ti.leavingRequiresTransition) && enteringView !== leavingView;

        if (requiresTransition && ti.opts && leavingView) {
          const isBackDirection = ti.opts.direction === 'back';
          /**
           * If heading back, use the entering page's animation
           * unless otherwise specified by the developer.
           */

          if (isBackDirection) {
            ti.opts.animationBuilder = ti.opts.animationBuilder || (enteringView === null || enteringView === void 0 ? void 0 : enteringView.animationBuilder);
          }

          leavingView.animationBuilder = ti.opts.animationBuilder;
        }

        let result;

        if (requiresTransition) {
          result = yield _this9.transition(enteringView, leavingView, ti);
        } else {
          // transition is not required, so we are already done!
          // they're inserting/removing the views somewhere in the middle or
          // beginning, so visually nothing needs to animate/transition
          // resolve immediately because there's no animation that's happening
          result = {
            hasCompleted: true,
            requiresTransition: false
          };
        }

        _this9.success(result, ti);

        _this9.ionNavDidChange.emit();
      } catch (rejectReason) {
        _this9.failed(rejectReason, ti);
      }

      _this9.isTransitioning = false;

      _this9.nextTrns();
    })();
  }

  prepareTI(ti) {
    var _a, _b;

    var _c;

    const viewsLength = this.views.length;
    (_a = ti.opts) !== null && _a !== void 0 ? _a : ti.opts = {};
    (_b = (_c = ti.opts).delegate) !== null && _b !== void 0 ? _b : _c.delegate = this.delegate;

    if (ti.removeView !== undefined) {
      (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(ti.removeStart !== undefined, 'removeView needs removeStart');
      (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(ti.removeCount !== undefined, 'removeView needs removeCount');
      const index = this.views.indexOf(ti.removeView);

      if (index < 0) {
        throw new Error('removeView was not found');
      }

      ti.removeStart += index;
    }

    if (ti.removeStart !== undefined) {
      if (ti.removeStart < 0) {
        ti.removeStart = viewsLength - 1;
      }

      if (ti.removeCount < 0) {
        ti.removeCount = viewsLength - ti.removeStart;
      }

      ti.leavingRequiresTransition = ti.removeCount > 0 && ti.removeStart + ti.removeCount === viewsLength;
    }

    if (ti.insertViews) {
      // allow -1 to be passed in to auto push it on the end
      // and clean up the index if it's larger then the size of the stack
      if (ti.insertStart < 0 || ti.insertStart > viewsLength) {
        ti.insertStart = viewsLength;
      }

      ti.enteringRequiresTransition = ti.insertStart === viewsLength;
    }

    const insertViews = ti.insertViews;

    if (!insertViews) {
      return;
    }

    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(insertViews.length > 0, 'length can not be zero');
    const viewControllers = convertToViews(insertViews);

    if (viewControllers.length === 0) {
      throw new Error('invalid views to insert');
    } // Check all the inserted view are correct


    for (const view of viewControllers) {
      view.delegate = ti.opts.delegate;
      const nav = view.nav;

      if (nav && nav !== this) {
        throw new Error('inserted view was already inserted');
      }

      if (view.state === VIEW_STATE_DESTROYED) {
        throw new Error('inserted view was already destroyed');
      }
    }

    ti.insertViews = viewControllers;
  }
  /**
   * Returns the view that will be entered considering the transition instructions.
   *
   * @param ti The instructions.
   * @param leavingView The view being left or undefined if none.
   *
   * @returns The view that will be entered, undefined if none.
   */


  getEnteringView(ti, leavingView) {
    // The last inserted view will be entered when view are inserted.
    const insertViews = ti.insertViews;

    if (insertViews !== undefined) {
      return insertViews[insertViews.length - 1];
    } // When views are deleted, we will enter the last view that is not removed and not the view being left.


    const removeStart = ti.removeStart;

    if (removeStart !== undefined) {
      const views = this.views;
      const removeEnd = removeStart + ti.removeCount;

      for (let i = views.length - 1; i >= 0; i--) {
        const view = views[i];

        if ((i < removeStart || i >= removeEnd) && view !== leavingView) {
          return view;
        }
      }
    }

    return undefined;
  }
  /**
   * Adds and Removes the views from the navigation stack.
   *
   * @param enteringView The view being entered.
   * @param leavingView The view being left.
   * @param ti The instructions.
   */


  postViewInit(enteringView, leavingView, ti) {
    var _a, _b, _c;

    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(leavingView || enteringView, 'Both leavingView and enteringView are null');
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(ti.resolve, 'resolve must be valid');
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(ti.reject, 'reject must be valid'); // Compute the views to remove.

    const opts = ti.opts;
    const {
      insertViews,
      removeStart,
      removeCount
    } = ti;
    /** Records the view to destroy */

    let destroyQueue; // there are views to remove

    if (removeStart !== undefined && removeCount !== undefined) {
      (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(removeStart >= 0, 'removeStart can not be negative');
      (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(removeCount >= 0, 'removeCount can not be negative');
      destroyQueue = [];

      for (let i = removeStart; i < removeStart + removeCount; i++) {
        const view = this.views[i];

        if (view && view !== enteringView && view !== leavingView) {
          destroyQueue.push(view);
        }
      } // default the direction to "back"


      (_a = opts.direction) !== null && _a !== void 0 ? _a : opts.direction = 'back';
    }

    const finalNumViews = this.views.length + ((_b = insertViews === null || insertViews === void 0 ? void 0 : insertViews.length) !== null && _b !== void 0 ? _b : 0) - (removeCount !== null && removeCount !== void 0 ? removeCount : 0);
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(finalNumViews >= 0, 'final balance can not be negative');

    if (finalNumViews === 0) {
      console.warn(`You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.`, this, this.el);
      throw new Error('navigation stack needs at least one root page');
    } // At this point the transition can not be rejected, any throw should be an error
    // Insert the new views in the stack.


    if (insertViews) {
      // add the views to the
      let insertIndex = ti.insertStart;

      for (const view of insertViews) {
        this.insertViewAt(view, insertIndex);
        insertIndex++;
      }

      if (ti.enteringRequiresTransition) {
        // default to forward if not already set
        (_c = opts.direction) !== null && _c !== void 0 ? _c : opts.direction = 'forward';
      }
    } // if the views to be removed are in the beginning or middle
    // and there is not a view that needs to visually transition out
    // then just destroy them and don't transition anything
    // batch all of lifecycles together
    // let's make sure, callbacks are zoned


    if (destroyQueue && destroyQueue.length > 0) {
      for (const view of destroyQueue) {
        (0,_index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.b);
        (0,_index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.c);
        (0,_index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.d);
      } // once all lifecycle events has been delivered, we can safely detroy the views


      for (const view of destroyQueue) {
        this.destroyView(view);
      }
    }
  }

  transition(enteringView, leavingView, ti) {
    var _this10 = this;

    return (0,C_proyecto_Ionic_Proyecto_semestral_proyecto_semestral_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      // we should animate (duration > 0) if the pushed page is not the first one (startup)
      // or if it is a portal (modal, actionsheet, etc.)
      const opts = ti.opts;
      const progressCallback = opts.progressAnimation ? ani => _this10.sbAni = ani : undefined;
      const mode = (0,_ionic_global_04e268e7_js__WEBPACK_IMPORTED_MODULE_2__.b)(_this10);
      const enteringEl = enteringView.element;
      const leavingEl = leavingView && leavingView.element;
      const animationOpts = Object.assign(Object.assign({
        mode,
        showGoBack: _this10.canGoBackSync(enteringView),
        baseEl: _this10.el,
        progressCallback,
        animated: _this10.animated && _ionic_global_04e268e7_js__WEBPACK_IMPORTED_MODULE_2__.c.getBoolean('animated', true),
        enteringEl,
        leavingEl
      }, opts), {
        animationBuilder: opts.animationBuilder || _this10.animation || _ionic_global_04e268e7_js__WEBPACK_IMPORTED_MODULE_2__.c.get('navAnimation')
      });
      const {
        hasCompleted
      } = yield (0,_index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.t)(animationOpts);
      return _this10.transitionFinish(hasCompleted, enteringView, leavingView, opts);
    })();
  }

  transitionFinish(hasCompleted, enteringView, leavingView, opts) {
    /**
     * If the transition did not complete, the leavingView will still be the active
     * view on the stack. Otherwise unmount all the views after the enteringView.
     */
    const activeView = hasCompleted ? enteringView : leavingView;

    if (activeView) {
      this.unmountInactiveViews(activeView);
    }

    return {
      hasCompleted,
      requiresTransition: true,
      enteringView,
      leavingView,
      direction: opts.direction
    };
  }
  /**
   * Inserts a view at the specified index.
   *
   * When the view already is in the stack it will be moved to the new position.
   *
   * @param view The view to insert.
   * @param index The index where to insert the view.
   */


  insertViewAt(view, index) {
    const views = this.views;
    const existingIndex = views.indexOf(view);

    if (existingIndex > -1) {
      (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(view.nav === this, 'view is not part of the nav'); // The view already in the stack, removes it.

      views.splice(existingIndex, 1); // and add it back at the requested index.

      views.splice(index, 0, view);
    } else {
      (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(!view.nav, 'nav is used'); // this is a new view to add to the stack
      // create the new entering view

      view.nav = this;
      views.splice(index, 0, view);
    }
  }
  /**
   * Removes a view from the stack.
   *
   * @param view The view to remove.
   */


  removeView(view) {
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(view.state === VIEW_STATE_ATTACHED || view.state === VIEW_STATE_DESTROYED, 'view state should be loaded or destroyed');
    const views = this.views;
    const index = views.indexOf(view);
    (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_4__.n)(index > -1, 'view must be part of the stack');

    if (index >= 0) {
      views.splice(index, 1);
    }
  }

  destroyView(view) {
    view._destroy();

    this.removeView(view);
  }
  /**
   * Unmounts all inactive views after the specified active view.
   *
   * DOM WRITE
   *
   * @param activeView The view that is actively visible in the stack. Used to calculate which views to unmount.
   */


  unmountInactiveViews(activeView) {
    // ok, cleanup time!! Destroy all of the views that are
    // INACTIVE and come after the active view
    // only do this if the views exist, though
    if (this.destroyed) {
      return;
    }

    const views = this.views;
    const activeViewIndex = views.indexOf(activeView);

    for (let i = views.length - 1; i >= 0; i--) {
      const view = views[i];
      /**
       * When inserting multiple views via insertPages
       * the last page will be transitioned to, but the
       * others will not be. As a result, a DOM element
       * will only be created for the last page inserted.
       * As a result, it is possible to have views in the
       * stack that do not have `view.element` yet.
       */

      const element = view.element;

      if (element) {
        if (i > activeViewIndex) {
          // this view comes after the active view
          // let's unload it
          (0,_index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.l)(element, _index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.d);
          this.destroyView(view);
        } else if (i < activeViewIndex) {
          // this view comes before the active view
          // and it is not a portal then ensure it is hidden
          (0,_index_8191d09f_js__WEBPACK_IMPORTED_MODULE_5__.s)(element, true);
        }
      }
    }
  }

  canStart() {
    return !!this.swipeGesture && !this.isTransitioning && this.transInstr.length === 0 && this.animationEnabled && this.canGoBackSync();
  }

  onStart() {
    this.pop({
      direction: 'back',
      progressAnimation: true
    });
  }

  onMove(stepValue) {
    if (this.sbAni) {
      this.sbAni.progressStep(stepValue);
    }
  }

  onEnd(shouldComplete, stepValue, dur) {
    if (this.sbAni) {
      this.animationEnabled = false;
      this.sbAni.onFinish(() => {
        this.animationEnabled = true;
      }, {
        oneTimeCallback: true
      }); // Account for rounding errors in JS

      let newStepValue = shouldComplete ? -0.001 : 0.001;
      /**
       * Animation will be reversed here, so need to
       * reverse the easing curve as well
       *
       * Additionally, we need to account for the time relative
       * to the new easing curve, as `stepValue` is going to be given
       * in terms of a linear curve.
       */

      if (!shouldComplete) {
        this.sbAni.easing('cubic-bezier(1, 0, 0.68, 0.28)');
        newStepValue += (0,_cubic_bezier_c313947a_js__WEBPACK_IMPORTED_MODULE_3__.g)([0, 0], [1, 0], [0.68, 0.28], [1, 1], stepValue)[0];
      } else {
        newStepValue += (0,_cubic_bezier_c313947a_js__WEBPACK_IMPORTED_MODULE_3__.g)([0, 0], [0.32, 0.72], [0, 1], [1, 1], stepValue)[0];
      }

      this.sbAni.progressEnd(shouldComplete ? 1 : 0, newStepValue, dur);
    }
  }

  render() {
    return (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", null);
  }

  get el() {
    return (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
  }

  static get watchers() {
    return {
      "swipeGesture": ["swipeGestureChanged"],
      "root": ["rootChanged"]
    };
  }

};
Nav.style = navCss;

const navLink = (el, routerDirection, component, componentProps, routerAnimation) => {
  const nav = el.closest('ion-nav');

  if (nav) {
    if (routerDirection === 'forward') {
      if (component !== undefined) {
        return nav.push(component, componentProps, {
          skipIfBusy: true,
          animationBuilder: routerAnimation
        });
      }
    } else if (routerDirection === 'root') {
      if (component !== undefined) {
        return nav.setRoot(component, componentProps, {
          skipIfBusy: true,
          animationBuilder: routerAnimation
        });
      }
    } else if (routerDirection === 'back') {
      return nav.pop({
        skipIfBusy: true,
        animationBuilder: routerAnimation
      });
    }
  }

  return Promise.resolve(false);
};

const NavLink = class {
  constructor(hostRef) {
    (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    /**
     * The transition direction when navigating to another page.
     */

    this.routerDirection = 'forward';

    this.onClick = () => {
      return navLink(this.el, this.routerDirection, this.component, this.componentProps, this.routerAnimation);
    };
  }

  render() {
    return (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      onClick: this.onClick
    });
  }

  get el() {
    return (0,_index_1a99aeb7_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
  }

};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLW5hdl8yX2VudHJ5X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsTUFBTThCLGNBQWMsR0FBRyxDQUF2QjtBQUNBLE1BQU1DLG1CQUFtQixHQUFHLENBQTVCO0FBQ0EsTUFBTUMsb0JBQW9CLEdBQUcsQ0FBN0I7O0FBQ0EsTUFBTUMsY0FBTixDQUFxQjtFQUNuQkMsV0FBVyxDQUFDQyxTQUFELEVBQVlDLE1BQVosRUFBb0I7SUFDN0IsS0FBS0QsU0FBTCxHQUFpQkEsU0FBakI7SUFDQSxLQUFLQyxNQUFMLEdBQWNBLE1BQWQ7SUFDQSxLQUFLQyxLQUFMLEdBQWFQLGNBQWI7RUFDRDs7RUFDS1EsSUFBSSxDQUFDQyxTQUFELEVBQVk7SUFBQTs7SUFBQTtNQUNwQixLQUFJLENBQUNGLEtBQUwsR0FBYU4sbUJBQWI7O01BQ0EsSUFBSSxDQUFDLEtBQUksQ0FBQ1MsT0FBVixFQUFtQjtRQUNqQixNQUFNTCxTQUFTLEdBQUcsS0FBSSxDQUFDQSxTQUF2QjtRQUNBLEtBQUksQ0FBQ0ssT0FBTCxTQUFxQlgsa0VBQWUsQ0FBQyxLQUFJLENBQUNZLFFBQU4sRUFBZ0JGLFNBQWhCLEVBQTJCSixTQUEzQixFQUFzQyxDQUFDLFVBQUQsRUFBYSxvQkFBYixDQUF0QyxFQUEwRSxLQUFJLENBQUNDLE1BQS9FLENBQXBDO01BQ0Q7SUFMbUI7RUFNckI7RUFDRDtBQUNGO0FBQ0E7OztFQUNFTSxRQUFRLEdBQUc7SUFDVDFCLHVEQUFNLENBQUMsS0FBS3FCLEtBQUwsS0FBZUwsb0JBQWhCLEVBQXNDLDZCQUF0QyxDQUFOO0lBQ0EsTUFBTVEsT0FBTyxHQUFHLEtBQUtBLE9BQXJCOztJQUNBLElBQUlBLE9BQUosRUFBYTtNQUNYLElBQUksS0FBS0MsUUFBVCxFQUFtQjtRQUNqQixLQUFLQSxRQUFMLENB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Q0FBaEI7SUFDQTtBQUNKO0FBQ0E7O0lBQ0ksS0FBSzRKLGVBQUwsR0FBdUIsU0FBdkI7O0lBQ0EsS0FBS0csT0FBTCxHQUFlLE1BQU07TUFDbkIsT0FBT0osT0FBTyxDQUFDLEtBQUtySSxFQUFOLEVBQVUsS0FBS3NJLGVBQWYsRUFBZ0MsS0FBS3RMLFNBQXJDLEVBQWdELEtBQUtxQixjQUFyRCxFQUFxRSxLQUFLa0ssZUFBMUUsQ0FBZDtJQUNELENBRkQ7RUFHRDs7RUFDREwsTUFBTSxHQUFHO0lBQ1AsT0FBT2pOLHFEQUFDLENBQUNJLGlEQUFELEVBQU87TUFBRW9OLE9BQU8sRUFBRSxLQUFLQTtJQUFoQixDQUFQLENBQVI7RUFDRDs7RUFDSyxJQUFGekksRUFBRSxHQUFHO0lBQUUsT0FBTzdFLHFEQUFVLENBQUMsSUFBRCxDQUFqQjtFQUEwQjs7QUFkakIsQ0FBdEIiLCJzb3VyY2VzIjpbIi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lvbi1uYXZfMi5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBlIGFzIGNyZWF0ZUV2ZW50LCBoLCBpIGFzIGdldEVsZW1lbnQsIEggYXMgSG9zdCB9IGZyb20gJy4vaW5kZXgtMWE5OWFlYjcuanMnO1xuaW1wb3J0IHsgYiBhcyBnZXRJb25Nb2RlLCBjIGFzIGNvbmZpZyB9IGZyb20gJy4vaW9uaWMtZ2xvYmFsLTA0ZTI2OGU3LmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0VGltZUdpdmVuUHJvZ3Jlc3Npb24gfSBmcm9tICcuL2N1YmljLWJlemllci1jMzEzOTQ3YS5qcyc7XG5pbXBvcnQgeyBuIGFzIGFzc2VydCwgcyBhcyBzaGFsbG93RXF1YWxTdHJpbmdNYXAgfSBmcm9tICcuL2hlbHBlcnMtNGQyNzIzNjAuanMnO1xuaW1wb3J0IHsgbCBhcyBsaWZlY3ljbGUsIHQgYXMgdHJhbnNpdGlvbiwgcyBhcyBzZXRQYWdlSGlkZGVuLCBkIGFzIExJRkVDWUNMRV9XSUxMX1VOTE9BRCwgYiBhcyBMSUZFQ1lDTEVfV0lMTF9MRUFWRSwgYyBhcyBMSUZFQ1lDTEVfRElEX0xFQVZFIH0gZnJvbSAnLi9pbmRleC04MTkxZDA5Zi5qcyc7XG5pbXBvcnQgeyBhIGFzIGF0dGFjaENvbXBvbmVudCB9IGZyb20gJy4vZnJhbWV3b3JrLWRlbGVnYXRlLWNlNGY4MDZjLmpzJztcblxuY29uc3QgVklFV19TVEFURV9ORVcgPSAxO1xuY29uc3QgVklFV19TVEFURV9BVFRBQ0hFRCA9IDI7XG5jb25zdCBWSUVXX1NUQVRFX0RFU1RST1lFRCA9IDM7XG5jbGFzcyBWaWV3Q29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGNvbXBvbmVudCwgcGFyYW1zKSB7XG4gICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5zdGF0ZSA9IFZJRVdfU1RBVEVfTkVXO1xuICB9XG4gIGFzeW5jIGluaXQoY29udGFpbmVyKSB7XG4gICAgdGhpcy5zdGF0ZSA9IFZJRVdfU1RBVEVfQVRUQUNIRUQ7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50O1xuICAgICAgdGhpcy5lbGVtZW50ID0gYXdhaXQgYXR0YWNoQ29tcG9uZW50KHRoaXMuZGVsZWdhdGUsIGNvbnRhaW5lciwgY29tcG9uZW50LCBbJ2lvbi1wYWdlJywgJ2lvbi1wYWdlLWludmlzaWJsZSddLCB0aGlzLnBhcmFtcyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBET00gV1JJVEVcbiAgICovXG4gIF9kZXN0cm95KCkge1xuICAgIGFzc2VydCh0aGlzLnN0YXRlICE9PSBWSUVXX1NUQVRFX0RFU1RST1lFRCwgJ3ZpZXcgc3RhdGUgbXVzdCBiZSBBVFRBQ0hFRCcpO1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIGlmICh0aGlzLmRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUucmVtb3ZlVmlld0Zyb21Eb20oZWxlbWVudC5wYXJlbnRFbGVtZW50LCBlbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm5hdiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnN0YXRlID0gVklFV19TVEFURV9ERVNUUk9ZRUQ7XG4gIH1cbn1cbmNvbnN0IG1hdGNoZXMgPSAodmlldywgaWQsIHBhcmFtcykgPT4ge1xuICBpZiAoIXZpZXcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHZpZXcuY29tcG9uZW50ICE9PSBpZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gc2hhbGxvd0VxdWFsU3RyaW5nTWFwKHZpZXcucGFyYW1zLCBwYXJhbXMpO1xufTtcbmNvbnN0IGNvbnZlcnRUb1ZpZXcgPSAocGFnZSwgcGFyYW1zKSA9PiB7XG4gIGlmICghcGFnZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChwYWdlIGluc3RhbmNlb2YgVmlld0NvbnRyb2xsZXIpIHtcbiAgICByZXR1cm4gcGFnZTtcbiAgfVxuICByZXR1cm4gbmV3IFZpZXdDb250cm9sbGVyKHBhZ2UsIHBhcmFtcyk7XG59O1xuY29uc3QgY29udmVydFRvVmlld3MgPSAocGFnZXMpID0+IHtcbiAgcmV0dXJuIHBhZ2VzXG4gICAgLm1hcCgocGFnZSkgPT4ge1xuICAgIGlmIChwYWdlIGluc3RhbmNlb2YgVmlld0NvbnRyb2xsZXIpIHtcbiAgICAgIHJldHVybiBwYWdlO1xuICAgIH1cbiAgICBpZiAoJ2NvbXBvbmVudCcgaW4gcGFnZSkge1xuICAgICAgLyoqXG4gICAgICAgKiBUT0RPIElvbmljIDY6XG4gICAgICAgKiBDb25zaWRlciBzd2l0Y2hpbmcgdG8ganVzdCB1c2luZyBgdW5kZWZpbmVkYCBoZXJlXG4gICAgICAgKiBhcyB3ZWxsIGFzIG9uIHRoZSBwdWJsaWMgaW50ZXJmYWNlcyBhbmQgb25cbiAgICAgICAqIGBOYXZDb21wb25lbnRXaXRoUHJvcHNgLiBQcmV2aW91c2x5IGBwYWdlc2Agd2FzXG4gICAgICAgKiBvZiB0eXBlIGBhbnlbXWAgc28gVHlwZVNjcmlwdCBkaWQgbm90IGNhdGNoIHRoaXMuXG4gICAgICAgKi9cbiAgICAgIHJldHVybiBjb252ZXJ0VG9WaWV3KHBhZ2UuY29tcG9uZW50LCBwYWdlLmNvbXBvbmVudFByb3BzID09PSBudWxsID8gdW5kZWZpbmVkIDogcGFnZS5jb21wb25lbnRQcm9wcyk7XG4gICAgfVxuICAgIHJldHVybiBjb252ZXJ0VG9WaWV3KHBhZ2UsIHVuZGVmaW5lZCk7XG4gIH0pXG4gICAgLmZpbHRlcigodikgPT4gdiAhPT0gbnVsbCk7XG59O1xuXG5jb25zdCBuYXZDc3MgPSBcIjpob3N0e2xlZnQ6MDtyaWdodDowO3RvcDowO2JvdHRvbTowO3Bvc2l0aW9uOmFic29sdXRlO2NvbnRhaW46bGF5b3V0IHNpemUgc3R5bGU7b3ZlcmZsb3c6aGlkZGVuO3otaW5kZXg6MH1cIjtcblxuY29uc3QgTmF2ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmlvbk5hdldpbGxMb2FkID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25OYXZXaWxsTG9hZFwiLCA3KTtcbiAgICB0aGlzLmlvbk5hdldpbGxDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk5hdldpbGxDaGFuZ2VcIiwgMyk7XG4gICAgdGhpcy5pb25OYXZEaWRDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk5hdkRpZENoYW5nZVwiLCAzKTtcbiAgICB0aGlzLnRyYW5zSW5zdHIgPSBbXTtcbiAgICB0aGlzLmFuaW1hdGlvbkVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMudXNlUm91dGVyID0gZmFsc2U7XG4gICAgdGhpcy5pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHRoaXMudmlld3MgPSBbXTtcbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBuYXYgc2hvdWxkIGFuaW1hdGUgdGhlIHRyYW5zaXRpb24gb2YgY29tcG9uZW50cy5cbiAgICAgKi9cbiAgICB0aGlzLmFuaW1hdGVkID0gdHJ1ZTtcbiAgfVxuICBzd2lwZUdlc3R1cmVDaGFuZ2VkKCkge1xuICAgIGlmICh0aGlzLmdlc3R1cmUpIHtcbiAgICAgIHRoaXMuZ2VzdHVyZS5lbmFibGUodGhpcy5zd2lwZUdlc3R1cmUgPT09IHRydWUpO1xuICAgIH1cbiAgfVxuICByb290Q2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5yb290ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy51c2VSb3V0ZXIpIHtcbiAgICAgICAgdGhpcy5zZXRSb290KHRoaXMucm9vdCwgdGhpcy5yb290UGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdGhpcy51c2VSb3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJykgIT09IG51bGwgJiYgdGhpcy5lbC5jbG9zZXN0KCdbbm8tcm91dGVyXScpID09PSBudWxsO1xuICAgIGlmICh0aGlzLnN3aXBlR2VzdHVyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgIHRoaXMuc3dpcGVHZXN0dXJlID0gY29uZmlnLmdldEJvb2xlYW4oJ3N3aXBlQmFja0VuYWJsZWQnLCBtb2RlID09PSAnaW9zJyk7XG4gICAgfVxuICAgIHRoaXMuaW9uTmF2V2lsbExvYWQuZW1pdCgpO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgdGhpcy5yb290Q2hhbmdlZCgpO1xuICAgIHRoaXMuZ2VzdHVyZSA9IChhd2FpdCBpbXBvcnQoJy4vc3dpcGUtYmFjay1mYTMwYTEzMC5qcycpKS5jcmVhdGVTd2lwZUJhY2tHZXN0dXJlKHRoaXMuZWwsIHRoaXMuY2FuU3RhcnQuYmluZCh0aGlzKSwgdGhpcy5vblN0YXJ0LmJpbmQodGhpcyksIHRoaXMub25Nb3ZlLmJpbmQodGhpcyksIHRoaXMub25FbmQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zd2lwZUdlc3R1cmVDaGFuZ2VkKCk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBmb3IgKGNvbnN0IHZpZXcgb2YgdGhpcy52aWV3cykge1xuICAgICAgbGlmZWN5Y2xlKHZpZXcuZWxlbWVudCwgTElGRUNZQ0xFX1dJTExfVU5MT0FEKTtcbiAgICAgIHZpZXcuX2Rlc3Ryb3koKTtcbiAgICB9XG4gICAgLy8gUmVsZWFzZSBzd2lwZSBiYWNrIGdlc3R1cmUgYW5kIHRyYW5zaXRpb24uXG4gICAgaWYgKHRoaXMuZ2VzdHVyZSkge1xuICAgICAgdGhpcy5nZXN0dXJlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuZ2VzdHVyZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdGhpcy50cmFuc0luc3RyLmxlbmd0aCA9IDA7XG4gICAgdGhpcy52aWV3cy5sZW5ndGggPSAwO1xuICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogUHVzaCBhIG5ldyBjb21wb25lbnQgb250byB0aGUgY3VycmVudCBuYXZpZ2F0aW9uIHN0YWNrLiBQYXNzIGFueSBhZGRpdGlvbmFsXG4gICAqIGluZm9ybWF0aW9uIGFsb25nIGFzIGFuIG9iamVjdC4gVGhpcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGlzIGFjY2Vzc2libGVcbiAgICogdGhyb3VnaCBOYXZQYXJhbXMuXG4gICAqXG4gICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byBwdXNoIG9udG8gdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAqIEBwYXJhbSBjb21wb25lbnRQcm9wcyBBbnkgcHJvcGVydGllcyBvZiB0aGUgY29tcG9uZW50LlxuICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICovXG4gIHB1c2goY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSkge1xuICAgIHJldHVybiB0aGlzLmluc2VydCgtMSwgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydHMgYSBjb21wb25lbnQgaW50byB0aGUgbmF2aWdhdGlvbiBzdGFjayBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBhZGQgYSBjb21wb25lbnQgYXQgYW55IHBvaW50IGluIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgKlxuICAgKiBAcGFyYW0gaW5zZXJ0SW5kZXggVGhlIGluZGV4IHRvIGluc2VydCB0aGUgY29tcG9uZW50IGF0IGluIHRoZSBzdGFjay5cbiAgICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIGluc2VydCBpbnRvIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgKiBAcGFyYW0gY29tcG9uZW50UHJvcHMgQW55IHByb3BlcnRpZXMgb2YgdGhlIGNvbXBvbmVudC5cbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBpbnNlcnQoaW5zZXJ0SW5kZXgsIGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMsIG9wdHMsIGRvbmUpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRQYWdlcyhpbnNlcnRJbmRleCwgW3sgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcyB9XSwgb3B0cywgZG9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydHMgYW4gYXJyYXkgb2YgY29tcG9uZW50cyBpbnRvIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAqIFRoZSBsYXN0IGNvbXBvbmVudCBpbiB0aGUgYXJyYXkgd2lsbCBiZWNvbWUgaW5zdGFudGlhdGVkIGFzIGEgdmlldywgYW5kIGFuaW1hdGVcbiAgICogaW4gdG8gYmVjb21lIHRoZSBhY3RpdmUgdmlldy5cbiAgICpcbiAgICogQHBhcmFtIGluc2VydEluZGV4IFRoZSBpbmRleCB0byBpbnNlcnQgdGhlIGNvbXBvbmVudHMgYXQgaW4gdGhlIHN0YWNrLlxuICAgKiBAcGFyYW0gaW5zZXJ0Q29tcG9uZW50cyBUaGUgY29tcG9uZW50cyB0byBpbnNlcnQgaW50byB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBpbnNlcnRQYWdlcyhpbnNlcnRJbmRleCwgaW5zZXJ0Q29tcG9uZW50cywgb3B0cywgZG9uZSkge1xuICAgIHJldHVybiB0aGlzLnF1ZXVlVHJucyh7XG4gICAgICBpbnNlcnRTdGFydDogaW5zZXJ0SW5kZXgsXG4gICAgICBpbnNlcnRWaWV3czogaW5zZXJ0Q29tcG9uZW50cyxcbiAgICAgIG9wdHMsXG4gICAgfSwgZG9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIFBvcCBhIGNvbXBvbmVudCBvZmYgb2YgdGhlIG5hdmlnYXRpb24gc3RhY2suIE5hdmlnYXRlcyBiYWNrIGZyb20gdGhlIGN1cnJlbnRcbiAgICogY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICovXG4gIHBvcChvcHRzLCBkb25lKSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlSW5kZXgoLTEsIDEsIG9wdHMsIGRvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBQb3AgdG8gYSBzcGVjaWZpYyBpbmRleCBpbiB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICpcbiAgICogQHBhcmFtIGluZGV4T3JWaWV3Q3RybCBUaGUgaW5kZXggb3IgdmlldyBjb250cm9sbGVyIHRvIHBvcCB0by5cbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBwb3BUbyhpbmRleE9yVmlld0N0cmwsIG9wdHMsIGRvbmUpIHtcbiAgICBjb25zdCB0aSA9IHtcbiAgICAgIHJlbW92ZVN0YXJ0OiAtMSxcbiAgICAgIHJlbW92ZUNvdW50OiAtMSxcbiAgICAgIG9wdHMsXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIGluZGV4T3JWaWV3Q3RybCA9PT0gJ29iamVjdCcgJiYgaW5kZXhPclZpZXdDdHJsLmNvbXBvbmVudCkge1xuICAgICAgdGkucmVtb3ZlVmlldyA9IGluZGV4T3JWaWV3Q3RybDtcbiAgICAgIHRpLnJlbW92ZVN0YXJ0ID0gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGluZGV4T3JWaWV3Q3RybCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRpLnJlbW92ZVN0YXJ0ID0gaW5kZXhPclZpZXdDdHJsICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHRpLCBkb25lKTtcbiAgfVxuICAvKipcbiAgICogTmF2aWdhdGUgYmFjayB0byB0aGUgcm9vdCBvZiB0aGUgc3RhY2ssIG5vIG1hdHRlciBob3cgZmFyIGJhY2sgdGhhdCBpcy5cbiAgICpcbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBwb3BUb1Jvb3Qob3B0cywgZG9uZSkge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZUluZGV4KDEsIC0xLCBvcHRzLCBkb25lKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAqXG4gICAqIEBwYXJhbSBzdGFydEluZGV4IFRoZSBudW1iZXIgdG8gYmVnaW4gcmVtb3ZhbCBhdC5cbiAgICogQHBhcmFtIHJlbW92ZUNvdW50IFRoZSBudW1iZXIgb2YgY29tcG9uZW50cyB0byByZW1vdmUuXG4gICAqIEBwYXJhbSBvcHRzIFRoZSBuYXZpZ2F0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgKi9cbiAgcmVtb3ZlSW5kZXgoc3RhcnRJbmRleCwgcmVtb3ZlQ291bnQgPSAxLCBvcHRzLCBkb25lKSB7XG4gICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHtcbiAgICAgIHJlbW92ZVN0YXJ0OiBzdGFydEluZGV4LFxuICAgICAgcmVtb3ZlQ291bnQsXG4gICAgICBvcHRzLFxuICAgIH0sIGRvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHJvb3QgZm9yIHRoZSBjdXJyZW50IG5hdmlnYXRpb24gc3RhY2sgdG8gYSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byBzZXQgYXMgdGhlIHJvb3Qgb2YgdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAqIEBwYXJhbSBjb21wb25lbnRQcm9wcyBBbnkgcHJvcGVydGllcyBvZiB0aGUgY29tcG9uZW50LlxuICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICovXG4gIHNldFJvb3QoY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSkge1xuICAgIHJldHVybiB0aGlzLnNldFBhZ2VzKFt7IGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMgfV0sIG9wdHMsIGRvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZpZXdzIG9mIHRoZSBjdXJyZW50IG5hdmlnYXRpb24gc3RhY2sgYW5kIG5hdmlnYXRlIHRvIHRoZSBsYXN0IHZpZXcuXG4gICAqIEJ5IGRlZmF1bHQgYW5pbWF0aW9ucyBhcmUgZGlzYWJsZWQsIGJ1dCB0aGV5IGNhbiBiZSBlbmFibGVkIGJ5IHBhc3Npbmcgb3B0aW9uc1xuICAgKiB0byB0aGUgbmF2aWdhdGlvbiBjb250cm9sbGVyLiBOYXZpZ2F0aW9uIHBhcmFtZXRlcnMgY2FuIGFsc28gYmUgcGFzc2VkIHRvIHRoZVxuICAgKiBpbmRpdmlkdWFsIHBhZ2VzIGluIHRoZSBhcnJheS5cbiAgICpcbiAgICogQHBhcmFtIHZpZXdzIFRoZSBsaXN0IG9mIHZpZXdzIHRvIHNldCBhcyB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBzZXRQYWdlcyh2aWV3cywgb3B0cywgZG9uZSkge1xuICAgIG9wdHMgIT09IG51bGwgJiYgb3B0cyAhPT0gdm9pZCAwID8gb3B0cyA6IChvcHRzID0ge30pO1xuICAgIC8vIGlmIGFuaW1hdGlvbiB3YXNuJ3Qgc2V0IHRvIHRydWUgdGhlbiBkZWZhdWx0IGl0IHRvIE5PVCBhbmltYXRlXG4gICAgaWYgKG9wdHMuYW5pbWF0ZWQgIT09IHRydWUpIHtcbiAgICAgIG9wdHMuYW5pbWF0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHtcbiAgICAgIGluc2VydFN0YXJ0OiAwLFxuICAgICAgaW5zZXJ0Vmlld3M6IHZpZXdzLFxuICAgICAgcmVtb3ZlU3RhcnQ6IDAsXG4gICAgICByZW1vdmVDb3VudDogLTEsXG4gICAgICBvcHRzLFxuICAgIH0sIGRvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBDYWxsZWQgYnkgdGhlIHJvdXRlciB0byB1cGRhdGUgdGhlIHZpZXcuXG4gICAqXG4gICAqIEBwYXJhbSBpZCBUaGUgY29tcG9uZW50IHRhZy5cbiAgICogQHBhcmFtIHBhcmFtcyBUaGUgY29tcG9uZW50IHBhcmFtcy5cbiAgICogQHBhcmFtIGRpcmVjdGlvbiBBIGRpcmVjdGlvbiBoaW50LlxuICAgKiBAcGFyYW0gYW5pbWF0aW9uIGFuIEFuaW1hdGlvbkJ1aWxkZXIuXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHN0YXR1cy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRSb3V0ZUlkKGlkLCBwYXJhbXMsIGRpcmVjdGlvbiwgYW5pbWF0aW9uKSB7XG4gICAgY29uc3QgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgaWYgKG1hdGNoZXMoYWN0aXZlLCBpZCwgcGFyYW1zKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIGNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICBlbGVtZW50OiBhY3RpdmUuZWxlbWVudCxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHIpID0+IChyZXNvbHZlID0gcikpO1xuICAgIGxldCBmaW5pc2g7XG4gICAgY29uc3QgY29tbW9uT3B0cyA9IHtcbiAgICAgIHVwZGF0ZVVSTDogZmFsc2UsXG4gICAgICB2aWV3SXNSZWFkeTogKGVudGVyaW5nRWwpID0+IHtcbiAgICAgICAgbGV0IG1hcms7XG4gICAgICAgIGNvbnN0IHAgPSBuZXcgUHJvbWlzZSgocikgPT4gKG1hcmsgPSByKSk7XG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIGNoYW5nZWQ6IHRydWUsXG4gICAgICAgICAgZWxlbWVudDogZW50ZXJpbmdFbCxcbiAgICAgICAgICBtYXJrVmlzaWJsZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbWFyaygpO1xuICAgICAgICAgICAgYXdhaXQgZmluaXNoO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAoZGlyZWN0aW9uID09PSAncm9vdCcpIHtcbiAgICAgIGZpbmlzaCA9IHRoaXMuc2V0Um9vdChpZCwgcGFyYW1zLCBjb21tb25PcHRzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBMb29rIGZvciBhIHZpZXcgbWF0Y2hpbmcgdGhlIHRhcmdldCBpbiB0aGUgdmlldyBzdGFjay5cbiAgICAgIGNvbnN0IHZpZXdDb250cm9sbGVyID0gdGhpcy52aWV3cy5maW5kKCh2KSA9PiBtYXRjaGVzKHYsIGlkLCBwYXJhbXMpKTtcbiAgICAgIGlmICh2aWV3Q29udHJvbGxlcikge1xuICAgICAgICBmaW5pc2ggPSB0aGlzLnBvcFRvKHZpZXdDb250cm9sbGVyLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vbk9wdHMpLCB7IGRpcmVjdGlvbjogJ2JhY2snLCBhbmltYXRpb25CdWlsZGVyOiBhbmltYXRpb24gfSkpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZm9yd2FyZCcpIHtcbiAgICAgICAgZmluaXNoID0gdGhpcy5wdXNoKGlkLCBwYXJhbXMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uT3B0cyksIHsgYW5pbWF0aW9uQnVpbGRlcjogYW5pbWF0aW9uIH0pKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2JhY2snKSB7XG4gICAgICAgIGZpbmlzaCA9IHRoaXMuc2V0Um9vdChpZCwgcGFyYW1zLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vbk9wdHMpLCB7IGRpcmVjdGlvbjogJ2JhY2snLCBhbmltYXRlZDogdHJ1ZSwgYW5pbWF0aW9uQnVpbGRlcjogYW5pbWF0aW9uIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cbiAgLyoqXG4gICAqIENhbGxlZCBieSA8aW9uLXJvdXRlcj4gdG8gcmV0cmlldmUgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFzeW5jIGdldFJvdXRlSWQoKSB7XG4gICAgY29uc3QgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGFjdGl2ZS5lbGVtZW50LnRhZ05hbWUsXG4gICAgICAgIHBhcmFtczogYWN0aXZlLnBhcmFtcyxcbiAgICAgICAgZWxlbWVudDogYWN0aXZlLmVsZW1lbnQsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFjdGl2ZSB2aWV3LlxuICAgKi9cbiAgYXN5bmMgZ2V0QWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFjdGl2ZVN5bmMoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSB2aWV3IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAqXG4gICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHZpZXcuXG4gICAqL1xuICBhc3luYyBnZXRCeUluZGV4KGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMudmlld3NbaW5kZXhdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY3VycmVudCB2aWV3IGNhbiBnbyBiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0gdmlldyBUaGUgdmlldyB0byBjaGVjay5cbiAgICovXG4gIGFzeW5jIGNhbkdvQmFjayh2aWV3KSB7XG4gICAgcmV0dXJuIHRoaXMuY2FuR29CYWNrU3luYyh2aWV3KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBwcmV2aW91cyB2aWV3LlxuICAgKlxuICAgKiBAcGFyYW0gdmlldyBUaGUgdmlldyB0byBnZXQuXG4gICAqL1xuICBhc3luYyBnZXRQcmV2aW91cyh2aWV3KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UHJldmlvdXNTeW5jKHZpZXcpO1xuICB9XG4gIGdldExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3cy5sZW5ndGg7XG4gIH1cbiAgZ2V0QWN0aXZlU3luYygpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3c1t0aGlzLnZpZXdzLmxlbmd0aCAtIDFdO1xuICB9XG4gIGNhbkdvQmFja1N5bmModmlldyA9IHRoaXMuZ2V0QWN0aXZlU3luYygpKSB7XG4gICAgcmV0dXJuICEhKHZpZXcgJiYgdGhpcy5nZXRQcmV2aW91c1N5bmModmlldykpO1xuICB9XG4gIGdldFByZXZpb3VzU3luYyh2aWV3ID0gdGhpcy5nZXRBY3RpdmVTeW5jKCkpIHtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICBjb25zdCBpbmRleCA9IHZpZXdzLmluZGV4T2Yodmlldyk7XG4gICAgcmV0dXJuIGluZGV4ID4gMCA/IHZpZXdzW2luZGV4IC0gMV0gOiB1bmRlZmluZWQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSBuYXZpZ2F0aW9uIHN0YWNrIGNoYW5nZSB0byB0aGUgcXVldWUgYW5kIHNjaGVkdWxlcyBpdCB0byBydW4uXG4gICAqXG4gICAqIEByZXR1cm5zIFdoZXRoZXIgdGhlIHRyYW5zaXRpb24gc3VjY2VlZHMuXG4gICAqL1xuICBhc3luYyBxdWV1ZVRybnModGksIGRvbmUpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmICh0aGlzLmlzVHJhbnNpdGlvbmluZyAmJiAoKF9hID0gdGkub3B0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNraXBJZkJ1c3kpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIHRpLnJlamVjdCA9IHJlamVjdDtcbiAgICB9KTtcbiAgICB0aS5kb25lID0gZG9uZTtcbiAgICAvKipcbiAgICAgKiBJZiB1c2luZyByb3V0ZXIsIGNoZWNrIHRvIHNlZSBpZiBuYXZpZ2F0aW9uIGhvb2tzXG4gICAgICogd2lsbCBhbGxvdyB1cyB0byBwZXJmb3JtIHRoaXMgdHJhbnNpdGlvbi4gVGhpc1xuICAgICAqIGlzIHJlcXVpcmVkIGluIG9yZGVyIGZvciBob29rcyB0byB3b3JrIHdpdGhcbiAgICAgKiB0aGUgaW9uLWJhY2stYnV0dG9uIG9yIHN3aXBlIHRvIGdvIGJhY2suXG4gICAgICovXG4gICAgaWYgKHRpLm9wdHMgJiYgdGkub3B0cy51cGRhdGVVUkwgIT09IGZhbHNlICYmIHRoaXMudXNlUm91dGVyKSB7XG4gICAgICBjb25zdCByb3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJyk7XG4gICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgIGNvbnN0IGNhblRyYW5zaXRpb24gPSBhd2FpdCByb3V0ZXIuY2FuVHJhbnNpdGlvbigpO1xuICAgICAgICBpZiAoY2FuVHJhbnNpdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjYW5UcmFuc2l0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJvdXRlci5wdXNoKGNhblRyYW5zaXRpb24sIHRpLm9wdHMuZGlyZWN0aW9uIHx8ICdiYWNrJyk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIE5vcm1hbGl6ZSBlbXB0eVxuICAgIGlmICgoKF9iID0gdGkuaW5zZXJ0Vmlld3MpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sZW5ndGgpID09PSAwKSB7XG4gICAgICB0aS5pbnNlcnRWaWV3cyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gRW5xdWV1ZSB0cmFuc2l0aW9uIGluc3RydWN0aW9uXG4gICAgdGhpcy50cmFuc0luc3RyLnB1c2godGkpO1xuICAgIC8vIGlmIHRoZXJlIGlzbid0IGEgdHJhbnNpdGlvbiBhbHJlYWR5IGhhcHBlbmluZ1xuICAgIC8vIHRoZW4gdGhpcyB3aWxsIGtpY2sgb2ZmIHRoaXMgdHJhbnNpdGlvblxuICAgIHRoaXMubmV4dFRybnMoKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuICBzdWNjZXNzKHJlc3VsdCwgdGkpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRoaXMuZmlyZUVycm9yKCduYXYgY29udHJvbGxlciB3YXMgZGVzdHJveWVkJywgdGkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGkuZG9uZSkge1xuICAgICAgdGkuZG9uZShyZXN1bHQuaGFzQ29tcGxldGVkLCByZXN1bHQucmVxdWlyZXNUcmFuc2l0aW9uLCByZXN1bHQuZW50ZXJpbmdWaWV3LCByZXN1bHQubGVhdmluZ1ZpZXcsIHJlc3VsdC5kaXJlY3Rpb24pO1xuICAgIH1cbiAgICB0aS5yZXNvbHZlKHJlc3VsdC5oYXNDb21wbGV0ZWQpO1xuICAgIGlmICh0aS5vcHRzLnVwZGF0ZVVSTCAhPT0gZmFsc2UgJiYgdGhpcy51c2VSb3V0ZXIpIHtcbiAgICAgIGNvbnN0IHJvdXRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lvbi1yb3V0ZXInKTtcbiAgICAgIGlmIChyb3V0ZXIpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gcmVzdWx0LmRpcmVjdGlvbiA9PT0gJ2JhY2snID8gJ2JhY2snIDogJ2ZvcndhcmQnO1xuICAgICAgICByb3V0ZXIubmF2Q2hhbmdlZChkaXJlY3Rpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmYWlsZWQocmVqZWN0UmVhc29uLCB0aSkge1xuICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgdGhpcy5maXJlRXJyb3IoJ25hdiBjb250cm9sbGVyIHdhcyBkZXN0cm95ZWQnLCB0aSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudHJhbnNJbnN0ci5sZW5ndGggPSAwO1xuICAgIHRoaXMuZmlyZUVycm9yKHJlamVjdFJlYXNvbiwgdGkpO1xuICB9XG4gIGZpcmVFcnJvcihyZWplY3RSZWFzb24sIHRpKSB7XG4gICAgaWYgKHRpLmRvbmUpIHtcbiAgICAgIHRpLmRvbmUoZmFsc2UsIGZhbHNlLCByZWplY3RSZWFzb24pO1xuICAgIH1cbiAgICBpZiAodGkucmVqZWN0ICYmICF0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgdGkucmVqZWN0KHJlamVjdFJlYXNvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGkucmVzb2x2ZShmYWxzZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb25zdW1lcyB0aGUgbmV4dCB0cmFuc2l0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICpcbiAgICogQHJldHVybnMgd2hldGhlciB0aGUgdHJhbnNpdGlvbiBpcyBleGVjdXRlZC5cbiAgICovXG4gIG5leHRUcm5zKCkge1xuICAgIC8vIHRoaXMgaXMgdGhlIGZyYW1ld29yaydzIGJyZWFkICduIGJ1dHRhIGZ1bmN0aW9uXG4gICAgLy8gb25seSBvbmUgdHJhbnNpdGlvbiBpcyBhbGxvd2VkIGF0IGFueSBnaXZlbiB0aW1lXG4gICAgaWYgKHRoaXMuaXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIHRoZXJlIGlzIG5vIHRyYW5zaXRpb24gaGFwcGVuaW5nIHJpZ2h0IG5vdywgZXhlY3V0ZXMgdGhlIG5leHQgaW5zdHJ1Y3Rpb25zLlxuICAgIGNvbnN0IHRpID0gdGhpcy50cmFuc0luc3RyLnNoaWZ0KCk7XG4gICAgaWYgKCF0aSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLnJ1blRyYW5zaXRpb24odGkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKiBFeGVjdXRlcyBhbGwgdGhlIHRyYW5zaXRpb24gaW5zdHJ1Y3Rpb24gZnJvbSB0aGUgcXVldWUuICovXG4gIGFzeW5jIHJ1blRyYW5zaXRpb24odGkpIHtcbiAgICB0cnkge1xuICAgICAgLy8gc2V0IHRoYXQgdGhpcyBuYXYgaXMgYWN0aXZlbHkgdHJhbnNpdGlvbmluZ1xuICAgICAgdGhpcy5pb25OYXZXaWxsQ2hhbmdlLmVtaXQoKTtcbiAgICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMucHJlcGFyZVRJKHRpKTtcbiAgICAgIGNvbnN0IGxlYXZpbmdWaWV3ID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgICBjb25zdCBlbnRlcmluZ1ZpZXcgPSB0aGlzLmdldEVudGVyaW5nVmlldyh0aSwgbGVhdmluZ1ZpZXcpO1xuICAgICAgaWYgKCFsZWF2aW5nVmlldyAmJiAhZW50ZXJpbmdWaWV3KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gdmlld3MgaW4gdGhlIHN0YWNrIHRvIGJlIHJlbW92ZWQnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbnRlcmluZ1ZpZXcgJiYgZW50ZXJpbmdWaWV3LnN0YXRlID09PSBWSUVXX1NUQVRFX05FVykge1xuICAgICAgICBhd2FpdCBlbnRlcmluZ1ZpZXcuaW5pdCh0aGlzLmVsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucG9zdFZpZXdJbml0KGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKTtcbiAgICAgIC8vIE5lZWRzIHRyYW5zaXRpb24/XG4gICAgICBjb25zdCByZXF1aXJlc1RyYW5zaXRpb24gPSAodGkuZW50ZXJpbmdSZXF1aXJlc1RyYW5zaXRpb24gfHwgdGkubGVhdmluZ1JlcXVpcmVzVHJhbnNpdGlvbikgJiYgZW50ZXJpbmdWaWV3ICE9PSBsZWF2aW5nVmlldztcbiAgICAgIGlmIChyZXF1aXJlc1RyYW5zaXRpb24gJiYgdGkub3B0cyAmJiBsZWF2aW5nVmlldykge1xuICAgICAgICBjb25zdCBpc0JhY2tEaXJlY3Rpb24gPSB0aS5vcHRzLmRpcmVjdGlvbiA9PT0gJ2JhY2snO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgaGVhZGluZyBiYWNrLCB1c2UgdGhlIGVudGVyaW5nIHBhZ2UncyBhbmltYXRpb25cbiAgICAgICAgICogdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQgYnkgdGhlIGRldmVsb3Blci5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChpc0JhY2tEaXJlY3Rpb24pIHtcbiAgICAgICAgICB0aS5vcHRzLmFuaW1hdGlvbkJ1aWxkZXIgPSB0aS5vcHRzLmFuaW1hdGlvbkJ1aWxkZXIgfHwgKGVudGVyaW5nVmlldyA9PT0gbnVsbCB8fCBlbnRlcmluZ1ZpZXcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVudGVyaW5nVmlldy5hbmltYXRpb25CdWlsZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBsZWF2aW5nVmlldy5hbmltYXRpb25CdWlsZGVyID0gdGkub3B0cy5hbmltYXRpb25CdWlsZGVyO1xuICAgICAgfVxuICAgICAgbGV0IHJlc3VsdDtcbiAgICAgIGlmIChyZXF1aXJlc1RyYW5zaXRpb24pIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy50cmFuc2l0aW9uKGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyB0cmFuc2l0aW9uIGlzIG5vdCByZXF1aXJlZCwgc28gd2UgYXJlIGFscmVhZHkgZG9uZSFcbiAgICAgICAgLy8gdGhleSdyZSBpbnNlcnRpbmcvcmVtb3ZpbmcgdGhlIHZpZXdzIHNvbWV3aGVyZSBpbiB0aGUgbWlkZGxlIG9yXG4gICAgICAgIC8vIGJlZ2lubmluZywgc28gdmlzdWFsbHkgbm90aGluZyBuZWVkcyB0byBhbmltYXRlL3RyYW5zaXRpb25cbiAgICAgICAgLy8gcmVzb2x2ZSBpbW1lZGlhdGVseSBiZWNhdXNlIHRoZXJlJ3Mgbm8gYW5pbWF0aW9uIHRoYXQncyBoYXBwZW5pbmdcbiAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgIGhhc0NvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICByZXF1aXJlc1RyYW5zaXRpb246IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgdGhpcy5zdWNjZXNzKHJlc3VsdCwgdGkpO1xuICAgICAgdGhpcy5pb25OYXZEaWRDaGFuZ2UuZW1pdCgpO1xuICAgIH1cbiAgICBjYXRjaCAocmVqZWN0UmVhc29uKSB7XG4gICAgICB0aGlzLmZhaWxlZChyZWplY3RSZWFzb24sIHRpKTtcbiAgICB9XG4gICAgdGhpcy5pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICB0aGlzLm5leHRUcm5zKCk7XG4gIH1cbiAgcHJlcGFyZVRJKHRpKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICB2YXIgX2M7XG4gICAgY29uc3Qgdmlld3NMZW5ndGggPSB0aGlzLnZpZXdzLmxlbmd0aDtcbiAgICAoX2EgPSB0aS5vcHRzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAodGkub3B0cyA9IHt9KTtcbiAgICAoX2IgPSAoX2MgPSB0aS5vcHRzKS5kZWxlZ2F0ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogKF9jLmRlbGVnYXRlID0gdGhpcy5kZWxlZ2F0ZSk7XG4gICAgaWYgKHRpLnJlbW92ZVZpZXcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgYXNzZXJ0KHRpLnJlbW92ZVN0YXJ0ICE9PSB1bmRlZmluZWQsICdyZW1vdmVWaWV3IG5lZWRzIHJlbW92ZVN0YXJ0Jyk7XG4gICAgICBhc3NlcnQodGkucmVtb3ZlQ291bnQgIT09IHVuZGVmaW5lZCwgJ3JlbW92ZVZpZXcgbmVlZHMgcmVtb3ZlQ291bnQnKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy52aWV3cy5pbmRleE9mKHRpLnJlbW92ZVZpZXcpO1xuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbW92ZVZpZXcgd2FzIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgdGkucmVtb3ZlU3RhcnQgKz0gaW5kZXg7XG4gICAgfVxuICAgIGlmICh0aS5yZW1vdmVTdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodGkucmVtb3ZlU3RhcnQgPCAwKSB7XG4gICAgICAgIHRpLnJlbW92ZVN0YXJ0ID0gdmlld3NMZW5ndGggLSAxO1xuICAgICAgfVxuICAgICAgaWYgKHRpLnJlbW92ZUNvdW50IDwgMCkge1xuICAgICAgICB0aS5yZW1vdmVDb3VudCA9IHZpZXdzTGVuZ3RoIC0gdGkucmVtb3ZlU3RhcnQ7XG4gICAgICB9XG4gICAgICB0aS5sZWF2aW5nUmVxdWlyZXNUcmFuc2l0aW9uID0gdGkucmVtb3ZlQ291bnQgPiAwICYmIHRpLnJlbW92ZVN0YXJ0ICsgdGkucmVtb3ZlQ291bnQgPT09IHZpZXdzTGVuZ3RoO1xuICAgIH1cbiAgICBpZiAodGkuaW5zZXJ0Vmlld3MpIHtcbiAgICAgIC8vIGFsbG93IC0xIHRvIGJlIHBhc3NlZCBpbiB0byBhdXRvIHB1c2ggaXQgb24gdGhlIGVuZFxuICAgICAgLy8gYW5kIGNsZWFuIHVwIHRoZSBpbmRleCBpZiBpdCdzIGxhcmdlciB0aGVuIHRoZSBzaXplIG9mIHRoZSBzdGFja1xuICAgICAgaWYgKHRpLmluc2VydFN0YXJ0IDwgMCB8fCB0aS5pbnNlcnRTdGFydCA+IHZpZXdzTGVuZ3RoKSB7XG4gICAgICAgIHRpLmluc2VydFN0YXJ0ID0gdmlld3NMZW5ndGg7XG4gICAgICB9XG4gICAgICB0aS5lbnRlcmluZ1JlcXVpcmVzVHJhbnNpdGlvbiA9IHRpLmluc2VydFN0YXJ0ID09PSB2aWV3c0xlbmd0aDtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0Vmlld3MgPSB0aS5pbnNlcnRWaWV3cztcbiAgICBpZiAoIWluc2VydFZpZXdzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2VydChpbnNlcnRWaWV3cy5sZW5ndGggPiAwLCAnbGVuZ3RoIGNhbiBub3QgYmUgemVybycpO1xuICAgIGNvbnN0IHZpZXdDb250cm9sbGVycyA9IGNvbnZlcnRUb1ZpZXdzKGluc2VydFZpZXdzKTtcbiAgICBpZiAodmlld0NvbnRyb2xsZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHZpZXdzIHRvIGluc2VydCcpO1xuICAgIH1cbiAgICAvLyBDaGVjayBhbGwgdGhlIGluc2VydGVkIHZpZXcgYXJlIGNvcnJlY3RcbiAgICBmb3IgKGNvbnN0IHZpZXcgb2Ygdmlld0NvbnRyb2xsZXJzKSB7XG4gICAgICB2aWV3LmRlbGVnYXRlID0gdGkub3B0cy5kZWxlZ2F0ZTtcbiAgICAgIGNvbnN0IG5hdiA9IHZpZXcubmF2O1xuICAgICAgaWYgKG5hdiAmJiBuYXYgIT09IHRoaXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnNlcnRlZCB2aWV3IHdhcyBhbHJlYWR5IGluc2VydGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAodmlldy5zdGF0ZSA9PT0gVklFV19TVEFURV9ERVNUUk9ZRUQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnNlcnRlZCB2aWV3IHdhcyBhbHJlYWR5IGRlc3Ryb3llZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aS5pbnNlcnRWaWV3cyA9IHZpZXdDb250cm9sbGVycztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmlldyB0aGF0IHdpbGwgYmUgZW50ZXJlZCBjb25zaWRlcmluZyB0aGUgdHJhbnNpdGlvbiBpbnN0cnVjdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB0aSBUaGUgaW5zdHJ1Y3Rpb25zLlxuICAgKiBAcGFyYW0gbGVhdmluZ1ZpZXcgVGhlIHZpZXcgYmVpbmcgbGVmdCBvciB1bmRlZmluZWQgaWYgbm9uZS5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIHZpZXcgdGhhdCB3aWxsIGJlIGVudGVyZWQsIHVuZGVmaW5lZCBpZiBub25lLlxuICAgKi9cbiAgZ2V0RW50ZXJpbmdWaWV3KHRpLCBsZWF2aW5nVmlldykge1xuICAgIC8vIFRoZSBsYXN0IGluc2VydGVkIHZpZXcgd2lsbCBiZSBlbnRlcmVkIHdoZW4gdmlldyBhcmUgaW5zZXJ0ZWQuXG4gICAgY29uc3QgaW5zZXJ0Vmlld3MgPSB0aS5pbnNlcnRWaWV3cztcbiAgICBpZiAoaW5zZXJ0Vmlld3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGluc2VydFZpZXdzW2luc2VydFZpZXdzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICAvLyBXaGVuIHZpZXdzIGFyZSBkZWxldGVkLCB3ZSB3aWxsIGVudGVyIHRoZSBsYXN0IHZpZXcgdGhhdCBpcyBub3QgcmVtb3ZlZCBhbmQgbm90IHRoZSB2aWV3IGJlaW5nIGxlZnQuXG4gICAgY29uc3QgcmVtb3ZlU3RhcnQgPSB0aS5yZW1vdmVTdGFydDtcbiAgICBpZiAocmVtb3ZlU3RhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgY29uc3QgcmVtb3ZlRW5kID0gcmVtb3ZlU3RhcnQgKyB0aS5yZW1vdmVDb3VudDtcbiAgICAgIGZvciAobGV0IGkgPSB2aWV3cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmlld3NbaV07XG4gICAgICAgIGlmICgoaSA8IHJlbW92ZVN0YXJ0IHx8IGkgPj0gcmVtb3ZlRW5kKSAmJiB2aWV3ICE9PSBsZWF2aW5nVmlldykge1xuICAgICAgICAgIHJldHVybiB2aWV3O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYW5kIFJlbW92ZXMgdGhlIHZpZXdzIGZyb20gdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAqXG4gICAqIEBwYXJhbSBlbnRlcmluZ1ZpZXcgVGhlIHZpZXcgYmVpbmcgZW50ZXJlZC5cbiAgICogQHBhcmFtIGxlYXZpbmdWaWV3IFRoZSB2aWV3IGJlaW5nIGxlZnQuXG4gICAqIEBwYXJhbSB0aSBUaGUgaW5zdHJ1Y3Rpb25zLlxuICAgKi9cbiAgcG9zdFZpZXdJbml0KGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgYXNzZXJ0KGxlYXZpbmdWaWV3IHx8IGVudGVyaW5nVmlldywgJ0JvdGggbGVhdmluZ1ZpZXcgYW5kIGVudGVyaW5nVmlldyBhcmUgbnVsbCcpO1xuICAgIGFzc2VydCh0aS5yZXNvbHZlLCAncmVzb2x2ZSBtdXN0IGJlIHZhbGlkJyk7XG4gICAgYXNzZXJ0KHRpLnJlamVjdCwgJ3JlamVjdCBtdXN0IGJlIHZhbGlkJyk7XG4gICAgLy8gQ29tcHV0ZSB0aGUgdmlld3MgdG8gcmVtb3ZlLlxuICAgIGNvbnN0IG9wdHMgPSB0aS5vcHRzO1xuICAgIGNvbnN0IHsgaW5zZXJ0Vmlld3MsIHJlbW92ZVN0YXJ0LCByZW1vdmVDb3VudCB9ID0gdGk7XG4gICAgLyoqIFJlY29yZHMgdGhlIHZpZXcgdG8gZGVzdHJveSAqL1xuICAgIGxldCBkZXN0cm95UXVldWU7XG4gICAgLy8gdGhlcmUgYXJlIHZpZXdzIHRvIHJlbW92ZVxuICAgIGlmIChyZW1vdmVTdGFydCAhPT0gdW5kZWZpbmVkICYmIHJlbW92ZUNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGFzc2VydChyZW1vdmVTdGFydCA+PSAwLCAncmVtb3ZlU3RhcnQgY2FuIG5vdCBiZSBuZWdhdGl2ZScpO1xuICAgICAgYXNzZXJ0KHJlbW92ZUNvdW50ID49IDAsICdyZW1vdmVDb3VudCBjYW4gbm90IGJlIG5lZ2F0aXZlJyk7XG4gICAgICBkZXN0cm95UXVldWUgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSByZW1vdmVTdGFydDsgaSA8IHJlbW92ZVN0YXJ0ICsgcmVtb3ZlQ291bnQ7IGkrKykge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy52aWV3c1tpXTtcbiAgICAgICAgaWYgKHZpZXcgJiYgdmlldyAhPT0gZW50ZXJpbmdWaWV3ICYmIHZpZXcgIT09IGxlYXZpbmdWaWV3KSB7XG4gICAgICAgICAgZGVzdHJveVF1ZXVlLnB1c2godmlldyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGRlZmF1bHQgdGhlIGRpcmVjdGlvbiB0byBcImJhY2tcIlxuICAgICAgKF9hID0gb3B0cy5kaXJlY3Rpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChvcHRzLmRpcmVjdGlvbiA9ICdiYWNrJyk7XG4gICAgfVxuICAgIGNvbnN0IGZpbmFsTnVtVmlld3MgPSB0aGlzLnZpZXdzLmxlbmd0aCArICgoX2IgPSBpbnNlcnRWaWV3cyA9PT0gbnVsbCB8fCBpbnNlcnRWaWV3cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaW5zZXJ0Vmlld3MubGVuZ3RoKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwKSAtIChyZW1vdmVDb3VudCAhPT0gbnVsbCAmJiByZW1vdmVDb3VudCAhPT0gdm9pZCAwID8gcmVtb3ZlQ291bnQgOiAwKTtcbiAgICBhc3NlcnQoZmluYWxOdW1WaWV3cyA+PSAwLCAnZmluYWwgYmFsYW5jZSBjYW4gbm90IGJlIG5lZ2F0aXZlJyk7XG4gICAgaWYgKGZpbmFsTnVtVmlld3MgPT09IDApIHtcbiAgICAgIGNvbnNvbGUud2FybihgWW91IGNhbid0IHJlbW92ZSBhbGwgdGhlIHBhZ2VzIGluIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLiBuYXYucG9wKCkgaXMgcHJvYmFibHkgY2FsbGVkIHRvbyBtYW55IHRpbWVzLmAsIHRoaXMsIHRoaXMuZWwpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCduYXZpZ2F0aW9uIHN0YWNrIG5lZWRzIGF0IGxlYXN0IG9uZSByb290IHBhZ2UnKTtcbiAgICB9XG4gICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgdHJhbnNpdGlvbiBjYW4gbm90IGJlIHJlamVjdGVkLCBhbnkgdGhyb3cgc2hvdWxkIGJlIGFuIGVycm9yXG4gICAgLy8gSW5zZXJ0IHRoZSBuZXcgdmlld3MgaW4gdGhlIHN0YWNrLlxuICAgIGlmIChpbnNlcnRWaWV3cykge1xuICAgICAgLy8gYWRkIHRoZSB2aWV3cyB0byB0aGVcbiAgICAgIGxldCBpbnNlcnRJbmRleCA9IHRpLmluc2VydFN0YXJ0O1xuICAgICAgZm9yIChjb25zdCB2aWV3IG9mIGluc2VydFZpZXdzKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0Vmlld0F0KHZpZXcsIGluc2VydEluZGV4KTtcbiAgICAgICAgaW5zZXJ0SW5kZXgrKztcbiAgICAgIH1cbiAgICAgIGlmICh0aS5lbnRlcmluZ1JlcXVpcmVzVHJhbnNpdGlvbikge1xuICAgICAgICAvLyBkZWZhdWx0IHRvIGZvcndhcmQgaWYgbm90IGFscmVhZHkgc2V0XG4gICAgICAgIChfYyA9IG9wdHMuZGlyZWN0aW9uKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAob3B0cy5kaXJlY3Rpb24gPSAnZm9yd2FyZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBpZiB0aGUgdmlld3MgdG8gYmUgcmVtb3ZlZCBhcmUgaW4gdGhlIGJlZ2lubmluZyBvciBtaWRkbGVcbiAgICAvLyBhbmQgdGhlcmUgaXMgbm90IGEgdmlldyB0aGF0IG5lZWRzIHRvIHZpc3VhbGx5IHRyYW5zaXRpb24gb3V0XG4gICAgLy8gdGhlbiBqdXN0IGRlc3Ryb3kgdGhlbSBhbmQgZG9uJ3QgdHJhbnNpdGlvbiBhbnl0aGluZ1xuICAgIC8vIGJhdGNoIGFsbCBvZiBsaWZlY3ljbGVzIHRvZ2V0aGVyXG4gICAgLy8gbGV0J3MgbWFrZSBzdXJlLCBjYWxsYmFja3MgYXJlIHpvbmVkXG4gICAgaWYgKGRlc3Ryb3lRdWV1ZSAmJiBkZXN0cm95UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCB2aWV3IG9mIGRlc3Ryb3lRdWV1ZSkge1xuICAgICAgICBsaWZlY3ljbGUodmlldy5lbGVtZW50LCBMSUZFQ1lDTEVfV0lMTF9MRUFWRSk7XG4gICAgICAgIGxpZmVjeWNsZSh2aWV3LmVsZW1lbnQsIExJRkVDWUNMRV9ESURfTEVBVkUpO1xuICAgICAgICBsaWZlY3ljbGUodmlldy5lbGVtZW50LCBMSUZFQ1lDTEVfV0lMTF9VTkxPQUQpO1xuICAgICAgfVxuICAgICAgLy8gb25jZSBhbGwgbGlmZWN5Y2xlIGV2ZW50cyBoYXMgYmVlbiBkZWxpdmVyZWQsIHdlIGNhbiBzYWZlbHkgZGV0cm95IHRoZSB2aWV3c1xuICAgICAgZm9yIChjb25zdCB2aWV3IG9mIGRlc3Ryb3lRdWV1ZSkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lWaWV3KHZpZXcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBhc3luYyB0cmFuc2l0aW9uKGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKSB7XG4gICAgLy8gd2Ugc2hvdWxkIGFuaW1hdGUgKGR1cmF0aW9uID4gMCkgaWYgdGhlIHB1c2hlZCBwYWdlIGlzIG5vdCB0aGUgZmlyc3Qgb25lIChzdGFydHVwKVxuICAgIC8vIG9yIGlmIGl0IGlzIGEgcG9ydGFsIChtb2RhbCwgYWN0aW9uc2hlZXQsIGV0Yy4pXG4gICAgY29uc3Qgb3B0cyA9IHRpLm9wdHM7XG4gICAgY29uc3QgcHJvZ3Jlc3NDYWxsYmFjayA9IG9wdHMucHJvZ3Jlc3NBbmltYXRpb24gPyAoYW5pKSA9PiAodGhpcy5zYkFuaSA9IGFuaSkgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgY29uc3QgZW50ZXJpbmdFbCA9IGVudGVyaW5nVmlldy5lbGVtZW50O1xuICAgIGNvbnN0IGxlYXZpbmdFbCA9IGxlYXZpbmdWaWV3ICYmIGxlYXZpbmdWaWV3LmVsZW1lbnQ7XG4gICAgY29uc3QgYW5pbWF0aW9uT3B0cyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1vZGUsIHNob3dHb0JhY2s6IHRoaXMuY2FuR29CYWNrU3luYyhlbnRlcmluZ1ZpZXcpLCBiYXNlRWw6IHRoaXMuZWwsIHByb2dyZXNzQ2FsbGJhY2ssIGFuaW1hdGVkOiB0aGlzLmFuaW1hdGVkICYmIGNvbmZpZy5nZXRCb29sZWFuKCdhbmltYXRlZCcsIHRydWUpLCBlbnRlcmluZ0VsLFxuICAgICAgbGVhdmluZ0VsIH0sIG9wdHMpLCB7IGFuaW1hdGlvbkJ1aWxkZXI6IG9wdHMuYW5pbWF0aW9uQnVpbGRlciB8fCB0aGlzLmFuaW1hdGlvbiB8fCBjb25maWcuZ2V0KCduYXZBbmltYXRpb24nKSB9KTtcbiAgICBjb25zdCB7IGhhc0NvbXBsZXRlZCB9ID0gYXdhaXQgdHJhbnNpdGlvbihhbmltYXRpb25PcHRzKTtcbiAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uRmluaXNoKGhhc0NvbXBsZXRlZCwgZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgb3B0cyk7XG4gIH1cbiAgdHJhbnNpdGlvbkZpbmlzaChoYXNDb21wbGV0ZWQsIGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIG9wdHMpIHtcbiAgICAvKipcbiAgICAgKiBJZiB0aGUgdHJhbnNpdGlvbiBkaWQgbm90IGNvbXBsZXRlLCB0aGUgbGVhdmluZ1ZpZXcgd2lsbCBzdGlsbCBiZSB0aGUgYWN0aXZlXG4gICAgICogdmlldyBvbiB0aGUgc3RhY2suIE90aGVyd2lzZSB1bm1vdW50IGFsbCB0aGUgdmlld3MgYWZ0ZXIgdGhlIGVudGVyaW5nVmlldy5cbiAgICAgKi9cbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gaGFzQ29tcGxldGVkID8gZW50ZXJpbmdWaWV3IDogbGVhdmluZ1ZpZXc7XG4gICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgIHRoaXMudW5tb3VudEluYWN0aXZlVmlld3MoYWN0aXZlVmlldyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBoYXNDb21wbGV0ZWQsXG4gICAgICByZXF1aXJlc1RyYW5zaXRpb246IHRydWUsXG4gICAgICBlbnRlcmluZ1ZpZXcsXG4gICAgICBsZWF2aW5nVmlldyxcbiAgICAgIGRpcmVjdGlvbjogb3B0cy5kaXJlY3Rpb24sXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogSW5zZXJ0cyBhIHZpZXcgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAgICpcbiAgICogV2hlbiB0aGUgdmlldyBhbHJlYWR5IGlzIGluIHRoZSBzdGFjayBpdCB3aWxsIGJlIG1vdmVkIHRvIHRoZSBuZXcgcG9zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB2aWV3IFRoZSB2aWV3IHRvIGluc2VydC5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCB3aGVyZSB0byBpbnNlcnQgdGhlIHZpZXcuXG4gICAqL1xuICBpbnNlcnRWaWV3QXQodmlldywgaW5kZXgpIHtcbiAgICBjb25zdCB2aWV3cyA9IHRoaXMudmlld3M7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IHZpZXdzLmluZGV4T2Yodmlldyk7XG4gICAgaWYgKGV4aXN0aW5nSW5kZXggPiAtMSkge1xuICAgICAgYXNzZXJ0KHZpZXcubmF2ID09PSB0aGlzLCAndmlldyBpcyBub3QgcGFydCBvZiB0aGUgbmF2Jyk7XG4gICAgICAvLyBUaGUgdmlldyBhbHJlYWR5IGluIHRoZSBzdGFjaywgcmVtb3ZlcyBpdC5cbiAgICAgIHZpZXdzLnNwbGljZShleGlzdGluZ0luZGV4LCAxKTtcbiAgICAgIC8vIGFuZCBhZGQgaXQgYmFjayBhdCB0aGUgcmVxdWVzdGVkIGluZGV4LlxuICAgICAgdmlld3Muc3BsaWNlKGluZGV4LCAwLCB2aWV3KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBhc3NlcnQoIXZpZXcubmF2LCAnbmF2IGlzIHVzZWQnKTtcbiAgICAgIC8vIHRoaXMgaXMgYSBuZXcgdmlldyB0byBhZGQgdG8gdGhlIHN0YWNrXG4gICAgICAvLyBjcmVhdGUgdGhlIG5ldyBlbnRlcmluZyB2aWV3XG4gICAgICB2aWV3Lm5hdiA9IHRoaXM7XG4gICAgICB2aWV3cy5zcGxpY2UoaW5kZXgsIDAsIHZpZXcpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhIHZpZXcgZnJvbSB0aGUgc3RhY2suXG4gICAqXG4gICAqIEBwYXJhbSB2aWV3IFRoZSB2aWV3IHRvIHJlbW92ZS5cbiAgICovXG4gIHJlbW92ZVZpZXcodmlldykge1xuICAgIGFzc2VydCh2aWV3LnN0YXRlID09PSBWSUVXX1NUQVRFX0FUVEFDSEVEIHx8IHZpZXcuc3RhdGUgPT09IFZJRVdfU1RBVEVfREVTVFJPWUVELCAndmlldyBzdGF0ZSBzaG91bGQgYmUgbG9hZGVkIG9yIGRlc3Ryb3llZCcpO1xuICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICBjb25zdCBpbmRleCA9IHZpZXdzLmluZGV4T2Yodmlldyk7XG4gICAgYXNzZXJ0KGluZGV4ID4gLTEsICd2aWV3IG11c3QgYmUgcGFydCBvZiB0aGUgc3RhY2snKTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgdmlld3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cbiAgZGVzdHJveVZpZXcodmlldykge1xuICAgIHZpZXcuX2Rlc3Ryb3koKTtcbiAgICB0aGlzLnJlbW92ZVZpZXcodmlldyk7XG4gIH1cbiAgLyoqXG4gICAqIFVubW91bnRzIGFsbCBpbmFjdGl2ZSB2aWV3cyBhZnRlciB0aGUgc3BlY2lmaWVkIGFjdGl2ZSB2aWV3LlxuICAgKlxuICAgKiBET00gV1JJVEVcbiAgICpcbiAgICogQHBhcmFtIGFjdGl2ZVZpZXcgVGhlIHZpZXcgdGhhdCBpcyBhY3RpdmVseSB2aXNpYmxlIGluIHRoZSBzdGFjay4gVXNlZCB0byBjYWxjdWxhdGUgd2hpY2ggdmlld3MgdG8gdW5tb3VudC5cbiAgICovXG4gIHVubW91bnRJbmFjdGl2ZVZpZXdzKGFjdGl2ZVZpZXcpIHtcbiAgICAvLyBvaywgY2xlYW51cCB0aW1lISEgRGVzdHJveSBhbGwgb2YgdGhlIHZpZXdzIHRoYXQgYXJlXG4gICAgLy8gSU5BQ1RJVkUgYW5kIGNvbWUgYWZ0ZXIgdGhlIGFjdGl2ZSB2aWV3XG4gICAgLy8gb25seSBkbyB0aGlzIGlmIHRoZSB2aWV3cyBleGlzdCwgdGhvdWdoXG4gICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICBjb25zdCBhY3RpdmVWaWV3SW5kZXggPSB2aWV3cy5pbmRleE9mKGFjdGl2ZVZpZXcpO1xuICAgIGZvciAobGV0IGkgPSB2aWV3cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgdmlldyA9IHZpZXdzW2ldO1xuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIGluc2VydGluZyBtdWx0aXBsZSB2aWV3cyB2aWEgaW5zZXJ0UGFnZXNcbiAgICAgICAqIHRoZSBsYXN0IHBhZ2Ugd2lsbCBiZSB0cmFuc2l0aW9uZWQgdG8sIGJ1dCB0aGVcbiAgICAgICAqIG90aGVycyB3aWxsIG5vdCBiZS4gQXMgYSByZXN1bHQsIGEgRE9NIGVsZW1lbnRcbiAgICAgICAqIHdpbGwgb25seSBiZSBjcmVhdGVkIGZvciB0aGUgbGFzdCBwYWdlIGluc2VydGVkLlxuICAgICAgICogQXMgYSByZXN1bHQsIGl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgdmlld3MgaW4gdGhlXG4gICAgICAgKiBzdGFjayB0aGF0IGRvIG5vdCBoYXZlIGB2aWV3LmVsZW1lbnRgIHlldC5cbiAgICAgICAqL1xuICAgICAgY29uc3QgZWxlbWVudCA9IHZpZXcuZWxlbWVudDtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGlmIChpID4gYWN0aXZlVmlld0luZGV4KSB7XG4gICAgICAgICAgLy8gdGhpcyB2aWV3IGNvbWVzIGFmdGVyIHRoZSBhY3RpdmUgdmlld1xuICAgICAgICAgIC8vIGxldCdzIHVubG9hZCBpdFxuICAgICAgICAgIGxpZmVjeWNsZShlbGVtZW50LCBMSUZFQ1lDTEVfV0lMTF9VTkxPQUQpO1xuICAgICAgICAgIHRoaXMuZGVzdHJveVZpZXcodmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaSA8IGFjdGl2ZVZpZXdJbmRleCkge1xuICAgICAgICAgIC8vIHRoaXMgdmlldyBjb21lcyBiZWZvcmUgdGhlIGFjdGl2ZSB2aWV3XG4gICAgICAgICAgLy8gYW5kIGl0IGlzIG5vdCBhIHBvcnRhbCB0aGVuIGVuc3VyZSBpdCBpcyBoaWRkZW5cbiAgICAgICAgICBzZXRQYWdlSGlkZGVuKGVsZW1lbnQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNhblN0YXJ0KCkge1xuICAgIHJldHVybiAoISF0aGlzLnN3aXBlR2VzdHVyZSAmJlxuICAgICAgIXRoaXMuaXNUcmFuc2l0aW9uaW5nICYmXG4gICAgICB0aGlzLnRyYW5zSW5zdHIubGVuZ3RoID09PSAwICYmXG4gICAgICB0aGlzLmFuaW1hdGlvbkVuYWJsZWQgJiZcbiAgICAgIHRoaXMuY2FuR29CYWNrU3luYygpKTtcbiAgfVxuICBvblN0YXJ0KCkge1xuICAgIHRoaXMucG9wKHsgZGlyZWN0aW9uOiAnYmFjaycsIHByb2dyZXNzQW5pbWF0aW9uOiB0cnVlIH0pO1xuICB9XG4gIG9uTW92ZShzdGVwVmFsdWUpIHtcbiAgICBpZiAodGhpcy5zYkFuaSkge1xuICAgICAgdGhpcy5zYkFuaS5wcm9ncmVzc1N0ZXAoc3RlcFZhbHVlKTtcbiAgICB9XG4gIH1cbiAgb25FbmQoc2hvdWxkQ29tcGxldGUsIHN0ZXBWYWx1ZSwgZHVyKSB7XG4gICAgaWYgKHRoaXMuc2JBbmkpIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zYkFuaS5vbkZpbmlzaCgoKSA9PiB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRW5hYmxlZCA9IHRydWU7XG4gICAgICB9LCB7IG9uZVRpbWVDYWxsYmFjazogdHJ1ZSB9KTtcbiAgICAgIC8vIEFjY291bnQgZm9yIHJvdW5kaW5nIGVycm9ycyBpbiBKU1xuICAgICAgbGV0IG5ld1N0ZXBWYWx1ZSA9IHNob3VsZENvbXBsZXRlID8gLTAuMDAxIDogMC4wMDE7XG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGlvbiB3aWxsIGJlIHJldmVyc2VkIGhlcmUsIHNvIG5lZWQgdG9cbiAgICAgICAqIHJldmVyc2UgdGhlIGVhc2luZyBjdXJ2ZSBhcyB3ZWxsXG4gICAgICAgKlxuICAgICAgICogQWRkaXRpb25hbGx5LCB3ZSBuZWVkIHRvIGFjY291bnQgZm9yIHRoZSB0aW1lIHJlbGF0aXZlXG4gICAgICAgKiB0byB0aGUgbmV3IGVhc2luZyBjdXJ2ZSwgYXMgYHN0ZXBWYWx1ZWAgaXMgZ29pbmcgdG8gYmUgZ2l2ZW5cbiAgICAgICAqIGluIHRlcm1zIG9mIGEgbGluZWFyIGN1cnZlLlxuICAgICAgICovXG4gICAgICBpZiAoIXNob3VsZENvbXBsZXRlKSB7XG4gICAgICAgIHRoaXMuc2JBbmkuZWFzaW5nKCdjdWJpYy1iZXppZXIoMSwgMCwgMC42OCwgMC4yOCknKTtcbiAgICAgICAgbmV3U3RlcFZhbHVlICs9IGdldFRpbWVHaXZlblByb2dyZXNzaW9uKFswLCAwXSwgWzEsIDBdLCBbMC42OCwgMC4yOF0sIFsxLCAxXSwgc3RlcFZhbHVlKVswXTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBuZXdTdGVwVmFsdWUgKz0gZ2V0VGltZUdpdmVuUHJvZ3Jlc3Npb24oWzAsIDBdLCBbMC4zMiwgMC43Ml0sIFswLCAxXSwgWzEsIDFdLCBzdGVwVmFsdWUpWzBdO1xuICAgICAgfVxuICAgICAgdGhpcy5zYkFuaS5wcm9ncmVzc0VuZChzaG91bGRDb21wbGV0ZSA/IDEgOiAwLCBuZXdTdGVwVmFsdWUsIGR1cik7XG4gICAgfVxuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gaChcInNsb3RcIiwgbnVsbCk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwic3dpcGVHZXN0dXJlXCI6IFtcInN3aXBlR2VzdHVyZUNoYW5nZWRcIl0sXG4gICAgXCJyb290XCI6IFtcInJvb3RDaGFuZ2VkXCJdXG4gIH07IH1cbn07XG5OYXYuc3R5bGUgPSBuYXZDc3M7XG5cbmNvbnN0IG5hdkxpbmsgPSAoZWwsIHJvdXRlckRpcmVjdGlvbiwgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgcm91dGVyQW5pbWF0aW9uKSA9PiB7XG4gIGNvbnN0IG5hdiA9IGVsLmNsb3Nlc3QoJ2lvbi1uYXYnKTtcbiAgaWYgKG5hdikge1xuICAgIGlmIChyb3V0ZXJEaXJlY3Rpb24gPT09ICdmb3J3YXJkJykge1xuICAgICAgaWYgKGNvbXBvbmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBuYXYucHVzaChjb21wb25lbnQsIGNvbXBvbmVudFByb3BzLCB7IHNraXBJZkJ1c3k6IHRydWUsIGFuaW1hdGlvbkJ1aWxkZXI6IHJvdXRlckFuaW1hdGlvbiB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocm91dGVyRGlyZWN0aW9uID09PSAncm9vdCcpIHtcbiAgICAgIGlmIChjb21wb25lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbmF2LnNldFJvb3QoY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgeyBza2lwSWZCdXN5OiB0cnVlLCBhbmltYXRpb25CdWlsZGVyOiByb3V0ZXJBbmltYXRpb24gfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHJvdXRlckRpcmVjdGlvbiA9PT0gJ2JhY2snKSB7XG4gICAgICByZXR1cm4gbmF2LnBvcCh7IHNraXBJZkJ1c3k6IHRydWUsIGFuaW1hdGlvbkJ1aWxkZXI6IHJvdXRlckFuaW1hdGlvbiB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG59O1xuXG5jb25zdCBOYXZMaW5rID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNpdGlvbiBkaXJlY3Rpb24gd2hlbiBuYXZpZ2F0aW5nIHRvIGFub3RoZXIgcGFnZS5cbiAgICAgKi9cbiAgICB0aGlzLnJvdXRlckRpcmVjdGlvbiA9ICdmb3J3YXJkJztcbiAgICB0aGlzLm9uQ2xpY2sgPSAoKSA9PiB7XG4gICAgICByZXR1cm4gbmF2TGluayh0aGlzLmVsLCB0aGlzLnJvdXRlckRpcmVjdGlvbiwgdGhpcy5jb21wb25lbnQsIHRoaXMuY29tcG9uZW50UHJvcHMsIHRoaXMucm91dGVyQW5pbWF0aW9uKTtcbiAgICB9O1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gaChIb3N0LCB7IG9uQ2xpY2s6IHRoaXMub25DbGljayB9KTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuXG5leHBvcnQgeyBOYXYgYXMgaW9uX25hdiwgTmF2TGluayBhcyBpb25fbmF2X2xpbmsgfTtcbiJdLCJuYW1lcyI6WyJyIiwicmVnaXN0ZXJJbnN0YW5jZSIsImUiLCJjcmVhdGVFdmVudCIsImgiLCJpIiwiZ2V0RWxlbWVudCIsIkgiLCJIb3N0IiwiYiIsImdldElvbk1vZGUiLCJjIiwiY29uZmlnIiwiZyIsImdldFRpbWVHaXZlblByb2dyZXNzaW9uIiwibiIsImFzc2VydCIsInMiLCJzaGFsbG93RXF1YWxTdHJpbmdNYXAiLCJsIiwibGlmZWN5Y2xlIiwidCIsInRyYW5zaXRpb24iLCJzZXRQYWdlSGlkZGVuIiwiZCIsIkxJRkVDWUNMRV9XSUxMX1VOTE9BRCIsIkxJRkVDWUNMRV9XSUxMX0xFQVZFIiwiTElGRUNZQ0xFX0RJRF9MRUFWRSIsImEiLCJhdHRhY2hDb21wb25lbnQiLCJWSUVXX1NUQVRFX05FVyIsIlZJRVdfU1RBVEVfQVRUQUNIRUQiLCJWSUVXX1NUQVRFX0RFU1RST1lFRCIsIlZpZXdDb250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJjb21wb25lbnQiLCJwYXJhbXMiLCJzdGF0ZSIsImluaXQiLCJjb250YWluZXIiLCJlbGVtZW50IiwiZGVsZWdhdGUiLCJfZGVzdHJveSIsInJlbW92ZVZpZXdGcm9tRG9tIiwicGFyZW50RWxlbWVudCIsInJlbW92ZSIsIm5hdiIsInVuZGVmaW5lZCIsIm1hdGNoZXMiLCJ2aWV3IiwiaWQiLCJjb252ZXJ0VG9WaWV3IiwicGFnZSIsImNvbnZlcnRUb1ZpZXdzIiwicGFnZXMiLCJtYXAiLCJjb21wb25lbnRQcm9wcyIsImZpbHRlciIsInYiLCJuYXZDc3MiLCJOYXYiLCJob3N0UmVmIiwiaW9uTmF2V2lsbExvYWQiLCJpb25OYXZXaWxsQ2hhbmdlIiwiaW9uTmF2RGlkQ2hhbmdlIiwidHJhbnNJbnN0ciIsImFuaW1hdGlvbkVuYWJsZWQiLCJ1c2VSb3V0ZXIiLCJpc1RyYW5zaXRpb25pbmciLCJkZXN0cm95ZWQiLCJ2aWV3cyIsImFuaW1hdGVkIiwic3dpcGVHZXN0dXJlQ2hhbmdlZCIsImdlc3R1cmUiLCJlbmFibGUiLCJzd2lwZUdlc3R1cmUiLCJyb290Q2hhbmdlZCIsInJvb3QiLCJzZXRSb290Iiwicm9vdFBhcmFtcyIsImNvbXBvbmVudFdpbGxMb2FkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWwiLCJjbG9zZXN0IiwibW9kZSIsImdldEJvb2xlYW4iLCJlbWl0IiwiY29tcG9uZW50RGlkTG9hZCIsImNyZWF0ZVN3aXBlQmFja0dlc3R1cmUiLCJjYW5TdGFydCIsImJpbmQiLCJvblN0YXJ0Iiwib25Nb3ZlIiwib25FbmQiLCJjb25uZWN0ZWRDYWxsYmFjayIsImRpc2Nvbm5lY3RlZENhbGxiYWNrIiwiZGVzdHJveSIsImxlbmd0aCIsInB1c2giLCJvcHRzIiwiZG9uZSIsImluc2VydCIsImluc2VydEluZGV4IiwiaW5zZXJ0UGFnZXMiLCJpbnNlcnRDb21wb25lbnRzIiwicXVldWVUcm5zIiwiaW5zZXJ0U3RhcnQiLCJpbnNlcnRWaWV3cyIsInBvcCIsInJlbW92ZUluZGV4IiwicG9wVG8iLCJpbmRleE9yVmlld0N0cmwiLCJ0aSIsInJlbW92ZVN0YXJ0IiwicmVtb3ZlQ291bnQiLCJyZW1vdmVWaWV3IiwicG9wVG9Sb290Iiwic3RhcnRJbmRleCIsInNldFBhZ2VzIiwic2V0Um91dGVJZCIsImRpcmVjdGlvbiIsImFuaW1hdGlvbiIsImFjdGl2ZSIsImdldEFjdGl2ZVN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNoYW5nZWQiLCJwcm9taXNlIiwiZmluaXNoIiwiY29tbW9uT3B0cyIsInVwZGF0ZVVSTCIsInZpZXdJc1JlYWR5IiwiZW50ZXJpbmdFbCIsIm1hcmsiLCJwIiwibWFya1Zpc2libGUiLCJ2aWV3Q29udHJvbGxlciIsImZpbmQiLCJPYmplY3QiLCJhc3NpZ24iLCJhbmltYXRpb25CdWlsZGVyIiwiZ2V0Um91dGVJZCIsInRhZ05hbWUiLCJnZXRBY3RpdmUiLCJnZXRCeUluZGV4IiwiaW5kZXgiLCJjYW5Hb0JhY2siLCJjYW5Hb0JhY2tTeW5jIiwiZ2V0UHJldmlvdXMiLCJnZXRQcmV2aW91c1N5bmMiLCJnZXRMZW5ndGgiLCJpbmRleE9mIiwiX2EiLCJfYiIsInNraXBJZkJ1c3kiLCJyZWplY3QiLCJyb3V0ZXIiLCJjYW5UcmFuc2l0aW9uIiwibmV4dFRybnMiLCJzdWNjZXNzIiwicmVzdWx0IiwiZmlyZUVycm9yIiwiaGFzQ29tcGxldGVkIiwicmVxdWlyZXNUcmFuc2l0aW9uIiwiZW50ZXJpbmdWaWV3IiwibGVhdmluZ1ZpZXciLCJuYXZDaGFuZ2VkIiwiZmFpbGVkIiwicmVqZWN0UmVhc29uIiwic2hpZnQiLCJydW5UcmFuc2l0aW9uIiwicHJlcGFyZVRJIiwiZ2V0RW50ZXJpbmdWaWV3IiwiRXJyb3IiLCJwb3N0Vmlld0luaXQiLCJlbnRlcmluZ1JlcXVpcmVzVHJhbnNpdGlvbiIsImxlYXZpbmdSZXF1aXJlc1RyYW5zaXRpb24iLCJpc0JhY2tEaXJlY3Rpb24iLCJfYyIsInZpZXdzTGVuZ3RoIiwidmlld0NvbnRyb2xsZXJzIiwicmVtb3ZlRW5kIiwiZGVzdHJveVF1ZXVlIiwiZmluYWxOdW1WaWV3cyIsImNvbnNvbGUiLCJ3YXJuIiwiaW5zZXJ0Vmlld0F0IiwiZGVzdHJveVZpZXciLCJwcm9ncmVzc0NhbGxiYWNrIiwicHJvZ3Jlc3NBbmltYXRpb24iLCJhbmkiLCJzYkFuaSIsImxlYXZpbmdFbCIsImFuaW1hdGlvbk9wdHMiLCJzaG93R29CYWNrIiwiYmFzZUVsIiwiZ2V0IiwidHJhbnNpdGlvbkZpbmlzaCIsImFjdGl2ZVZpZXciLCJ1bm1vdW50SW5hY3RpdmVWaWV3cyIsImV4aXN0aW5nSW5kZXgiLCJzcGxpY2UiLCJhY3RpdmVWaWV3SW5kZXgiLCJzdGVwVmFsdWUiLCJwcm9ncmVzc1N0ZXAiLCJzaG91bGRDb21wbGV0ZSIsImR1ciIsIm9uRmluaXNoIiwib25lVGltZUNhbGxiYWNrIiwibmV3U3RlcFZhbHVlIiwiZWFzaW5nIiwicHJvZ3Jlc3NFbmQiLCJyZW5kZXIiLCJ3YXRjaGVycyIsInN0eWxlIiwibmF2TGluayIsInJvdXRlckRpcmVjdGlvbiIsInJvdXRlckFuaW1hdGlvbiIsIk5hdkxpbmsiLCJvbkNsaWNrIiwiaW9uX25hdiIsImlvbl9uYXZfbGluayJdLCJzb3VyY2VSb290Ijoid2VicGFjazovLy8iLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19