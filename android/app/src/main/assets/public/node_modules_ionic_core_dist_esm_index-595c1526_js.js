"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_index-595c1526_js"],{

/***/ 2034:
/*!*************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/index-595c1526.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "startTapClick": () => (/* binding */ startTapClick)
/* harmony export */ });
/* harmony import */ var _helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers-4d272360.js */ 9158);
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */


const startTapClick = config => {
  let lastTouch = -MOUSE_WAIT * 10;
  let lastActivated = 0;
  let activatableEle;
  let activeRipple;
  let activeDefer;
  const useRippleEffect = config.getBoolean('animated', true) && config.getBoolean('rippleEffect', true);
  const clearDefers = new WeakMap(); // Touch Events

  const onTouchStart = ev => {
    lastTouch = (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_0__.u)(ev);
    pointerDown(ev);
  };

  const onTouchEnd = ev => {
    lastTouch = (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_0__.u)(ev);
    pointerUp(ev);
  };

  const onMouseDown = ev => {
    // Ignore right clicks
    if (ev.button === 2) {
      return;
    }

    const t = (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_0__.u)(ev) - MOUSE_WAIT;

    if (lastTouch < t) {
      pointerDown(ev);
    }
  };

  const onMouseUp = ev => {
    const t = (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_0__.u)(ev) - MOUSE_WAIT;

    if (lastTouch < t) {
      pointerUp(ev);
    }
  };

  const cancelActive = () => {
    clearTimeout(activeDefer);
    activeDefer = undefined;

    if (activatableEle) {
      removeActivated(false);
      activatableEle = undefined;
    }
  };

  const pointerDown = ev => {
    if (activatableEle) {
      return;
    }

    setActivatedElement(getActivatableTarget(ev), ev);
  };

  const pointerUp = ev => {
    setActivatedElement(undefined, ev);
  };

  const setActivatedElement = (el, ev) => {
    // do nothing
    if (el && el === activatableEle) {
      return;
    }

    clearTimeout(activeDefer);
    activeDefer = undefined;
    const {
      x,
      y
    } = (0,_helpers_4d272360_js__WEBPACK_IMPORTED_MODULE_0__.p)(ev); // deactivate selected

    if (activatableEle) {
      if (clearDefers.has(activatableEle)) {
        throw new Error('internal error');
      }

      if (!activatableEle.classList.contains(ACTIVATED)) {
        addActivated(activatableEle, x, y);
      }

      removeActivated(true);
    } // activate


    if (el) {
      const deferId = clearDefers.get(el);

      if (deferId) {
        clearTimeout(deferId);
        clearDefers.delete(el);
      }

      const delay = isInstant(el) ? 0 : ADD_ACTIVATED_DEFERS;
      el.classList.remove(ACTIVATED);
      activeDefer = setTimeout(() => {
        addActivated(el, x, y);
        activeDefer = undefined;
      }, delay);
    }

    activatableEle = el;
  };

  const addActivated = (el, x, y) => {
    lastActivated = Date.now();
    el.classList.add(ACTIVATED);
    const rippleEffect = useRippleEffect && getRippleEffect(el); // eslint-disable-next-line @typescript-eslint/prefer-optional-chain

    if (rippleEffect && rippleEffect.addRipple) {
      removeRipple();
      activeRipple = rippleEffect.addRipple(x, y);
    }
  };

  const removeRipple = () => {
    if (activeRipple !== undefined) {
      activeRipple.then(remove => remove());
      activeRipple = undefined;
    }
  };

  const removeActivated = smooth => {
    removeRipple();
    const active = activatableEle;

    if (!active) {
      return;
    }

    const time = CLEAR_STATE_DEFERS - Date.now() + lastActivated;

    if (smooth && time > 0 && !isInstant(active)) {
      const deferId = setTimeout(() => {
        active.classList.remove(ACTIVATED);
        clearDefers.delete(active);
      }, CLEAR_STATE_DEFERS);
      clearDefers.set(active, deferId);
    } else {
      active.classList.remove(ACTIVATED);
    }
  };

  const doc = document;
  doc.addEventListener('ionGestureCaptured', cancelActive);
  doc.addEventListener('touchstart', onTouchStart, true);
  doc.addEventListener('touchcancel', onTouchEnd, true);
  doc.addEventListener('touchend', onTouchEnd, true);
  /**
   * Tap click effects such as the ripple effect should
   * not happen when scrolling. For example, if a user scrolls
   * the page but also happens to do a touchstart on a button
   * as part of the scroll, the ripple effect should not
   * be dispatched. The ripple effect should only happen
   * if the button is activated and the page is not scrolling.
   *
   * pointercancel is dispatched on a gesture when scrolling
   * starts, so this lets us avoid having to listen for
   * ion-content's scroll events.
   */

  doc.addEventListener('pointercancel', cancelActive, true);
  doc.addEventListener('mousedown', onMouseDown, true);
  doc.addEventListener('mouseup', onMouseUp, true);
};

const getActivatableTarget = ev => {
  if (ev.composedPath) {
    /**
     * composedPath returns EventTarget[]. However,
     * objects other than Element can be targets too.
     * For example, AudioContext can be a target. In this
     * case, we know that the event is a UIEvent so we
     * can assume that the path will contain either Element
     * or ShadowRoot.
     */
    const path = ev.composedPath();

    for (let i = 0; i < path.length - 2; i++) {
      const el = path[i];

      if (!(el instanceof ShadowRoot) && el.classList.contains('ion-activatable')) {
        return el;
      }
    }
  } else {
    return ev.target.closest('.ion-activatable');
  }
};

const isInstant = el => {
  return el.classList.contains('ion-activatable-instant');
};

const getRippleEffect = el => {
  if (el.shadowRoot) {
    const ripple = el.shadowRoot.querySelector('ion-ripple-effect');

    if (ripple) {
      return ripple;
    }
  }

  return el.querySelector('ion-ripple-effect');
};

const ACTIVATED = 'ion-activated';
const ADD_ACTIVATED_DEFERS = 200;
const CLEAR_STATE_DEFERS = 200;
const MOUSE_WAIT = 2500;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW5kZXgtNTk1YzE1MjZfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNSSxhQUFhLEdBQUlDLE1BQUQsSUFBWTtFQUNoQyxJQUFJQyxTQUFTLEdBQUcsQ0FBQ0MsVUFBRCxHQUFjLEVBQTlCO0VBQ0EsSUFBSUMsYUFBYSxHQUFHLENBQXBCO0VBQ0EsSUFBSUMsY0FBSjtFQUNBLElBQUlDLFlBQUo7RUFDQSxJQUFJQyxXQUFKO0VBQ0EsTUFBTUMsZUFBZSxHQUFHUCxNQUFNLENBQUNRLFVBQVAsQ0FBa0IsVUFBbEIsRUFBOEIsSUFBOUIsS0FBdUNSLE1BQU0sQ0FBQ1EsVUFBUCxDQUFrQixjQUFsQixFQUFrQyxJQUFsQyxDQUEvRDtFQUNBLE1BQU1DLFdBQVcsR0FBRyxJQUFJQyxPQUFKLEVBQXBCLENBUGdDLENBUWhDOztFQUNBLE1BQU1DLFlBQVksR0FBSUMsRUFBRCxJQUFRO0lBQzNCWCxTQUFTLEdBQUdMLHVEQUFHLENBQUNnQixFQUFELENBQWY7SUFDQUMsV0FBVyxDQUFDRCxFQUFELENBQVg7RUFDRCxDQUhEOztFQUlBLE1BQU1FLFVBQVUsR0FBSUYsRUFBRCxJQUFRO0lBQ3pCWCxTQUFTLEdBQUdMLHVEQUFHLENBQUNnQixFQUFELENBQWY7SUFDQUcsU0FBUyxDQUFDSCxFQUFELENBQVQ7RUFDRCxDQUhEOztFQUlBLE1BQU1JLFdBQVcsR0FBSUosRUFBRCxJQUFRO0lBQzFCO0lBQ0EsSUFBSUEsRUFBRSxDQUFDSyxNQUFILEtBQWMsQ0FBbEIsRUFBcUI7TUFDbkI7SUFDRDs7SUFDRCxNQUFNQyxDQUFDLEdBQUd0Qix1REFBRyxDQUFDZ0IsRUFBRCxDQUFILEdBQVVWLFVBQXBCOztJQUNBLElBQUlELFNBQVMsR0FBR2lCLENBQWhCLEVBQW1CO01BQ2pCTCxXQUFXLENBQUNELEVBQUQsQ0FBWDtJQUNEO0VBQ0YsQ0FURDs7RUFVQSxNQUFNTyxTQUFTLEdBQUlQLEVBQUQsSUFBUTtJQUN4QixNQUFNTSxDQUFDLEdBQUd0Qix1REFBRyxDQUFDZ0IsRUFBRCxDQUFILEdBQVVWLFVBQXBCOztJQUNBLElBQUlELFNBQVMsR0FBR2lCLENBQWhCLEVBQW1CO01BQ2pCSCxTQUFTLENBQUNILEVBQUQsQ0FBVDtJQUNEO0VBQ0YsQ0FMRDs7RUFNQSxNQUFNUSxZQUFZLEdBQUcsTUFBTTtJQUN6QkMsWUFBWSxDQUFDZixXQUFELENBQVo7SUFDQUEsV0FBVyxHQUFHZ0IsU0FBZDs7SUFDQSxJQUFJbEIsY0FBSixFQUFvQjtNQUNsQm1CLGVBQWUsQ0FBQyxLQUFELENBQWY7TUFDQW5CLGNBQWMsR0FBR2tCLFNBQWpCO0lBQ0Q7RUFDRixDQVBEOztFQVFBLE1BQU1ULFdBQVcsR0FBSUQsRUFBRCxJQUFRO0lBQzFCLElBQUlSLGNBQUosRUFBb0I7TUFDbEI7SUFDRDs7SUFDRG9CLG1CQUFtQixDQUFDQyxvQkFBb0IsQ0FBQ2IsRUFBRCxDQUFyQixFQUEyQkEsRUFBM0IsQ0FBbkI7RUFDRCxDQUxEOztFQU1BLE1BQU1HLFNBQVMsR0FBSUgsRUFBRCxJQUFRO0lBQ3hCWSxtQkFBbUIsQ0FBQ0YsU0FBRCxFQUFZVixFQUFaLENBQW5CO0VBQ0QsQ0FGRDs7RUFHQSxNQUFNWSxtQkFBbUIsR0FBRyxDQUFDRSxFQUFELEVBQUtkLEVBQUwsS0FBWTtJQUN0QztJQUNBLElBQUljLEVBQUUsSUFBSUEsRUFBRSxLQUFLdEIsY0FBakIsRUFBaUM7TUFDL0I7SUFDRDs7SUFDRGlCLFlBQVksQ0FBQ2YsV0FBRCxDQUFaO0lBQ0FBLFdBQVcsR0FBR2dCLFNBQWQ7SUFDQSxNQUFNO01BQUVLLENBQUY7TUFBS0M7SUFBTCxJQUFXOUIsdURBQVksQ0FBQ2MsRUFBRCxDQUE3QixDQVBzQyxDQVF0Qzs7SUFDQSxJQUFJUixjQUFKLEVBQW9CO01BQ2xCLElBQUlLLFdBQVcsQ0FBQ29CLEdBQVosQ0FBZ0J6QixjQUFoQixDQUFKLEVBQXFDO1FBQ25DLE1BQU0sSUFBSTBCLEtBQUosQ0FBVSxnQkFBVixDQUFOO01BQ0Q7O01BQ0QsSUFBSSxDQUFDMUIsY0FBYyxDQUFDMkIsU0FBZixDQUF5QkMsUUFBekIsQ0FBa0NDLFNBQWxDLENBQUwsRUFBbUQ7UUFDakRDLFlBQVksQ0FBQzlCLGNBQUQsRUFBaUJ1QixDQUFqQixFQUFvQkMsQ0FBcEIsQ0FBWjtNQUNEOztNQUNETCxlQUFlLENBQUMsSUFBRCxDQUFmO0lBQ0QsQ0FqQnFDLENBa0J0Qzs7O0lBQ0EsSUFBSUcsRUFBSixFQUFRO01BQ04sTUFBTVMsT0FBTyxHQUFHMUIsV0FBVyxDQUFDMkIsR0FBWixDQUFnQlYsRUFBaEIsQ0FBaEI7O01BQ0EsSUFBSVMsT0FBSixFQUFhO1FBQ1hkLFlBQVksQ0FBQ2MsT0FBRCxDQUFaO1FBQ0ExQixXQUFXLENBQUM0QixNQUFaLENBQW1CWCxFQUFuQjtNQUNEOztNQUNELE1BQU1ZLEtBQUssR0FBR0MsU0FBUyxDQUFDYixFQUFELENBQVQsR0FBZ0IsQ0FBaEIsR0FBb0JjLG9CQUFsQztNQUNBZCxFQUFFLENBQUNLLFNBQUgsQ0FBYVUsTUFBYixDQUFvQlIsU0FBcEI7TUFDQTNCLFdBQVcsR0FBR29DLFVBQVUsQ0FBQyxNQUFNO1FBQzdCUixZQUFZLENBQUNSLEVBQUQsRUFBS0MsQ0FBTCxFQUFRQyxDQUFSLENBQVo7UUFDQXRCLFdBQVcsR0FBR2dCLFNBQWQ7TUFDRCxDQUh1QixFQUdyQmdCLEtBSHFCLENBQXhCO0lBSUQ7O0lBQ0RsQyxjQUFjLEdBQUdzQixFQUFqQjtFQUNELENBakNEOztFQWtDQSxNQUFNUSxZQUFZLEdBQUcsQ0FBQ1IsRUFBRCxFQUFLQyxDQUFMLEVBQVFDLENBQVIsS0FBYztJQUNqQ3pCLGFBQWEsR0FBR3dDLElBQUksQ0FBQy9DLEdBQUwsRUFBaEI7SUFDQThCLEVBQUUsQ0FBQ0ssU0FBSCxDQUFhYSxHQUFiLENBQWlCWCxTQUFqQjtJQUNBLE1BQU1ZLFlBQVksR0FBR3RDLGVBQWUsSUFBSXVDLGVBQWUsQ0FBQ3BCLEVBQUQsQ0FBdkQsQ0FIaUMsQ0FJakM7O0lBQ0EsSUFBSW1CLFlBQVksSUFBSUEsWUFBWSxDQUFDRSxTQUFqQyxFQUE0QztNQUMxQ0MsWUFBWTtNQUNaM0MsWUFBWSxHQUFHd0MsWUFBWSxDQUFDRSxTQUFiLENBQXVCcEIsQ0FBdkIsRUFBMEJDLENBQTFCLENBQWY7SUFDRDtFQUNGLENBVEQ7O0VBVUEsTUFBTW9CLFlBQVksR0FBRyxNQUFNO0lBQ3pCLElBQUkzQyxZQUFZLEtBQUtpQixTQUFyQixFQUFnQztNQUM5QmpCLFlBQVksQ0FBQzRDLElBQWIsQ0FBbUJSLE1BQUQsSUFBWUEsTUFBTSxFQUFwQztNQUNBcEMsWUFBWSxHQUFHaUIsU0FBZjtJQUNEO0VBQ0YsQ0FMRDs7RUFNQSxNQUFNQyxlQUFlLEdBQUkyQixNQUFELElBQVk7SUFDbENGLFlBQVk7SUFDWixNQUFNRyxNQUFNLEdBQUcvQyxjQUFmOztJQUNBLElBQUksQ0FBQytDLE1BQUwsRUFBYTtNQUNYO0lBQ0Q7O0lBQ0QsTUFBTUMsSUFBSSxHQUFHQyxrQkFBa0IsR0FBR1YsSUFBSSxDQUFDL0MsR0FBTCxFQUFyQixHQUFrQ08sYUFBL0M7O0lBQ0EsSUFBSStDLE1BQU0sSUFBSUUsSUFBSSxHQUFHLENBQWpCLElBQXNCLENBQUNiLFNBQVMsQ0FBQ1ksTUFBRCxDQUFwQyxFQUE4QztNQUM1QyxNQUFNaEIsT0FBTyxHQUFHTyxVQUFVLENBQUMsTUFBTTtRQUMvQlMsTUFBTSxDQUFDcEIsU0FBUCxDQUFpQlUsTUFBakIsQ0FBd0JSLFNBQXhCO1FBQ0F4QixXQUFXLENBQUM0QixNQUFaLENBQW1CYyxNQUFuQjtNQUNELENBSHlCLEVBR3ZCRSxrQkFIdUIsQ0FBMUI7TUFJQTVDLFdBQVcsQ0FBQzZDLEdBQVosQ0FBZ0JILE1BQWhCLEVBQXdCaEIsT0FBeEI7SUFDRCxDQU5ELE1BT0s7TUFDSGdCLE1BQU0sQ0FBQ3BCLFNBQVAsQ0FBaUJVLE1BQWpCLENBQXdCUixTQUF4QjtJQUNEO0VBQ0YsQ0FqQkQ7O0VBa0JBLE1BQU1zQixHQUFHLEdBQUdDLFFBQVo7RUFDQUQsR0FBRyxDQUFDRSxnQkFBSixDQUFxQixvQkFBckIsRUFBMkNyQyxZQUEzQztFQUNBbUMsR0FBRyxDQUFDRSxnQkFBSixDQUFxQixZQUFyQixFQUFtQzlDLFlBQW5DLEVBQWlELElBQWpEO0VBQ0E0QyxHQUFHLENBQUNFLGdCQUFKLENBQXFCLGFBQXJCLEVBQW9DM0MsVUFBcEMsRUFBZ0QsSUFBaEQ7RUFDQXlDLEdBQUcsQ0FBQ0UsZ0JBQUosQ0FBcUIsVUFBckIsRUFBaUMzQyxVQUFqQyxFQUE2QyxJQUE3QztFQUNBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7RUFDRXlDLEdBQUcsQ0FBQ0UsZ0JBQUosQ0FBcUIsZUFBckIsRUFBc0NyQyxZQUF0QyxFQUFvRCxJQUFwRDtFQUNBbUMsR0FBRyxDQUFDRSxnQkFBSixDQUFxQixXQUFyQixFQUFrQ3pDLFdBQWxDLEVBQStDLElBQS9DO0VBQ0F1QyxHQUFHLENBQUNFLGdCQUFKLENBQXFCLFNBQXJCLEVBQWdDdEMsU0FBaEMsRUFBMkMsSUFBM0M7QUFDRCxDQTFJRDs7QUEySUEsTUFBTU0sb0JBQW9CLEdBQUliLEVBQUQsSUFBUTtFQUNuQyxJQUFJQSxFQUFFLENBQUM4QyxZQUFQLEVBQXFCO0lBQ25CO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7SUFDSSxNQUFNQyxJQUFJLEdBQUcvQyxFQUFFLENBQUM4QyxZQUFILEVBQWI7O0lBQ0EsS0FBSyxJQUFJRSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRCxJQUFJLENBQUNFLE1BQUwsR0FBYyxDQUFsQyxFQUFxQ0QsQ0FBQyxFQUF0QyxFQUEwQztNQUN4QyxNQUFNbEMsRUFBRSxHQUFHaUMsSUFBSSxDQUFDQyxDQUFELENBQWY7O01BQ0EsSUFBSSxFQUFFbEMsRUFBRSxZQUFZb0MsVUFBaEIsS0FBK0JwQyxFQUFFLENBQUNLLFNBQUgsQ0FBYUMsUUFBYixDQUFzQixpQkFBdEIsQ0FBbkMsRUFBNkU7UUFDM0UsT0FBT04sRUFBUDtNQUNEO0lBQ0Y7RUFDRixDQWhCRCxNQWlCSztJQUNILE9BQU9kLEVBQUUsQ0FBQ21ELE1BQUgsQ0FBVUMsT0FBVixDQUFrQixrQkFBbEIsQ0FBUDtFQUNEO0FBQ0YsQ0FyQkQ7O0FBc0JBLE1BQU16QixTQUFTLEdBQUliLEVBQUQsSUFBUTtFQUN4QixPQUFPQSxFQUFFLENBQUNLLFNBQUgsQ0FBYUMsUUFBYixDQUFzQix5QkFBdEIsQ0FBUDtBQUNELENBRkQ7O0FBR0EsTUFBTWMsZUFBZSxHQUFJcEIsRUFBRCxJQUFRO0VBQzlCLElBQUlBLEVBQUUsQ0FBQ3VDLFVBQVAsRUFBbUI7SUFDakIsTUFBTUMsTUFBTSxHQUFHeEMsRUFBRSxDQUFDdUMsVUFBSCxDQUFjRSxhQUFkLENBQTRCLG1CQUE1QixDQUFmOztJQUNBLElBQUlELE1BQUosRUFBWTtNQUNWLE9BQU9BLE1BQVA7SUFDRDtFQUNGOztFQUNELE9BQU94QyxFQUFFLENBQUN5QyxhQUFILENBQWlCLG1CQUFqQixDQUFQO0FBQ0QsQ0FSRDs7QUFTQSxNQUFNbEMsU0FBUyxHQUFHLGVBQWxCO0FBQ0EsTUFBTU8sb0JBQW9CLEdBQUcsR0FBN0I7QUFDQSxNQUFNYSxrQkFBa0IsR0FBRyxHQUEzQjtBQUNBLE1BQU1uRCxVQUFVLEdBQUcsSUFBbkIiLCJzb3VyY2VzIjpbIi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2luZGV4LTU5NWMxNTI2LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG5pbXBvcnQgeyB1IGFzIG5vdywgcCBhcyBwb2ludGVyQ29vcmQgfSBmcm9tICcuL2hlbHBlcnMtNGQyNzIzNjAuanMnO1xuXG5jb25zdCBzdGFydFRhcENsaWNrID0gKGNvbmZpZykgPT4ge1xuICBsZXQgbGFzdFRvdWNoID0gLU1PVVNFX1dBSVQgKiAxMDtcbiAgbGV0IGxhc3RBY3RpdmF0ZWQgPSAwO1xuICBsZXQgYWN0aXZhdGFibGVFbGU7XG4gIGxldCBhY3RpdmVSaXBwbGU7XG4gIGxldCBhY3RpdmVEZWZlcjtcbiAgY29uc3QgdXNlUmlwcGxlRWZmZWN0ID0gY29uZmlnLmdldEJvb2xlYW4oJ2FuaW1hdGVkJywgdHJ1ZSkgJiYgY29uZmlnLmdldEJvb2xlYW4oJ3JpcHBsZUVmZmVjdCcsIHRydWUpO1xuICBjb25zdCBjbGVhckRlZmVycyA9IG5ldyBXZWFrTWFwKCk7XG4gIC8vIFRvdWNoIEV2ZW50c1xuICBjb25zdCBvblRvdWNoU3RhcnQgPSAoZXYpID0+IHtcbiAgICBsYXN0VG91Y2ggPSBub3coZXYpO1xuICAgIHBvaW50ZXJEb3duKGV2KTtcbiAgfTtcbiAgY29uc3Qgb25Ub3VjaEVuZCA9IChldikgPT4ge1xuICAgIGxhc3RUb3VjaCA9IG5vdyhldik7XG4gICAgcG9pbnRlclVwKGV2KTtcbiAgfTtcbiAgY29uc3Qgb25Nb3VzZURvd24gPSAoZXYpID0+IHtcbiAgICAvLyBJZ25vcmUgcmlnaHQgY2xpY2tzXG4gICAgaWYgKGV2LmJ1dHRvbiA9PT0gMikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0ID0gbm93KGV2KSAtIE1PVVNFX1dBSVQ7XG4gICAgaWYgKGxhc3RUb3VjaCA8IHQpIHtcbiAgICAgIHBvaW50ZXJEb3duKGV2KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG9uTW91c2VVcCA9IChldikgPT4ge1xuICAgIGNvbnN0IHQgPSBub3coZXYpIC0gTU9VU0VfV0FJVDtcbiAgICBpZiAobGFzdFRvdWNoIDwgdCkge1xuICAgICAgcG9pbnRlclVwKGV2KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGNhbmNlbEFjdGl2ZSA9ICgpID0+IHtcbiAgICBjbGVhclRpbWVvdXQoYWN0aXZlRGVmZXIpO1xuICAgIGFjdGl2ZURlZmVyID0gdW5kZWZpbmVkO1xuICAgIGlmIChhY3RpdmF0YWJsZUVsZSkge1xuICAgICAgcmVtb3ZlQWN0aXZhdGVkKGZhbHNlKTtcbiAgICAgIGFjdGl2YXRhYmxlRWxlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcG9pbnRlckRvd24gPSAoZXYpID0+IHtcbiAgICBpZiAoYWN0aXZhdGFibGVFbGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0QWN0aXZhdGVkRWxlbWVudChnZXRBY3RpdmF0YWJsZVRhcmdldChldiksIGV2KTtcbiAgfTtcbiAgY29uc3QgcG9pbnRlclVwID0gKGV2KSA9PiB7XG4gICAgc2V0QWN0aXZhdGVkRWxlbWVudCh1bmRlZmluZWQsIGV2KTtcbiAgfTtcbiAgY29uc3Qgc2V0QWN0aXZhdGVkRWxlbWVudCA9IChlbCwgZXYpID0+IHtcbiAgICAvLyBkbyBub3RoaW5nXG4gICAgaWYgKGVsICYmIGVsID09PSBhY3RpdmF0YWJsZUVsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoYWN0aXZlRGVmZXIpO1xuICAgIGFjdGl2ZURlZmVyID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gcG9pbnRlckNvb3JkKGV2KTtcbiAgICAvLyBkZWFjdGl2YXRlIHNlbGVjdGVkXG4gICAgaWYgKGFjdGl2YXRhYmxlRWxlKSB7XG4gICAgICBpZiAoY2xlYXJEZWZlcnMuaGFzKGFjdGl2YXRhYmxlRWxlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludGVybmFsIGVycm9yJyk7XG4gICAgICB9XG4gICAgICBpZiAoIWFjdGl2YXRhYmxlRWxlLmNsYXNzTGlzdC5jb250YWlucyhBQ1RJVkFURUQpKSB7XG4gICAgICAgIGFkZEFjdGl2YXRlZChhY3RpdmF0YWJsZUVsZSwgeCwgeSk7XG4gICAgICB9XG4gICAgICByZW1vdmVBY3RpdmF0ZWQodHJ1ZSk7XG4gICAgfVxuICAgIC8vIGFjdGl2YXRlXG4gICAgaWYgKGVsKSB7XG4gICAgICBjb25zdCBkZWZlcklkID0gY2xlYXJEZWZlcnMuZ2V0KGVsKTtcbiAgICAgIGlmIChkZWZlcklkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkZWZlcklkKTtcbiAgICAgICAgY2xlYXJEZWZlcnMuZGVsZXRlKGVsKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlbGF5ID0gaXNJbnN0YW50KGVsKSA/IDAgOiBBRERfQUNUSVZBVEVEX0RFRkVSUztcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoQUNUSVZBVEVEKTtcbiAgICAgIGFjdGl2ZURlZmVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGFkZEFjdGl2YXRlZChlbCwgeCwgeSk7XG4gICAgICAgIGFjdGl2ZURlZmVyID0gdW5kZWZpbmVkO1xuICAgICAgfSwgZGVsYXkpO1xuICAgIH1cbiAgICBhY3RpdmF0YWJsZUVsZSA9IGVsO1xuICB9O1xuICBjb25zdCBhZGRBY3RpdmF0ZWQgPSAoZWwsIHgsIHkpID0+IHtcbiAgICBsYXN0QWN0aXZhdGVkID0gRGF0ZS5ub3coKTtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKEFDVElWQVRFRCk7XG4gICAgY29uc3QgcmlwcGxlRWZmZWN0ID0gdXNlUmlwcGxlRWZmZWN0ICYmIGdldFJpcHBsZUVmZmVjdChlbCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9wcmVmZXItb3B0aW9uYWwtY2hhaW5cbiAgICBpZiAocmlwcGxlRWZmZWN0ICYmIHJpcHBsZUVmZmVjdC5hZGRSaXBwbGUpIHtcbiAgICAgIHJlbW92ZVJpcHBsZSgpO1xuICAgICAgYWN0aXZlUmlwcGxlID0gcmlwcGxlRWZmZWN0LmFkZFJpcHBsZSh4LCB5KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJlbW92ZVJpcHBsZSA9ICgpID0+IHtcbiAgICBpZiAoYWN0aXZlUmlwcGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGFjdGl2ZVJpcHBsZS50aGVuKChyZW1vdmUpID0+IHJlbW92ZSgpKTtcbiAgICAgIGFjdGl2ZVJpcHBsZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJlbW92ZUFjdGl2YXRlZCA9IChzbW9vdGgpID0+IHtcbiAgICByZW1vdmVSaXBwbGUoKTtcbiAgICBjb25zdCBhY3RpdmUgPSBhY3RpdmF0YWJsZUVsZTtcbiAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0aW1lID0gQ0xFQVJfU1RBVEVfREVGRVJTIC0gRGF0ZS5ub3coKSArIGxhc3RBY3RpdmF0ZWQ7XG4gICAgaWYgKHNtb290aCAmJiB0aW1lID4gMCAmJiAhaXNJbnN0YW50KGFjdGl2ZSkpIHtcbiAgICAgIGNvbnN0IGRlZmVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoQUNUSVZBVEVEKTtcbiAgICAgICAgY2xlYXJEZWZlcnMuZGVsZXRlKGFjdGl2ZSk7XG4gICAgICB9LCBDTEVBUl9TVEFURV9ERUZFUlMpO1xuICAgICAgY2xlYXJEZWZlcnMuc2V0KGFjdGl2ZSwgZGVmZXJJZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgYWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoQUNUSVZBVEVEKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignaW9uR2VzdHVyZUNhcHR1cmVkJywgY2FuY2VsQWN0aXZlKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQsIHRydWUpO1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBvblRvdWNoRW5kLCB0cnVlKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCwgdHJ1ZSk7XG4gIC8qKlxuICAgKiBUYXAgY2xpY2sgZWZmZWN0cyBzdWNoIGFzIHRoZSByaXBwbGUgZWZmZWN0IHNob3VsZFxuICAgKiBub3QgaGFwcGVuIHdoZW4gc2Nyb2xsaW5nLiBGb3IgZXhhbXBsZSwgaWYgYSB1c2VyIHNjcm9sbHNcbiAgICogdGhlIHBhZ2UgYnV0IGFsc28gaGFwcGVucyB0byBkbyBhIHRvdWNoc3RhcnQgb24gYSBidXR0b25cbiAgICogYXMgcGFydCBvZiB0aGUgc2Nyb2xsLCB0aGUgcmlwcGxlIGVmZmVjdCBzaG91bGQgbm90XG4gICAqIGJlIGRpc3BhdGNoZWQuIFRoZSByaXBwbGUgZWZmZWN0IHNob3VsZCBvbmx5IGhhcHBlblxuICAgKiBpZiB0aGUgYnV0dG9uIGlzIGFjdGl2YXRlZCBhbmQgdGhlIHBhZ2UgaXMgbm90IHNjcm9sbGluZy5cbiAgICpcbiAgICogcG9pbnRlcmNhbmNlbCBpcyBkaXNwYXRjaGVkIG9uIGEgZ2VzdHVyZSB3aGVuIHNjcm9sbGluZ1xuICAgKiBzdGFydHMsIHNvIHRoaXMgbGV0cyB1cyBhdm9pZCBoYXZpbmcgdG8gbGlzdGVuIGZvclxuICAgKiBpb24tY29udGVudCdzIHNjcm9sbCBldmVudHMuXG4gICAqL1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIGNhbmNlbEFjdGl2ZSwgdHJ1ZSk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgdHJ1ZSk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCB0cnVlKTtcbn07XG5jb25zdCBnZXRBY3RpdmF0YWJsZVRhcmdldCA9IChldikgPT4ge1xuICBpZiAoZXYuY29tcG9zZWRQYXRoKSB7XG4gICAgLyoqXG4gICAgICogY29tcG9zZWRQYXRoIHJldHVybnMgRXZlbnRUYXJnZXRbXS4gSG93ZXZlcixcbiAgICAgKiBvYmplY3RzIG90aGVyIHRoYW4gRWxlbWVudCBjYW4gYmUgdGFyZ2V0cyB0b28uXG4gICAgICogRm9yIGV4YW1wbGUsIEF1ZGlvQ29udGV4dCBjYW4gYmUgYSB0YXJnZXQuIEluIHRoaXNcbiAgICAgKiBjYXNlLCB3ZSBrbm93IHRoYXQgdGhlIGV2ZW50IGlzIGEgVUlFdmVudCBzbyB3ZVxuICAgICAqIGNhbiBhc3N1bWUgdGhhdCB0aGUgcGF0aCB3aWxsIGNvbnRhaW4gZWl0aGVyIEVsZW1lbnRcbiAgICAgKiBvciBTaGFkb3dSb290LlxuICAgICAqL1xuICAgIGNvbnN0IHBhdGggPSBldi5jb21wb3NlZFBhdGgoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMjsgaSsrKSB7XG4gICAgICBjb25zdCBlbCA9IHBhdGhbaV07XG4gICAgICBpZiAoIShlbCBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpICYmIGVsLmNsYXNzTGlzdC5jb250YWlucygnaW9uLWFjdGl2YXRhYmxlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gZXYudGFyZ2V0LmNsb3Nlc3QoJy5pb24tYWN0aXZhdGFibGUnKTtcbiAgfVxufTtcbmNvbnN0IGlzSW5zdGFudCA9IChlbCkgPT4ge1xuICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpb24tYWN0aXZhdGFibGUtaW5zdGFudCcpO1xufTtcbmNvbnN0IGdldFJpcHBsZUVmZmVjdCA9IChlbCkgPT4ge1xuICBpZiAoZWwuc2hhZG93Um9vdCkge1xuICAgIGNvbnN0IHJpcHBsZSA9IGVsLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignaW9uLXJpcHBsZS1lZmZlY3QnKTtcbiAgICBpZiAocmlwcGxlKSB7XG4gICAgICByZXR1cm4gcmlwcGxlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWwucXVlcnlTZWxlY3RvcignaW9uLXJpcHBsZS1lZmZlY3QnKTtcbn07XG5jb25zdCBBQ1RJVkFURUQgPSAnaW9uLWFjdGl2YXRlZCc7XG5jb25zdCBBRERfQUNUSVZBVEVEX0RFRkVSUyA9IDIwMDtcbmNvbnN0IENMRUFSX1NUQVRFX0RFRkVSUyA9IDIwMDtcbmNvbnN0IE1PVVNFX1dBSVQgPSAyNTAwO1xuXG5leHBvcnQgeyBzdGFydFRhcENsaWNrIH07XG4iXSwibmFtZXMiOlsidSIsIm5vdyIsInAiLCJwb2ludGVyQ29vcmQiLCJzdGFydFRhcENsaWNrIiwiY29uZmlnIiwibGFzdFRvdWNoIiwiTU9VU0VfV0FJVCIsImxhc3RBY3RpdmF0ZWQiLCJhY3RpdmF0YWJsZUVsZSIsImFjdGl2ZVJpcHBsZSIsImFjdGl2ZURlZmVyIiwidXNlUmlwcGxlRWZmZWN0IiwiZ2V0Qm9vbGVhbiIsImNsZWFyRGVmZXJzIiwiV2Vha01hcCIsIm9uVG91Y2hTdGFydCIsImV2IiwicG9pbnRlckRvd24iLCJvblRvdWNoRW5kIiwicG9pbnRlclVwIiwib25Nb3VzZURvd24iLCJidXR0b24iLCJ0Iiwib25Nb3VzZVVwIiwiY2FuY2VsQWN0aXZlIiwiY2xlYXJUaW1lb3V0IiwidW5kZWZpbmVkIiwicmVtb3ZlQWN0aXZhdGVkIiwic2V0QWN0aXZhdGVkRWxlbWVudCIsImdldEFjdGl2YXRhYmxlVGFyZ2V0IiwiZWwiLCJ4IiwieSIsImhhcyIsIkVycm9yIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJBQ1RJVkFURUQiLCJhZGRBY3RpdmF0ZWQiLCJkZWZlcklkIiwiZ2V0IiwiZGVsZXRlIiwiZGVsYXkiLCJpc0luc3RhbnQiLCJBRERfQUNUSVZBVEVEX0RFRkVSUyIsInJlbW92ZSIsInNldFRpbWVvdXQiLCJEYXRlIiwiYWRkIiwicmlwcGxlRWZmZWN0IiwiZ2V0UmlwcGxlRWZmZWN0IiwiYWRkUmlwcGxlIiwicmVtb3ZlUmlwcGxlIiwidGhlbiIsInNtb290aCIsImFjdGl2ZSIsInRpbWUiLCJDTEVBUl9TVEFURV9ERUZFUlMiLCJzZXQiLCJkb2MiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb21wb3NlZFBhdGgiLCJwYXRoIiwiaSIsImxlbmd0aCIsIlNoYWRvd1Jvb3QiLCJ0YXJnZXQiLCJjbG9zZXN0Iiwic2hhZG93Um9vdCIsInJpcHBsZSIsInF1ZXJ5U2VsZWN0b3IiXSwic291cmNlUm9vdCI6IndlYnBhY2s6Ly8vIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzBdfQ==